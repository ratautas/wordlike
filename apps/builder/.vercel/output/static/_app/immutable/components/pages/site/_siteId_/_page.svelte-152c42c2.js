import{S as ye,i as De,s as be,P as Z,Q as Ue,R as We,m as w,h as D,T as ce,b as I,U as Ke,B as R,V as fe,k as M,l as O,n as E,O as le,W as Df,o as bf,X as vf,Y as zr,Z as ne,g as Qe,t as _,d as Ze,f as C,K as ve,q as G,r as Y,J as k,w as j,a as V,x as U,c as H,y as W,z as K,D as Pt,_ as Ie,$ as te,p as Je,M as ts,e as Di,L as Vr,E as Hr,F as fi,G as di,H as hi,I as pi,u as pu}from"../../../../chunks/index-932b5f3a.js";import{k as Lt,w as at}from"../../../../chunks/singletons-fa90fae2.js";import{p as mu}from"../../../../chunks/stores-356cda18.js";import{d as Bt,c as Nn,a as gu}from"../../../../chunks/doc-4183494a.js";import{s as yu}from"../../../../chunks/supabase-4de9858b.js";function kf(r){let e,t='<g fill="currentColor"><path d="M1.5 2.5A1.5 1.5 0 0 1 3 1h10a1.5 1.5 0 0 1 1.5 1.5v3.563a2 2 0 0 1 0 3.874V13.5A1.5 1.5 0 0 1 13 15H3a1.5 1.5 0 0 1-1.5-1.5V9.937a2 2 0 0 1 0-3.874V2.5zm1 3.563a2 2 0 0 1 0 3.874V13.5a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V9.937a2 2 0 0 1 0-3.874V2.5A.5.5 0 0 0 13 2H3a.5.5 0 0 0-.5.5v3.563zM2 7a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm12 0a1 1 0 1 0 0 2a1 1 0 0 0 0-2z"/><path d="M11.434 4H4.566L4.5 5.994h.386c.21-1.252.612-1.446 2.173-1.495l.343-.011v6.343c0 .537-.116.665-1.049.748V12h3.294v-.421c-.938-.083-1.054-.21-1.054-.748V4.488l.348.01c1.56.05 1.963.244 2.173 1.496h.386L11.434 4z"/></g>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function Ef(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class xf extends ye{constructor(e){super(),De(this,e,Ef,kf,be,{})}}function wf(r){let e,t='<g fill="currentColor"><path d="M6.002 5.5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0z"/><path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71l-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/></g>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function Cf(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class Sf extends ye{constructor(e){super(),De(this,e,Cf,wf,be,{})}}function Af(r){let e,t='<path fill="currentColor" d="M8.384 1.226a.463.463 0 0 0-.768 0l-4.56 6.468a.537.537 0 0 0 0 .612l4.56 6.469a.463.463 0 0 0 .768 0l4.56-6.469a.537.537 0 0 0 0-.612l-4.56-6.468zM6.848.613a1.39 1.39 0 0 1 2.304 0l4.56 6.468a1.61 1.61 0 0 1 0 1.838l-4.56 6.468a1.39 1.39 0 0 1-2.304 0L2.288 8.92a1.61 1.61 0 0 1 0-1.838L6.848.613z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function Tf(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class Mf extends ye{constructor(e){super(),De(this,e,Tf,Af,be,{})}}const It=at(!1),rr=at(!1),ns=at(!1),Le=at(null),rs=at(),hr=at({x:null,y:null}),pr=at({x:null,y:null}),is=Lt([hr,pr],([r,e])=>r.x===null||e.x===null?null:e.x-r.x),ss=Lt([hr,pr],([r,e])=>r.y===null||e.y===null?null:e.y-r.y),Of=Lt([is,ss],([r,e])=>r!==null&&r!==0&&e!==null&&e!==0),ls=Lt([rr,ns],([r,e])=>r||e),_f=Lt([rs],([r])=>(r==null?void 0:r.composedPath())??[]);let si;const Nf=new Uint8Array(16);function Ff(){if(!si&&(si=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!si))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return si(Nf)}const _e=[];for(let r=0;r<256;++r)_e.push((r+256).toString(16).slice(1));function Bf(r,e=0){return(_e[r[e+0]]+_e[r[e+1]]+_e[r[e+2]]+_e[r[e+3]]+"-"+_e[r[e+4]]+_e[r[e+5]]+"-"+_e[r[e+6]]+_e[r[e+7]]+"-"+_e[r[e+8]]+_e[r[e+9]]+"-"+_e[r[e+10]]+_e[r[e+11]]+_e[r[e+12]]+_e[r[e+13]]+_e[r[e+14]]+_e[r[e+15]]).toLowerCase()}const If=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ml={randomUUID:If};function $f(r,e,t){if(Ml.randomUUID&&!e&&!r)return Ml.randomUUID();r=r||{};const n=r.random||(r.rng||Ff)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=n[i];return e}return Bf(n)}const Sn=at({});function jr(r,{id:e,type:t}){return Sn.update(n=>(n[e]||(n[e]={[t]:r}),n[e][t]=r,n)),{destroy(){Sn.update(n=>(delete n[e],n))}}}function Rf(r){var s;let e,t=((s=r[0])==null?void 0:s.html)+"",n,i;return{c(){e=M("div"),this.h()},l(o){e=O(o,"DIV",{class:!0});var l=w(e);l.forEach(D),this.h()},h(){E(e,"class","text svelte-1tgc0nl")},m(o,l){I(o,e,l),e.innerHTML=t,r[3](e),n||(i=le(e,"focus",r[4]),n=!0)},p(o,[l]){var a;l&1&&t!==(t=((a=o[0])==null?void 0:a.html)+"")&&(e.innerHTML=t)},i:R,o:R,d(o){o&&D(e),r[3](null),n=!1,i()}}}function Pf(r,e,t){const n=Df();let{elementData:i}=e,s;bf(()=>n("mount",s)),vf(()=>n("destroy"));function o(a){zr[a?"unshift":"push"](()=>{s=a,t(1,s)})}const l=a=>n("focus",a);return r.$$set=a=>{"elementData"in a&&t(0,i=a.elementData)},[i,s,n,o,l]}let Lf=class extends ye{constructor(e){super(),De(this,e,Pf,Rf,be,{elementData:0})}};const as={DESKTOP:"desktop",MOBILE:"mobile"},Jt={TEXT:"TEXT",IMAGE:"IMAGE",GRID:"GRID"},An={desktop:{x:0,y:0,width:100,height:100,paddingX:24,paddingY:24},tablet:{x:0,y:0,width:100,height:100,paddingX:24,paddingY:24},mobile:{x:0,y:0,width:100,height:100,paddingX:24,paddingY:24}};function Du({elementData:r,deviceKey:e}){var f,d;if(!r)return{};const{rows:t,columns:n,positions:i}=(d=r.children)==null?void 0:d.reduce((h,p)=>{const{x:m,y,width:g,height:b,snapLeft:v,snapRight:x}=p[e]??An[e];return h.columns.add(m),h.columns.add(m+g),h.rows.add(y),h.rows.add(y+b),h.positions.push({x:m,y,width:g,height:b,snapLeft:v,snapRight:x}),h},{rows:new Set([0]),columns:new Set([0,((f=r[e])==null?void 0:f.width)??An[e].width]),positions:[]}),s=[...t].sort((h,p)=>h-p),o=[...n].sort((h,p)=>h-p),l=s[s.length-1],a=i.map(h=>{const{x:p,y:m,width:y,height:g,snapLeft:b,snapRight:v}=h,x=s.indexOf(m)+2,T=s.indexOf(m+g)+2,P=o.length,Q=b?1:o.indexOf(p)+2,N=v?P+2:o.indexOf(p+y)+2;return[x,Q,T,N].join("/")}),{gridTemplateRows:c}=s.filter(h=>h>0).reduce((h,p)=>{const m=p-h.previousRow;return{gridTemplateRows:[...h.gridTemplateRows,m],previousRow:h.previousRow+m}},{gridTemplateRows:[],previousRow:0}),{gridTemplateColumns:u}=o.filter(h=>h>0).reduce((h,p)=>{const m=p-h.previousColumn;return{gridTemplateColumns:[...h.gridTemplateColumns,m],previousColumn:h.previousColumn+m}},{gridTemplateColumns:[],previousColumn:0});return{gridAreas:a,gridHeight:l,gridTemplateRows:c,gridTemplateColumns:u}}function zf({elementData:r,gridTemplateRows:e,deviceKey:t}){var n,i;return[((n=r[t])==null?void 0:n.paddingY)??An[t].paddingY,...e,((i=r[t])==null?void 0:i.paddingY)??An[t].paddingY].map(s=>`minmax(${s}px, 0fr)`).join(" ")}function Vf({elementData:r,gridTemplateColumns:e,deviceKey:t}){var s,o;const n=((s=r[t])==null?void 0:s.paddingX)??An[t].paddingX,i=((o=r[t])==null?void 0:o.width)??An[t].width;return[`minmax(${n??0}px, calc(50% - ${i/2}px))`,...e,`minmax(${n??0}px, calc(50% - ${i/2}px))`].map(l=>isNaN(Number(l))?l:`${l/i*1e3}fr`).join(" ")}function Hf(r){return Object.values(as).reduce((e,t)=>{const{gridTemplateRows:n,gridTemplateColumns:i,gridAreas:s}=Du({elementData:r,deviceKey:t}),o=zf({elementData:r,gridTemplateRows:n,deviceKey:t}),l=Vf({elementData:r,gridTemplateColumns:i,deviceKey:t});return e.gridCssVars+=`--${t}-rows: ${o}; --${t}-columns: ${l};`,s==null||s.forEach((a,c)=>{var u;(u=e.elementCssVars)[c]??(u[c]=""),e.elementCssVars[c]+=`--${t}-area: ${a};`}),e},{gridCssVars:"",elementCssVars:[]})}const Vs=96,Hs=24;function $o({elementData:r,gridElementData:e,diffX:t,diffY:n,resizeDirection:i,device:s}){var c;const o=r[s],l=((c=e[s])==null?void 0:c.width)??An[s].width,a={...o};if(!i){const u=Math.max(o.x+t,0),f=l-o.width,d=Math.max(o.y+n,0),h=l-o.height;return!o.snapLeft&&!o.snapRight&&(a.x=Math.min(u,f)),a.y=Math.min(d,h),{...r,[s]:a}}if(i.includes("N")){const u=Math.max(o.y+n,0),f=o.y+o.height-Hs,d=Math.max(o.height-n,Hs),h=o.y+o.height;if(a.y=Math.min(u,f),a.height=Math.min(d,h),i==="N")return{...r,[s]:a}}if(i.includes("E")){const u=Math.max(o.width+t,Vs),f=l-o.x;if(a.width=Math.min(u,f),i==="E")return{...r,[s]:a}}if(i.includes("S")){const u=Math.max(o.height+n,Hs);if(a.height=Math.min(u,l-o.y),i==="S")return{...r,[s]:a}}if(i.includes("W")){const u=Math.max(o.x+t,0),f=o.x+o.width-Vs,d=Math.max(o.width-t,Vs),h=o.x+o.width;if(a.x=Math.min(u,f),a.width=Math.min(d,h),i==="W")return{...r,[s]:a}}return{...r,[s]:a}}const gt=at(as.DESKTOP);Lt(gt,r=>r===as.DESKTOP);Lt(gt,r=>r===as.MOBILE);const jf=r=>setTimeout(()=>{var e,t;if(window.getSelection&&document.createRange){const n=document.createRange();n.selectNodeContents(r);const i=window.getSelection();i==null||i.removeAllRanges(),i==null||i.addRange(n)}else{const n=(t=(e=document.body).createTextRange)==null?void 0:t.call(e);n.moveToElementText(r),n.select()}},1),Ur={TEXT:"TEXT",IMAGE:"IMAGE",GRID:"GRID"},Uf=[Ur.IMAGE,Ur.GRID],Wf=300,Kf=72,Ol=["Sometimes I’ll start a sentence and I don’t even know where it’s going. I just hope I find it along the way.","I’m not superstitious, but I am a little stitious.","And I knew exactly what to do. But in a much more real sense, I had no idea what to do.","I wish there was a way to know you’re in the good old days before you’ve actually left them.","Would I rather be feared or loved? Easy. Both. I want people to be afraid of how much they love me.","I’m not saying I invented the question mark. But I’m also not saying I didn’t."],bu={PARAGRAPH:"PARAGRAPH",HEADING:"HEADING",BUTTON:"BUTTON"},Re=at([]),nn=at();function vu(r,e){return r==null?void 0:r.reduce((t,n)=>{if(e.includes(n.id))return{...t,[n.id]:n};if(n.children){const i=vu(n.children,e);if(i)return{...t,...i}}return t},{})}const Jf=Lt([Bt,Re],([r,e])=>e.length===0?{}:vu(r.pages[ne(Nn)].children,e));function qf(r){const e={id:$f(),type:r,[ne(gt)]:{width:Wf,height:Kf}};r===bu.PARAGRAPH&&(e.type="TEXT",e.html=`<p>${Ol[Math.floor(Math.random()*Ol.length)]}</p>`),nn.set(e)}async function ku(r){const e=ne(nn),t=ne(gu),n=ne(Nn),i=ne(Sn),s=t.children.findIndex(f=>f.id===r),o=i[r],l=i[e.id],a=l==null?void 0:l.querySelector("[contenteditable]"),c=o.getBoundingClientRect(),u=l.firstChild.getBoundingClientRect();e[ne(gt)]={...e[ne(gt)],x:u.x-c.x,y:u.y-c.y,width:u.width,height:u.height},Bt.update(f=>(rr.set(!1),ns.set(!1),nn.set(null),pr.set({x:null,y:null}),hr.set({x:null,y:null}),It.set(!1),Le.set(null),f.pages[n].children[s].children=[...f.pages[n].children[s].children,e],a==null||a.focus(),jf(a),f))}async function Gf(){const r=ne(Re),e=ne(Nn);function t(n){return n==null?void 0:n.filter(i=>!r.includes(i.id)).map(i=>({...i,children:t(i.children)}))}Bt.update(n=>(n.pages[e].children=t(n.pages[e].children),n)),Re.set([])}async function Cr(r,e){const t=ne(Re),n=ne(gt),i=ne(Nn),s=ne(Bt),{siteId:o}=ne(mu).params;function l(a,c){return t.includes(c.id)?$o({elementData:c,gridElementData:a,diffX:r,diffY:e,device:n,resizeDirection:ne(Le)}):c.children?{...c,children:c.children.map(u=>l(c,u))}:c}s.pages[i].children=s.pages[i].children.map(a=>({...a,children:a.children.map(c=>l(a,c))})),Bt.set(s),await yu.from("sites").update({doc:s}).eq("id",o).select().single()}async function Yf(r){const e=ne(Re),t=ne(Nn),n=ne(Bt),{siteId:i}=ne(mu).params;function s(o){return o==null?void 0:o.map(l=>e.includes(l.id)?{...l,[ne(gt)]:{...l[ne(gt)],...r==="LEFT"?{snapLeft:!0}:{},...r==="RIGHT"?{snapRight:!0}:{}},children:s(l.children)}:{...l,children:s(l.children)})}n.pages[t].children=s(n.pages[t].children),Bt.set(n),await yu.from("sites").update({doc:n}).eq("id",i).select().single()}function Eu(){function r(t){var i;if(t.type!==Ur.GRID)return t;const n=ne(Sn);return Object.keys(n).length?{...t,children:(i=t.children)==null?void 0:i.map(s=>{var g;const o=n[s.id],l=n[`${t.id}::GRID`],a=ne(gt),c=s[a],{x:u,width:f,snapLeft:d,snapRight:h}=c,p=d||h;if(!o||!l)return s;const m=l.getBoundingClientRect(),y=o.getBoundingClientRect();return{...s,[a]:{...s[a],x:p?u:y.x-m.x,y:y.y-m.y,width:p?f:y.width,height:y.height},children:(g=s.children)==null?void 0:g.map(r)}})}:t}const e=ne(Nn);Bt.update(t=>(t.pages[e].children=t.pages[e].children.map(r),t))}Lt([Bt,Sn,Nn],([r,e,t])=>{function n(i,s,o){return i[s.id]={...s,parent:o,siblings:o==null?void 0:o.children,refs:e[s.id]},s.children&&s.children.reduce((l,a)=>n(l,a,s),i),i}return r.pages[t].children.reduce((i,s)=>n(i,s),{})});function Xf(r){let e,t;return{c(){e=M("div"),t=G("drag and release"),this.h()},l(n){e=O(n,"DIV",{class:!0});var i=w(e);t=Y(i,"drag and release"),i.forEach(D),this.h()},h(){E(e,"class","h-16 animate-bounce flex justify-center items-center")},m(n,i){I(n,e,i),k(e,t)},p:R,i:R,o:R,d(n){n&&D(e)}}}function Qf(r){let e,t,n,i,s,o,l,a,c,u,f,d,h,p,m,y,g,b,v,x,T,P,Q,N,S,ee,q,$,F,ke,se,oe,Me,Oe,ge,de,he,tt,dn,hn,gr,yr,Ee,ut,Dr,br,zt,ws,Cs,Bn,Ss,As,In,Ts,Ms,vt,pn,Os,$n,_s,Ns,nt,Rn,Fs,Bs,Pn,Is,$s,Ln,Rs,Ps,zn,Ls,ei,zs,cl;return i=new xf({}),oe=new Sf({props:{class:"pointer-events-none"}}),pn=new Mf({props:{class:"pointer-events-none"}}),{c(){e=M("div"),t=M("button"),n=M("div"),j(i.$$.fragment),s=V(),o=M("div"),l=G("Text"),a=V(),c=M("div"),u=M("div"),f=G("Paragraph "),d=M("span"),h=G("(default)"),p=G(" [t]"),m=V(),y=M("div"),g=G("Heading [h]"),b=V(),v=M("div"),x=G("Button [b]"),T=V(),P=M("div"),Q=G("Custom 1"),N=V(),S=M("div"),ee=G("Custom 2"),q=V(),$=M("div"),F=G("Edit Custom Elements"),ke=V(),se=M("button"),j(oe.$$.fragment),Me=V(),Oe=M("div"),ge=G("Image"),de=V(),he=M("div"),tt=M("div"),dn=G("Media Library "),hn=M("span"),gr=G("(default)"),yr=G(" [m]"),Ee=V(),ut=M("div"),Dr=G("Upload [u]"),br=V(),zt=M("div"),ws=G("Icon [i]"),Cs=V(),Bn=M("div"),Ss=G("Free Resources [f]"),As=V(),In=M("div"),Ts=G("GIFs [g]"),Ms=V(),vt=M("button"),j(pn.$$.fragment),Os=V(),$n=M("div"),_s=G("Shape"),Ns=V(),nt=M("div"),Rn=M("div"),Fs=G("Rectangle [r]"),Bs=V(),Pn=M("div"),Is=G("Line [l]"),$s=V(),Ln=M("div"),Rs=G("Polylgon [p]"),Ps=V(),zn=M("div"),Ls=G("Draw [d]"),this.h()},l(Ye){e=O(Ye,"DIV",{class:!0});var Vt=w(e);t=O(Vt,"BUTTON",{class:!0});var ti=w(t);n=O(ti,"DIV",{class:!0});var ni=w(n);U(i.$$.fragment,ni),s=H(ni),o=O(ni,"DIV",{class:!0});var fl=w(o);l=Y(fl,"Text"),fl.forEach(D),ni.forEach(D),a=H(ti),c=O(ti,"DIV",{class:!0});var rt=w(c);u=O(rt,"DIV",{class:!0});var ri=w(u);f=Y(ri,"Paragraph "),d=O(ri,"SPAN",{});var dl=w(d);h=Y(dl,"(default)"),dl.forEach(D),p=Y(ri," [t]"),ri.forEach(D),m=H(rt),y=O(rt,"DIV",{class:!0});var hl=w(y);g=Y(hl,"Heading [h]"),hl.forEach(D),b=H(rt),v=O(rt,"DIV",{class:!0});var pl=w(v);x=Y(pl,"Button [b]"),pl.forEach(D),T=H(rt),P=O(rt,"DIV",{class:!0});var ml=w(P);Q=Y(ml,"Custom 1"),ml.forEach(D),N=H(rt),S=O(rt,"DIV",{class:!0});var gl=w(S);ee=Y(gl,"Custom 2"),gl.forEach(D),q=H(rt),$=O(rt,"DIV",{class:!0});var yl=w($);F=Y(yl,"Edit Custom Elements"),yl.forEach(D),rt.forEach(D),ti.forEach(D),ke=H(Vt),se=O(Vt,"BUTTON",{class:!0});var Vn=w(se);U(oe.$$.fragment,Vn),Me=H(Vn),Oe=O(Vn,"DIV",{class:!0});var Dl=w(Oe);ge=Y(Dl,"Image"),Dl.forEach(D),de=H(Vn),he=O(Vn,"DIV",{class:!0});var kt=w(he);tt=O(kt,"DIV",{class:!0});var ii=w(tt);dn=Y(ii,"Media Library "),hn=O(ii,"SPAN",{});var bl=w(hn);gr=Y(bl,"(default)"),bl.forEach(D),yr=Y(ii," [m]"),ii.forEach(D),Ee=H(kt),ut=O(kt,"DIV",{class:!0});var vl=w(ut);Dr=Y(vl,"Upload [u]"),vl.forEach(D),br=H(kt),zt=O(kt,"DIV",{class:!0});var kl=w(zt);ws=Y(kl,"Icon [i]"),kl.forEach(D),Cs=H(kt),Bn=O(kt,"DIV",{class:!0});var El=w(Bn);Ss=Y(El,"Free Resources [f]"),El.forEach(D),As=H(kt),In=O(kt,"DIV",{class:!0});var xl=w(In);Ts=Y(xl,"GIFs [g]"),xl.forEach(D),kt.forEach(D),Vn.forEach(D),Ms=H(Vt),vt=O(Vt,"BUTTON",{class:!0});var Hn=w(vt);U(pn.$$.fragment,Hn),Os=H(Hn),$n=O(Hn,"DIV",{class:!0});var wl=w($n);_s=Y(wl,"Shape"),wl.forEach(D),Ns=H(Hn),nt=O(Hn,"DIV",{class:!0});var Ht=w(nt);Rn=O(Ht,"DIV",{class:!0});var Cl=w(Rn);Fs=Y(Cl,"Rectangle [r]"),Cl.forEach(D),Bs=H(Ht),Pn=O(Ht,"DIV",{class:!0});var Sl=w(Pn);Is=Y(Sl,"Line [l]"),Sl.forEach(D),$s=H(Ht),Ln=O(Ht,"DIV",{class:!0});var Al=w(Ln);Rs=Y(Al,"Polylgon [p]"),Al.forEach(D),Ps=H(Ht),zn=O(Ht,"DIV",{class:!0});var Tl=w(zn);Ls=Y(Tl,"Draw [d]"),Tl.forEach(D),Ht.forEach(D),Hn.forEach(D),Vt.forEach(D),this.h()},h(){E(o,"class","text-xs pointer-events-none"),E(n,"class","flex flex-col items-center"),E(u,"class","flex p-2"),E(y,"class","flex"),E(v,"class","flex"),E(P,"class","flex"),E(S,"class","flex"),E($,"class","flex"),E(c,"class","hidden group-hover/action:block absolute -left-8 -right-8 top-full text-xs"),E(t,"class","group/action flex flex-col items-center justify-center w-12 h-12 mx-1 rounded hover:bg-gray-100 relative cursor-grab"),E(Oe,"class","text-xs pointer-events-none"),E(tt,"class","flex"),E(ut,"class","flex"),E(zt,"class","flex"),E(Bn,"class","flex"),E(In,"class","flex"),E(he,"class","hidden group-hover/action:block absolute -left-8 -right-8 top-full text-xs"),E(se,"class","group/action flex flex-col items-center justify-center w-12 h-12 mx-1 rounded hover:bg-gray-100 relative"),E($n,"class","text-xs pointer-events-none"),E(Rn,"class","flex"),E(Pn,"class","flex"),E(Ln,"class","flex"),E(zn,"class","flex"),E(nt,"class","hidden group-hover/action:block absolute -left-8 -right-8 top-full text-xs"),E(vt,"class","group/action flex flex-col items-center justify-center w-12 h-12 mx-1 rounded hover:bg-gray-100 relative"),E(e,"class","flex p-2 justify-center")},m(Ye,Vt){I(Ye,e,Vt),k(e,t),k(t,n),W(i,n,null),k(n,s),k(n,o),k(o,l),k(t,a),k(t,c),k(c,u),k(u,f),k(u,d),k(d,h),k(u,p),k(c,m),k(c,y),k(y,g),k(c,b),k(c,v),k(v,x),k(c,T),k(c,P),k(P,Q),k(c,N),k(c,S),k(S,ee),k(c,q),k(c,$),k($,F),k(e,ke),k(e,se),W(oe,se,null),k(se,Me),k(se,Oe),k(Oe,ge),k(se,de),k(se,he),k(he,tt),k(tt,dn),k(tt,hn),k(hn,gr),k(tt,yr),k(he,Ee),k(he,ut),k(ut,Dr),k(he,br),k(he,zt),k(zt,ws),k(he,Cs),k(he,Bn),k(Bn,Ss),k(he,As),k(he,In),k(In,Ts),k(e,Ms),k(e,vt),W(pn,vt,null),k(vt,Os),k(vt,$n),k($n,_s),k(vt,Ns),k(vt,nt),k(nt,Rn),k(Rn,Fs),k(nt,Bs),k(nt,Pn),k(Pn,Is),k(nt,$s),k(nt,Ln),k(Ln,Rs),k(nt,Ps),k(nt,zn),k(zn,Ls),ei=!0,zs||(cl=[le(n,"mousedown",r[3]),le(u,"mousedown",r[4])],zs=!0)},p:R,i(Ye){ei||(C(i.$$.fragment,Ye),C(oe.$$.fragment,Ye),C(pn.$$.fragment,Ye),ei=!0)},o(Ye){_(i.$$.fragment,Ye),_(oe.$$.fragment,Ye),_(pn.$$.fragment,Ye),ei=!1},d(Ye){Ye&&D(e),K(i),K(oe),K(pn),zs=!1,Pt(cl)}}}function Zf(r){let e,t,n,i;const s=[Qf,Xf],o=[];function l(a,c){return a[0]?1:0}return t=l(r),n=o[t]=s[t](r),{c(){e=M("header"),n.c(),this.h()},l(a){e=O(a,"HEADER",{class:!0});var c=w(e);n.l(c),c.forEach(D),this.h()},h(){E(e,"class","sticky left-0 right-0 top-0 z-50 bg-white")},m(a,c){I(a,e,c),o[t].m(e,null),i=!0},p(a,[c]){let u=t;t=l(a),t===u?o[t].p(a,c):(Qe(),_(o[u],1,1,()=>{o[u]=null}),Ze(),n=o[t],n?n.p(a,c):(n=o[t]=s[t](a),n.c()),C(n,1),n.m(e,null))},i(a){i||(C(n),i=!0)},o(a){_(n),i=!1},d(a){a&&D(e),o[t].d()}}}function ed(r,e,t){let n;ve(r,ls,u=>t(0,n=u));const{PARAGRAPH:i,HEADING:s,BUTTON:o}=bu;function l(u,f){pr.set({x:u.clientX,y:u.clientY}),qf(f),rr.set(!0)}return[n,i,l,u=>l(u,i),u=>l(u,i)]}class td extends ye{constructor(e){super(),De(this,e,ed,Zf,be,{})}}function _l(r){let e,t,n,i,s,o,l,a,c,u,f,d,h,p,m,y,g,b=r[1]&&Nl(r);return{c(){b&&b.c(),e=V(),t=M("div"),i=V(),s=M("div"),l=V(),a=M("div"),u=V(),f=M("div"),h=V(),p=M("div"),this.h()},l(v){b&&b.l(v),e=H(v),t=O(v,"DIV",{class:!0}),w(t).forEach(D),i=H(v),s=O(v,"DIV",{class:!0}),w(s).forEach(D),l=H(v),a=O(v,"DIV",{class:!0}),w(a).forEach(D),u=H(v),f=O(v,"DIV",{class:!0}),w(f).forEach(D),h=H(v),p=O(v,"DIV",{class:!0}),w(p).forEach(D),this.h()},h(){E(t,"class",n=Ie(`side side--s side--${r[0]}`)+" svelte-1w0240t"),E(s,"class",o=Ie(`corner corner--ne corner--${r[0]}`)+" svelte-1w0240t"),E(a,"class",c=Ie(`corner corner--nw corner--${r[0]}`)+" svelte-1w0240t"),E(f,"class",d=Ie(`corner corner--se corner--${r[0]}`)+" svelte-1w0240t"),E(p,"class",m=Ie(`corner corner--sw corner--${r[0]}`)+" svelte-1w0240t")},m(v,x){b&&b.m(v,x),I(v,e,x),I(v,t,x),I(v,i,x),I(v,s,x),I(v,l,x),I(v,a,x),I(v,u,x),I(v,f,x),I(v,h,x),I(v,p,x),y||(g=[le(t,"mousedown",r[7]),le(s,"mousedown",r[8]),le(a,"mousedown",r[9]),le(f,"mousedown",r[10]),le(p,"mousedown",r[11])],y=!0)},p(v,x){v[1]?b?b.p(v,x):(b=Nl(v),b.c(),b.m(e.parentNode,e)):b&&(b.d(1),b=null),x&1&&n!==(n=Ie(`side side--s side--${v[0]}`)+" svelte-1w0240t")&&E(t,"class",n),x&1&&o!==(o=Ie(`corner corner--ne corner--${v[0]}`)+" svelte-1w0240t")&&E(s,"class",o),x&1&&c!==(c=Ie(`corner corner--nw corner--${v[0]}`)+" svelte-1w0240t")&&E(a,"class",c),x&1&&d!==(d=Ie(`corner corner--se corner--${v[0]}`)+" svelte-1w0240t")&&E(f,"class",d),x&1&&m!==(m=Ie(`corner corner--sw corner--${v[0]}`)+" svelte-1w0240t")&&E(p,"class",m)},d(v){b&&b.d(v),v&&D(e),v&&D(t),v&&D(i),v&&D(s),v&&D(l),v&&D(a),v&&D(u),v&&D(f),v&&D(h),v&&D(p),y=!1,Pt(g)}}}function Nl(r){let e,t,n,i;return{c(){e=M("div"),this.h()},l(s){e=O(s,"DIV",{class:!0}),w(e).forEach(D),this.h()},h(){E(e,"class",t=Ie(`side side--n side--${r[0]}`)+" svelte-1w0240t")},m(s,o){I(s,e,o),n||(i=le(e,"mousedown",r[6]),n=!0)},p(s,o){o&1&&t!==(t=Ie(`side side--n side--${s[0]}`)+" svelte-1w0240t")&&E(e,"class",t)},d(s){s&&D(e),n=!1,i()}}}function nd(r){let e,t,n,i,s,o,l,a,c,u=r[2]&&_l(r);return{c(){e=M("div"),t=M("div"),i=V(),s=M("div"),l=V(),u&&u.c(),this.h()},l(f){e=O(f,"DIV",{class:!0});var d=w(e);t=O(d,"DIV",{class:!0}),w(t).forEach(D),i=H(d),s=O(d,"DIV",{class:!0}),w(s).forEach(D),l=H(d),u&&u.l(d),d.forEach(D),this.h()},h(){E(t,"class",n=Ie(`side side--e side--${r[0]}`)+" svelte-1w0240t"),E(s,"class",o=Ie(`side side--w side--${r[0]}`)+" svelte-1w0240t"),E(e,"class","absolute inset-0 z-[-1] opacity-30 ring-dark-50 ring-opacity-5 ring-[1px] group-hover/element:opacity-100")},m(f,d){I(f,e,d),k(e,t),k(e,i),k(e,s),k(e,l),u&&u.m(e,null),a||(c=[le(t,"mousedown",r[4]),le(s,"mousedown",r[5])],a=!0)},p(f,[d]){d&1&&n!==(n=Ie(`side side--e side--${f[0]}`)+" svelte-1w0240t")&&E(t,"class",n),d&1&&o!==(o=Ie(`side side--w side--${f[0]}`)+" svelte-1w0240t")&&E(s,"class",o),f[2]?u?u.p(f,d):(u=_l(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:R,o:R,d(f){f&&D(e),u&&u.d(),a=!1,Pt(c)}}}function rd(r,e,t){let n,i,s,o,{elementData:l}=e;const a=()=>Le.set("E"),c=()=>Le.set("W"),u=()=>Le.set("N"),f=()=>Le.set("S"),d=()=>Le.set("NE"),h=()=>Le.set("NW"),p=()=>Le.set("SE"),m=()=>Le.set("SW");return r.$$set=y=>{"elementData"in y&&t(3,l=y.elementData)},r.$$.update=()=>{r.$$.dirty&8&&t(0,{id:n,type:i}=l??{},i),r.$$.dirty&1&&t(2,s=Uf.includes(i)),r.$$.dirty&1&&t(1,o=i!==Ur.GRID)},[i,o,s,l,a,c,u,f,d,h,p,m]}class xu extends ye{constructor(e){super(),De(this,e,rd,nd,be,{elementData:3})}}function Fl(r,e,t){const n=r.slice();return n[18]=e[t],n}function Bl(r,e,t){const n=r.slice();return n[21]=e[t],n}function Il(r){let e;return{c(){e=M("div"),this.h()},l(t){e=O(t,"DIV",{class:!0}),w(e).forEach(D),this.h()},h(){E(e,"class","column w-[var(--column-width)] text-xs border-[1px] border-solid border-gray-300 rounded-sm transition-all"),te(e,"shadow-[1px_1px_4px_0px_rgba(0,0,0,.1)]",r[21]),te(e,"scale-105",r[21]),te(e,"border-transparent",r[21])},m(t,n){I(t,e,n)},p(t,n){n&4&&te(e,"shadow-[1px_1px_4px_0px_rgba(0,0,0,.1)]",t[21]),n&4&&te(e,"scale-105",t[21]),n&4&&te(e,"border-transparent",t[21])},d(t){t&&D(e)}}}function $l(r){let e,t,n=r[18],i=[];for(let s=0;s<n.length;s+=1)i[s]=Il(Bl(r,n,s));return{c(){e=M("div");for(let s=0;s<i.length;s+=1)i[s].c();t=V(),this.h()},l(s){e=O(s,"DIV",{class:!0});var o=w(e);for(let l=0;l<i.length;l+=1)i[l].l(o);t=H(o),o.forEach(D),this.h()},h(){E(e,"class","row flex justify-between h-[var(--row-height)] gap-[var(--gap)]")},m(s,o){I(s,e,o);for(let l=0;l<i.length;l+=1)i[l].m(e,null);k(e,t)},p(s,o){if(o&4){n=s[18];let l;for(l=0;l<n.length;l+=1){const a=Bl(s,n,l);i[l]?i[l].p(a,o):(i[l]=Il(a),i[l].c(),i[l].m(e,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d(s){s&&D(e),ts(i,s)}}}function id(r){let e,t=r[2],n=[];for(let i=0;i<t.length;i+=1)n[i]=$l(Fl(r,t,i));return{c(){e=M("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=O(i,"DIV",{class:!0});var s=w(e);for(let o=0;o<n.length;o+=1)n[o].l(s);s.forEach(D),this.h()},h(){E(e,"class","flex flex-col content-start gap-[var(--gap)] opacity-0"),te(e,"opacity-100",r[1]||r[0]),Je(e,"--column-width",r[4]),Je(e,"--row-height",r[3]),Je(e,"--gap",r[5])},m(i,s){I(i,e,s);for(let o=0;o<n.length;o+=1)n[o].m(e,null)},p(i,[s]){if(s&4){t=i[2];let o;for(o=0;o<t.length;o+=1){const l=Fl(i,t,o);n[o]?n[o].p(l,s):(n[o]=$l(l),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}s&3&&te(e,"opacity-100",i[1]||i[0]),s&16&&Je(e,"--column-width",i[4]),s&8&&Je(e,"--row-height",i[3]),s&32&&Je(e,"--gap",i[5])},i:R,o:R,d(i){i&&D(e),ts(n,i)}}}function sd({isDragging:r,isInserting:e,selectedElementsDataMap:t,rowArray:n,columnArray:i,columnWidth:s,rowHeight:o,gap:l,diffX:a,diffY:c,resizeDirection:u,elementData:f,device:d}){return n.map((h,p)=>i.map((m,y)=>!r&&!e?!1:Object.entries(t).some(([g,b])=>{const{x:v,y:x,width:T,height:P,type:Q}=$o({elementData:b,gridElementData:f,device:d,diffX:a,diffY:c,resizeDirection:u})[d];if(Q===Ur.GRID)return!1;const N=y*(s+l)+s,S=N-s+l,ee=p*(o+l)+o,q=ee-o+l,$=x<=ee&&q<=x+P;return v<=N&&S<=v+T&&$})))}let Rl=12,oi=12,js=36;function od(r,e,t){let n,i,s,o,l,a,c,u,f,d,h,p,m,y,g,b,v;ve(r,gt,T=>t(13,h=T)),ve(r,Le,T=>t(14,p=T)),ve(r,ss,T=>t(15,m=T)),ve(r,is,T=>t(16,y=T)),ve(r,Jf,T=>t(17,g=T)),ve(r,ls,T=>t(0,b=T)),ve(r,It,T=>t(1,v=T));let{elementData:x}=e;return r.$$set=T=>{"elementData"in T&&t(6,x=T.elementData)},r.$$.update=()=>{r.$$.dirty&8256&&t(11,{gridHeight:n}=Du({elementData:x,deviceKey:h}),n),r.$$.dirty&8256&&t(12,{width:i}=(x==null?void 0:x[h])??DEVICE_DEFAULTS[h],i),r.$$.dirty&4096&&t(7,l=(i+oi)/Rl-oi),r.$$.dirty&4224&&t(4,a=`${l/i*100}%`),r.$$.dirty&2048&&t(10,c=Math.floor(n/js)??0),r.$$.dirty&1024&&t(9,u=Array.from(Array(c))),r.$$.dirty&254915&&t(2,d=sd({isDragging:v,isInserting:b,selectedElementsDataMap:g,rowArray:u,columnArray:o,columnWidth:l,rowHeight:js,gap:oi,diffX:y,diffY:m,resizeDirection:p,elementData:x,device:h}))},t(5,s=`${oi}px`),t(8,o=Array.from(Array(Rl))),t(3,f=`${js}px`),[b,v,d,f,a,s,x,l,o,u,c,n,i,h,p,m,y,g]}class ld extends ye{constructor(e){super(),De(this,e,od,id,be,{elementData:6})}}function Pl(r){let e,t,n,i,s,o,l,a,c;return{c(){e=M("div"),t=V(),n=M("div"),s=V(),o=M("div"),this.h()},l(u){e=O(u,"DIV",{class:!0}),w(e).forEach(D),t=H(u),n=O(u,"DIV",{class:!0}),w(n).forEach(D),s=H(u),o=O(u,"DIV",{class:!0}),w(o).forEach(D),this.h()},h(){E(e,"class","opacity-0 pointer-events-none grid [grid-area:2/2/-2/-2]"),E(n,"class","absolute left-0 bg-black inset-y-0 hover:opacity-30 opacity-0 w-[var(--grow-left)] transition-opacity"),te(n,"opacity-10",r[1]&&r[3]==="LEFT"),Je(n,"--grow-left",`${r[6]}px`),E(o,"class","absolute right-0 bg-black inset-y-0 hover:opacity-30 opacity-0 w-[var(--grow-right)] transition-opacity"),te(o,"opacity-10",r[1]&&r[3]==="RIGHT"),Je(o,"--grow-right",`${r[5]}px`)},m(u,f){I(u,e,f),r[9](e),I(u,t,f),I(u,n,f),I(u,s,f),I(u,o,f),a||(c=[Vr(i=jr.call(null,n,{id:r[0].id,type:"overshootLeftRef"})),Vr(l=jr.call(null,o,{id:r[0].id,type:"overshootRightRef"}))],a=!0)},p(u,f){i&&Hr(i.update)&&f&1&&i.update.call(null,{id:u[0].id,type:"overshootLeftRef"}),f&10&&te(n,"opacity-10",u[1]&&u[3]==="LEFT"),f&64&&Je(n,"--grow-left",`${u[6]}px`),l&&Hr(l.update)&&f&1&&l.update.call(null,{id:u[0].id,type:"overshootRightRef"}),f&10&&te(o,"opacity-10",u[1]&&u[3]==="RIGHT"),f&32&&Je(o,"--grow-right",`${u[5]}px`)},d(u){u&&D(e),r[9](null),u&&D(t),u&&D(n),u&&D(s),u&&D(o),a=!1,Pt(c)}}}function ad(r){let e,t=r[4]&&Pl(r);return{c(){t&&t.c(),e=Di()},l(n){t&&t.l(n),e=Di()},m(n,i){t&&t.m(n,i),I(n,e,i)},p(n,[i]){n[4]?t?t.p(n,i):(t=Pl(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:R,o:R,d(n){t&&t.d(n),n&&D(e)}}}function ud(r,e,t){let n,i,s,o,l,a;ve(r,rs,h=>t(7,o=h)),ve(r,Le,h=>t(4,l=h)),ve(r,It,h=>t(8,a=h));let{elementData:c}=e,{isHovered:u=!1}=e,f;function d(h){zr[h?"unshift":"push"](()=>{f=h,t(2,f)})}return r.$$set=h=>{"elementData"in h&&t(0,c=h.elementData),"isHovered"in h&&t(1,u=h.isHovered)},r.$$.update=()=>{r.$$.dirty&405&&t(3,n=(()=>{if(!a||c.type!==Jt.GRID||!l)return;const{x:h,width:p}=(f==null?void 0:f.getBoundingClientRect())??{},{clientX:m}=o;if(!(!h||!p)){if(l.includes("W")&&m-h<0)return"LEFT";if(l.includes("E")&&m-h>p)return"RIGHT"}})()),r.$$.dirty&142&&t(6,i=(()=>{if(!u&&n!=="LEFT")return 0;const{clientX:h}=o??{},{x:p}=(f==null?void 0:f.getBoundingClientRect())??{};return p?8+(p-h)/16:8})()),r.$$.dirty&142&&t(5,s=(()=>{if(!u&&n!=="RIGHT")return 0;const{clientX:h}=o??{},{x:p,width:m}=(f==null?void 0:f.getBoundingClientRect())??{};return!p||!m?8:8+(h-p-m)/16})())},[c,u,f,n,l,s,i,o,a,d]}class cd extends ye{constructor(e){super(),De(this,e,ud,ad,be,{elementData:0,isHovered:1})}}function Ne(r){this.content=r}Ne.prototype={constructor:Ne,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var n=t&&t!=r?this.remove(t):this,i=n.find(r),s=n.content.slice();return i==-1?s.push(t||r,e):(s[i+1]=e,t&&(s[i]=t)),new Ne(s)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Ne(t)},addToStart:function(r,e){return new Ne([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new Ne(t)},addBefore:function(r,e,t){var n=this.remove(e),i=n.content.slice(),s=n.find(r);return i.splice(s==-1?i.length:s,0,e,t),new Ne(i)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=Ne.from(r),r.size?new Ne(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=Ne.from(r),r.size?new Ne(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=Ne.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};Ne.from=function(r){if(r instanceof Ne)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new Ne(e)};function wu(r,e,t){for(let n=0;;n++){if(n==r.childCount||n==e.childCount)return r.childCount==e.childCount?null:t;let i=r.child(n),s=e.child(n);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=wu(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Cu(r,e,t,n){for(let i=r.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:n};let o=r.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){t-=a,n-=a;continue}if(!o.sameMarkup(l))return{a:t,b:n};if(o.isText&&o.text!=l.text){let c=0,u=Math.min(o.text.length,l.text.length);for(;c<u&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,t--,n--;return{a:t,b:n}}if(o.content.size||l.content.size){let c=Cu(o.content,l.content,t-1,n-1);if(c)return c}t-=a,n-=a}}class A{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,i=0,s){for(let o=0,l=0;l<t;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&n(a,i+l,s||null,o)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,t-u),n,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,i){let s="",o=!0;return this.nodesBetween(e,t,(l,a)=>{l.isText?(s+=l.text.slice(Math.max(e,a)-a,t-a),o=!n):l.isLeaf?(i?s+=typeof i=="function"?i(l):i:l.type.spec.leafText&&(s+=l.type.spec.leafText(l)),o=!n):!o&&l.isBlock&&(s+=n,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(n)&&(i[i.length-1]=t.withText(t.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new A(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let n=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,t-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,t-o-1))),n.push(l),i+=l.nodeSize),o=a}return new A(n,i)}cutByIndex(e,t){return e==t?A.empty:e==0&&t==this.content.length?this:new A(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-n.nodeSize;return i[e]=t,new A(i,s)}addToStart(e){return new A([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new A(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let i=this.content[t];e(i,n,t),n+=i.nodeSize}}findDiffStart(e,t=0){return wu(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return Cu(this,e,t,n)}findIndex(e,t=-1){if(e==0)return li(0,e);if(e==this.size)return li(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,i=0;;n++){let s=this.child(n),o=i+s.nodeSize;if(o>=e)return o==e||t>0?li(n+1,o):li(n,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return A.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new A(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return A.empty;let t,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new A(t||e,n)}static from(e){if(!e)return A.empty;if(e instanceof A)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new A([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}A.empty=new A([],0);const Us={index:0,offset:0};function li(r,e){return Us.index=r,Us.offset=e,Us}function bi(r,e){if(r===e)return!0;if(!(r&&typeof r=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!bi(r[n],e[n]))return!1}else{for(let n in r)if(!(n in e)||!bi(r[n],e[n]))return!1;for(let n in e)if(!(n in r))return!1}return!0}let me=class po{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),n=!0),t&&t.push(s)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&bi(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return po.none;if(e instanceof po)return[e];let t=e.slice();return t.sort((n,i)=>n.type.rank-i.type.rank),t}};me.none=[];class vi extends Error{}class L{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=Au(this.content,e+this.openStart,t);return n&&new L(n,this.openStart,this.openEnd)}removeBetween(e,t){return new L(Su(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return L.empty;let n=t.openStart||0,i=t.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new L(A.fromJSON(e,t.content),n,i)}static maxOpen(e,t=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new L(e,n,i)}}L.empty=new L(A.empty,0,0);function Su(r,e,t){let{index:n,offset:i}=r.findIndex(e),s=r.maybeChild(n),{index:o,offset:l}=r.findIndex(t);if(i==e||s.isText){if(l!=t&&!r.child(o).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(n!=o)throw new RangeError("Removing non-flat range");return r.replaceChild(n,s.copy(Su(s.content,e-i-1,t-i-1)))}function Au(r,e,t,n){let{index:i,offset:s}=r.findIndex(e),o=r.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,t)?null:r.cut(0,e).append(t).append(r.cut(e));let l=Au(o.content,e-s-1,t);return l&&r.replaceChild(i,o.copy(l))}function fd(r,e,t){if(t.openStart>r.depth)throw new vi("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new vi("Inconsistent open depths");return Tu(r,e,t,0)}function Tu(r,e,t,n){let i=r.index(n),s=r.node(n);if(i==e.index(n)&&n<r.depth-t.openStart){let o=Tu(r,e,t,n+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==n&&e.depth==n){let o=r.parent,l=o.content;return En(o,l.cut(0,r.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=dd(t,r);return En(s,Ou(r,o,l,e,n))}else return En(s,ki(r,e,n))}function Mu(r,e){if(!e.type.compatibleContent(r.type))throw new vi("Cannot join "+e.type.name+" onto "+r.type.name)}function mo(r,e,t){let n=r.node(t);return Mu(n,e.node(t)),n}function kn(r,e){let t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function Or(r,e,t,n){let i=(e||r).node(t),s=0,o=e?e.index(t):i.childCount;r&&(s=r.index(t),r.depth>t?s++:r.textOffset&&(kn(r.nodeAfter,n),s++));for(let l=s;l<o;l++)kn(i.child(l),n);e&&e.depth==t&&e.textOffset&&kn(e.nodeBefore,n)}function En(r,e){return r.type.checkContent(e),r.copy(e)}function Ou(r,e,t,n,i){let s=r.depth>i&&mo(r,e,i+1),o=n.depth>i&&mo(t,n,i+1),l=[];return Or(null,r,i,l),s&&o&&e.index(i)==t.index(i)?(Mu(s,o),kn(En(s,Ou(r,e,t,n,i+1)),l)):(s&&kn(En(s,ki(r,e,i+1)),l),Or(e,t,i,l),o&&kn(En(o,ki(t,n,i+1)),l)),Or(n,null,i,l),new A(l)}function ki(r,e,t){let n=[];if(Or(null,r,t,n),r.depth>t){let i=mo(r,e,t+1);kn(En(i,ki(r,e,t+1)),n)}return Or(e,null,t,n),new A(n)}function dd(r,e){let t=e.depth-r.openStart,i=e.node(t).copy(r.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(A.from(i));return{start:i.resolveNoCache(r.openStart+t),end:i.resolveNoCache(i.content.size-r.openEnd-t)}}class Wr{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(t);return n?e.child(t).cut(n):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return me.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),i=e.maybeChild(t);if(!n){let l=n;n=i,i=l}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Ei(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],i=0,s=t;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(n.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1}return new Wr(t,n,s)}static resolveCached(e,t){for(let i=0;i<Ws.length;i++){let s=Ws[i];if(s.pos==t&&s.doc==e)return s}let n=Ws[Ks]=Wr.resolve(e,t);return Ks=(Ks+1)%hd,n}}let Ws=[],Ks=0,hd=12;class Ei{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const pd=Object.create(null);class St{constructor(e,t,n,i=me.none){this.type=e,this.attrs=t,this.marks=i,this.content=n||A.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,i=0){this.content.nodesBetween(e,t,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,i){return this.content.textBetween(e,t,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&bi(this.attrs,t||e.defaultAttrs||pd)&&me.sameSet(this.marks,n||me.none)}copy(e=null){return e==this.content?this:new St(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new St(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return L.empty;let i=this.resolve(e),s=this.resolve(t),o=n?0:i.sharedDepth(t),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new L(c,i.depth-o,s.depth-o)}replace(e,t,n){return fd(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let i=this.content.child(t-1);return{node:i,index:t-1,offset:n-i.nodeSize}}resolve(e){return Wr.resolveCached(this,e)}resolveNoCache(e){return Wr.resolve(this,e)}rangeHasMark(e,t,n){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),_u(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=A.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),l=o&&o.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=me.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!me.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let i=A.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,n)}}St.prototype.text=void 0;class xi extends St{constructor(e,t,n,i){if(super(e,t,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):_u(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new xi(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new xi(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function _u(r,e){for(let t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}class Tn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new md(e,t);if(n.next==null)return Tn.empty;let i=Nu(n);n.next&&n.err("Unexpected trailing text");let s=Ed(kd(i));return xd(s,n),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let i=this;for(let s=t;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let i=[this];function s(o,l){let a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return A.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:f}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=s(f,l.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!i.type||a.validEnd)&&(n.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&t(n.next[i].next)}return t(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Tn.empty=new Tn(!0);class md{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Nu(r){let e=[];do e.push(gd(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function gd(r){let e=[];do e.push(yd(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function yd(r){let e=vd(r);for(;;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=Dd(r,e);else break;return e}function Ll(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let e=Number(r.next);return r.pos++,e}function Dd(r,e){let t=Ll(r),n=t;return r.eat(",")&&(r.next!="}"?n=Ll(r):n=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}function bd(r,e){let t=r.nodeTypes,n=t[e];if(n)return[n];let i=[];for(let s in t){let o=t[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&r.err("No node type or group '"+e+"' found"),i}function vd(r){if(r.eat("(")){let e=Nu(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{let e=bd(r,r.next).map(t=>(r.inline==null?r.inline=t.isInline:r.inline!=t.isInline&&r.err("Mixing inline and block content"),{type:"name",value:t}));return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function kd(r){let e=[[]];return i(s(r,0),t()),e;function t(){return e.push([])-1}function n(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=t())}else if(o.type=="star"){let a=t();return n(l,a),i(s(o.expr,a),a),[n(a)]}else if(o.type=="plus"){let a=t();return i(s(o.expr,l),a),i(s(o.expr,a),a),[n(a)]}else{if(o.type=="opt")return[n(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let u=t();i(s(o.expr,a),u),a=u}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let u=t();n(a,u),i(s(o.expr,a),u),a=u}return[n(a)]}else{if(o.type=="name")return[n(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Fu(r,e){return e-r}function zl(r,e){let t=[];return n(e),t.sort(Fu);function n(i){let s=r[i];if(s.length==1&&!s[0].term)return n(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&t.indexOf(a)==-1&&n(a)}}}function Ed(r){let e=Object.create(null);return t(zl(r,0));function t(n){let i=[];n.forEach(o=>{r[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);zl(r,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[n.join(",")]=new Tn(n.indexOf(r.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(Fu);s.next.push({type:i[o][0],next:e[l.join(",")]||t(l)})}return s}}function xd(r,e){for(let t=0,n=[r];t<n.length;t++){let i=n[t],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Bu(r){let e=Object.create(null);for(let t in r){let n=r[t];if(!n.hasDefault)return null;e[t]=n.default}return e}function Iu(r,e){let t=Object.create(null);for(let n in r){let i=e&&e[n];if(i===void 0){let s=r[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}t[n]=i}return t}function $u(r){let e=Object.create(null);if(r)for(let t in r)e[t]=new wd(r[t]);return e}let Vl=class Ru{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=$u(n.attrs),this.defaultAttrs=Bu(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Tn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Iu(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new St(this,this.computeAttrs(e),A.from(t),me.setFrom(n))}createChecked(e=null,t,n){return t=A.from(t),this.checkContent(t),new St(this,this.computeAttrs(e),t,me.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=A.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(A.empty,!0);return s?new St(this,e,t.append(s),me.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:me.none:e}static compile(e,t){let n=Object.create(null);e.forEach((s,o)=>n[s]=new Ru(s,t,o));let i=t.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};class wd{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class us{constructor(e,t,n,i){this.name=e,this.rank=t,this.schema=n,this.spec=i,this.attrs=$u(i.attrs),this.excluded=null;let s=Bu(this.attrs);this.instance=s?new me(this,s):null}create(e=null){return!e&&this.instance?this.instance:new me(this,Iu(this.attrs,e))}static compile(e,t){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new us(s,i++,t,o)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class Cd{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Ne.from(e.nodes),t.marks=Ne.from(e.marks||{}),this.nodes=Vl.compile(this.spec.nodes,this),this.marks=us.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;s.contentMatch=n[o]||(n[o]=Tn.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=l=="_"?null:l?Hl(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Hl(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Vl){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,n,i)}text(e,t){let n=this.nodes.text;return new xi(n,n.defaultAttrs,e,me.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return St.fromJSON(this,e)}markFromJSON(e){return me.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Hl(r,e){let t=[];for(let n=0;n<e.length;n++){let i=e[n],s=r.marks[i],o=s;if(s)t.push(s);else for(let l in r.marks){let a=r.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return t}class ir{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(n=>{n.tag?this.tags.push(n):n.style&&this.styles.push(n)}),this.normalizeLists=!this.tags.some(n=>{if(!/^(ul|ol)\b/.test(n.tag)||!n.node)return!1;let i=e.nodes[n.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let n=new Ul(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new Ul(this,t,!0);return n.addAll(e,t.from,t.to),L.maxOpen(n.finish())}matchTag(e,t,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Td(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(o.getAttrs){let a=o.getAttrs(t);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let t=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let l=t[o];if((l.priority==null?50:l.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=Wl(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=Wl(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ir(e,ir.schemaRules(e)))}}const Pu={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Sd={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Lu={ol:!0,ul:!0},wi=1,Ci=2,_r=4;function jl(r,e,t){return e!=null?(e?wi:0)|(e==="full"?Ci:0):r&&r.whitespace=="pre"?wi|Ci:t&~_r}class ai{constructor(e,t,n,i,s,o,l){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=i,this.solid=s,this.options=l,this.content=[],this.activeMarks=me.none,this.stashMarks=[],this.match=o||(l&_r?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(A.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&wi)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=A.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(A.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let i=n[t];(this.type?this.type.allowsMarkType(i.type):Od(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Pu.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ul{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let i=t.topNode,s,o=jl(null,t.preserveWhitespace,0)|(n?_r:0);i?s=new ai(i.type,i.attrs,me.none,me.none,!0,t.topMatch||i.type.contentMatch,o):n?s=new ai(null,null,me.none,me.none,!0,null,o):s=new ai(e.schema.topNodeType,null,me.none,me.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let t=e.getAttribute("style");if(!t)this.addElement(e);else{let n=this.readStyles(Md(t));if(!n)return;let[i,s]=n,o=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],o);for(let l=0;l<i.length;l++)this.addPendingMark(i[l]);this.addElement(e);for(let l=0;l<i.length;l++)this.removePendingMark(i[l],o);for(let l=0;l<s.length;l++)this.addPendingMark(s[l])}}}addTextNode(e){let t=e.nodeValue,n=this.top;if(n.options&Ci||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&wi)n.options&Ci?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=n.content[n.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n=e.nodeName.toLowerCase(),i;Lu.hasOwnProperty(n)&&this.parser.normalizeLists&&Ad(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:Sd.hasOwnProperty(n))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,l=this.top,a=this.needsBlock;if(Pu.hasOwnProperty(n))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),o=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),o&&this.sync(l),this.needsBlock=a}else this.addElementByRule(e,s,s.consuming===!1?i:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=me.none,n=me.none;e:for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)continue e;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.forEach(l=>{o.clearMark(l)&&(n=l.addToSet(n))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,n]}addElementByRule(e,t,n){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a));else{let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a)}i&&this.sync(l)&&this.open--,o&&this.removePendingMark(o,l)}addAll(e,t,n){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=n==null?null:e.childNodes[n];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,n;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(n);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(n=e.marks[i].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,n),i}enterInner(e,t=null,n=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=jl(e,i,s.options);s.options&_r&&s.content.length==0&&(o|=_r),this.nodes.push(new ai(e,t,s.activeMarks,s.pendingMarks,n,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=t[l];if(c==""){if(l==t.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:n&&a>=s?n.node(a-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;a--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let n=this.parser.schema.nodes[t];if(n.isTextblock&&n.defaultAttrs)return n}}addPendingMark(e){let t=_d(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let i=this.nodes[n];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}}function Ad(r){for(let e=r.firstChild,t=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&Lu.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):n=="li"?t=e:n&&(t=null)}}function Td(r,e){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,e)}function Md(r){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,n=[];for(;t=e.exec(r);)n.push(t[1],t[2].trim());return n}function Wl(r){let e={};for(let t in r)e[t]=r[t];return e}function Od(r,e){let t=e.schema.nodes;for(let n in t){let i=t[n];if(!i.allowsMarkType(r))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function _d(r,e){for(let t=0;t<e.length;t++)if(r.eq(e[t]))return e[t]}class wt{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Js(t).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],u=this.serializeMark(c,o.isInline,t);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:i}=wt.renderSpec(Js(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,t,n={}){let i=this.marks[e.type.name];return i&&wt.renderSpec(Js(n),i(e,t))}static renderSpec(e,t,n=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let o,l=n?e.createElementNS(n,i):e.createElement(i),a=t[1],c=1;if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){c=2;for(let u in a)if(a[u]!=null){let f=u.indexOf(" ");f>0?l.setAttributeNS(u.slice(0,f),u.slice(f+1),a[u]):l.setAttribute(u,a[u])}}for(let u=c;u<t.length;u++){let f=t[u];if(f===0){if(u<t.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:d,contentDOM:h}=wt.renderSpec(e,f,n);if(l.appendChild(d),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:l,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new wt(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Kl(e.nodes);return t.text||(t.text=n=>n.text),t}static marksFromSchema(e){return Kl(e.marks)}}function Kl(r){let e={};for(let t in r){let n=r[t].spec.toDOM;n&&(e[t]=n)}return e}function Js(r){return r.document||window.document}const zu=65535,Vu=Math.pow(2,16);function Nd(r,e){return r+e*Vu}function Jl(r){return r&zu}function Fd(r){return(r-(r&zu))/Vu}const Hu=1,ju=2,mi=4,Uu=8;class go{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&Uu)>0}get deletedBefore(){return(this.delInfo&(Hu|mi))>0}get deletedAfter(){return(this.delInfo&(ju|mi))>0}get deletedAcross(){return(this.delInfo&mi)>0}}class ot{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ot.empty)return ot.empty}recover(e){let t=0,n=Jl(e);if(!this.inverted)for(let i=0;i<n;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+t+Fd(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],u=this.ranges[l+o],f=a+c;if(e<=f){let d=c?e==a?-1:e==f?1:t:t,h=a+i+(d<0?0:u);if(n)return h;let p=e==(t<0?a:f)?null:Nd(l/3,e-a),m=e==a?ju:e==f?Hu:mi;return(t<0?e!=a:e!=f)&&(m|=Uu),new go(h,m,p)}i+=u-c}return n?e+i:new go(e+i,0,null)}touches(e,t){let n=0,i=Jl(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?n:0);if(a>e)break;let c=this.ranges[l+s],u=a+c;if(e<=u&&l==i*3)return!0;n+=this.ranges[l+o]-c}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+t],u=this.ranges[i+n];e(l,l+c,a,a+u),s+=u-c}}invert(){return new ot(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ot.empty:new ot(e<0?[0,-e,0]:[0,0,e])}}ot.empty=new ot([]);class Nr{constructor(e=[],t,n=0,i=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=i}slice(e=0,t=this.maps.length){return new Nr(this.maps,this.mirror,e,t)}copy(){return new Nr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?n+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?n-i-1:void 0)}}invert(){let e=new Nr;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],l=o.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return n?e:new go(e,i,null)}}const qs=Object.create(null);class Ge{getMap(){return ot.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=qs[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in qs)throw new RangeError("Duplicate use of step JSON ID "+e);return qs[e]=t,t.prototype.jsonID=e,t}}class xe{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new xe(e,null)}static fail(e){return new xe(null,e)}static fromReplace(e,t,n,i){try{return xe.ok(e.replace(t,n,i))}catch(s){if(s instanceof vi)return xe.fail(s.message);throw s}}}function Ro(r,e,t){let n=[];for(let i=0;i<r.childCount;i++){let s=r.child(i);s.content.size&&(s=s.copy(Ro(s.content,e,s))),s.isInline&&(s=e(s,t,i)),n.push(s)}return A.fromArray(n)}class Gt extends Ge{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new L(Ro(t.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return xe.fromReplace(e,this.from,this.to,s)}invert(){return new Ct(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Gt(t.pos,n.pos,this.mark)}merge(e){return e instanceof Gt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Gt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Gt(t.from,t.to,e.markFromJSON(t.mark))}}Ge.jsonID("addMark",Gt);class Ct extends Ge{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new L(Ro(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return xe.fromReplace(e,this.from,this.to,n)}invert(){return new Gt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Ct(t.pos,n.pos,this.mark)}merge(e){return e instanceof Ct&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ct(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ct(t.from,t.to,e.markFromJSON(t.mark))}}Ge.jsonID("removeMark",Ct);class Yt extends Ge{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return xe.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return xe.fromReplace(e,this.pos,this.pos+1,new L(A.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(n))return new Yt(this.pos,t.marks[i]);return new Yt(this.pos,this.mark)}}return new sr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Yt(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Yt(t.pos,e.markFromJSON(t.mark))}}Ge.jsonID("addNodeMark",Yt);class sr extends Ge{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return xe.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return xe.fromReplace(e,this.pos,this.pos+1,new L(A.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Yt(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new sr(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new sr(t.pos,e.markFromJSON(t.mark))}}Ge.jsonID("removeNodeMark",sr);class Pe extends Ge{constructor(e,t,n,i=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=i}apply(e){return this.structure&&yo(e,this.from,this.to)?xe.fail("Structure replace would overwrite content"):xe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ot([this.from,this.to-this.from,this.slice.size])}invert(e){return new Pe(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new Pe(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof Pe)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?L.empty:new L(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Pe(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?L.empty:new L(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Pe(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Pe(t.from,t.to,L.fromJSON(e,t.slice),!!t.structure)}}Ge.jsonID("replace",Pe);class Ae extends Ge{constructor(e,t,n,i,s,o,l=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(yo(e,this.from,this.gapFrom)||yo(e,this.gapTo,this.to)))return xe.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return xe.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?xe.fromReplace(e,this.from,this.to,n):xe.fail("Content does not fit in gap")}getMap(){return new ot([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Ae(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||i<t.pos||s>n.pos?null:new Ae(t.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ae(t.from,t.to,t.gapFrom,t.gapTo,L.fromJSON(e,t.slice),t.insert,!!t.structure)}}Ge.jsonID("replaceAround",Ae);function yo(r,e,t){let n=r.resolve(e),i=t-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Bd(r,e,t,n){let i=[],s=[],o,l;r.doc.nodesBetween(e,t,(a,c,u)=>{if(!a.isInline)return;let f=a.marks;if(!n.isInSet(f)&&u.type.allowsMarkType(n.type)){let d=Math.max(c,e),h=Math.min(c+a.nodeSize,t),p=n.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(f[m])?o.to=h:i.push(o=new Ct(d,h,f[m])));l&&l.to==d?l.to=h:s.push(l=new Gt(d,h,n))}}),i.forEach(a=>r.step(a)),s.forEach(a=>r.step(a))}function Id(r,e,t,n){let i=[],s=0;r.doc.nodesBetween(e,t,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(n instanceof us){let c=o.marks,u;for(;u=n.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else n?n.isInSet(o.marks)&&(a=[n]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,t);for(let u=0;u<a.length;u++){let f=a[u],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:f,from:Math.max(l,e),to:c,step:s})}}}),i.forEach(o=>r.step(new Ct(o.from,o.to,o.style)))}function $d(r,e,t,n=t.contentMatch){let i=r.doc.nodeAt(e),s=[],o=e+1;for(let l=0;l<i.childCount;l++){let a=i.child(l),c=o+a.nodeSize,u=n.matchType(a.type);if(!u)s.push(new Pe(o,c,L.empty));else{n=u;for(let f=0;f<a.marks.length;f++)t.allowsMarkType(a.marks[f].type)||r.step(new Ct(o,c,a.marks[f]))}o=c}if(!n.validEnd){let l=n.fillBefore(A.empty,!0);r.replace(o,o,new L(l,0,0))}for(let l=s.length-1;l>=0;l--)r.step(s[l])}function Rd(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function mr(r){let t=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let n=r.depth;;--n){let i=r.$from.node(n),s=r.$from.index(n),o=r.$to.indexAfter(n);if(n<r.depth&&i.canReplace(s,o,t))return n;if(n==0||i.type.spec.isolating||!Rd(i,s,o))break}return null}function Pd(r,e,t){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),l=i.after(s+1),a=o,c=l,u=A.empty,f=0;for(let p=s,m=!1;p>t;p--)m||n.index(p)>0?(m=!0,u=A.from(n.node(p).copy(u)),f++):a--;let d=A.empty,h=0;for(let p=s,m=!1;p>t;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=A.from(i.node(p).copy(d)),h++):c++;r.step(new Ae(a,c,o,l,new L(u.append(d),f,h),u.size-f,!0))}function Po(r,e,t=null,n=r){let i=Ld(r,e),s=i&&zd(n,e);return s?i.map(ql).concat({type:e,attrs:t}).concat(s.map(ql)):null}function ql(r){return{type:r,attrs:null}}function Ld(r,e){let{parent:t,startIndex:n,endIndex:i}=r,s=t.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(n,i,o)?s:null}function zd(r,e){let{parent:t,startIndex:n,endIndex:i}=r,s=t.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;a&&c<i;c++)a=a.matchType(t.child(c).type);return!a||!a.validEnd?null:o}function Vd(r,e,t){let n=A.empty;for(let o=t.length-1;o>=0;o--){if(n.size){let l=t[o].type.contentMatch.matchFragment(n);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=A.from(t[o].type.create(t[o].attrs,n))}let i=e.start,s=e.end;r.step(new Ae(i,s,i,s,new L(n,0,0),t.length,!0))}function Hd(r,e,t,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=r.steps.length;r.doc.nodesBetween(e,t,(o,l)=>{if(o.isTextblock&&!o.hasMarkup(n,i)&&jd(r.doc,r.mapping.slice(s).map(l),n)){r.clearIncompatible(r.mapping.slice(s).map(l,1),n);let a=r.mapping.slice(s),c=a.map(l,1),u=a.map(l+o.nodeSize,1);return r.step(new Ae(c,u,c+1,u-1,new L(A.from(n.create(i,null,o.marks)),0,0),1,!0)),!1}})}function jd(r,e,t){let n=r.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,t)}function Ud(r,e,t,n,i){let s=r.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(n,null,i||s.marks);if(s.isLeaf)return r.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);r.step(new Ae(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new L(A.from(o),0,0),1,!0))}function Zn(r,e,t=1,n){let i=r.resolve(e),s=i.depth-t,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=t-2;c>s;c--,u--){let f=i.node(c),d=i.index(c);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=n&&n[u]||f;if(p!=f&&(h=h.replaceChild(0,p.type.create(p.attrs))),!f.canReplace(d+1,f.childCount)||!p.type.validContent(h))return!1}let l=i.indexAfter(s),a=n&&n[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function Wd(r,e,t=1,n){let i=r.doc.resolve(e),s=A.empty,o=A.empty;for(let l=i.depth,a=i.depth-t,c=t-1;l>a;l--,c--){s=A.from(i.node(l).copy(s));let u=n&&n[c];o=A.from(u?u.type.create(u.attrs,o):i.node(l).copy(o))}r.step(new Pe(e,e,new L(s.append(o),t,t),!0))}function an(r,e){let t=r.resolve(e),n=t.index();return Wu(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}function Wu(r,e){return!!(r&&e&&!r.isLeaf&&r.canAppend(e))}function Ku(r,e,t=-1){let n=r.resolve(e);for(let i=n.depth;;i--){let s,o,l=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):t>0?(s=n.node(i+1),l++,o=n.node(i).maybeChild(l)):(s=n.node(i).maybeChild(l-1),o=n.node(i+1)),s&&!s.isTextblock&&Wu(s,o)&&n.node(i).canReplace(l,l+1))return e;if(i==0)break;e=t<0?n.before(i):n.after(i)}}function Kd(r,e,t){let n=new Pe(e-t,e+t,L.empty,!0);r.step(n)}function Jd(r,e,t){let n=r.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),t))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,t))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,t))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function qd(r,e,t){let n=r.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=n.depth;o>=0;o--){let l=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,a=n.index(o)+(l>0?1:0),c=n.node(o),u=!1;if(s==1)u=c.canReplace(a,a,i);else{let f=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=f&&c.canReplaceWith(a,a,f[0])}if(u)return l==0?n.pos:l<0?n.before(o+1):n.after(o+1)}return null}function Lo(r,e,t=e,n=L.empty){if(e==t&&!n.size)return null;let i=r.resolve(e),s=r.resolve(t);return Ju(i,s,n)?new Pe(e,t,n):new Gd(i,s,n).fit()}function Ju(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}class Gd{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=A.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=A.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new L(s,o,l);return e>-1?new Ae(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new Pe(n.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}t=s.content}for(let t=1;t<=2;t++)for(let n=t==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=Gs(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,f=null;if(t==1&&(o?c.matchType(o.type)||(f=c.fillBefore(A.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:l,parent:s,inject:f};if(t==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:l,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,i=Gs(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new L(e,t+1,Math.max(n,i.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,i=Gs(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new L(Sr(e,t-1,1),t-1,s?t-1:n)}else this.unplaced=new L(Sr(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,l=n?n.content:o.content,a=o.openStart-e,c=0,u=[],{match:f,type:d}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));f=f.matchFragment(i)}let h=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let m=l.child(c),y=f.matchType(m.type);if(!y)break;c++,(c>1||a==0||m.content.size)&&(f=y,u.push(qu(m.mark(d.allowedMarks(m.marks)),c==1?a:0,c==l.childCount?h:-1)))}let p=c==l.childCount;p||(h=-1),this.placed=Ar(this.placed,t,A.from(u)),this.frontier[t].match=f,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,y=l;m<h;m++){let g=y.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),y=g.content}this.unplaced=p?e==0?L.empty:new L(Sr(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new L(Sr(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ys(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Ys(e,t,i,n,s);if(o){for(let l=t-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=Ys(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ar(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ar(this.placed,this.depth,A.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(A.empty,!0);t.childCount&&(this.placed=Ar(this.placed,this.frontier.length,t))}}function Sr(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy(Sr(r.firstChild.content,e-1,t)))}function Ar(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(Ar(r.lastChild.content,e-1,t)))}function Gs(r,e){for(let t=0;t<e;t++)r=r.firstChild.content;return r}function qu(r,e,t){if(e<=0)return r;let n=r.content;return e>1&&(n=n.replaceChild(0,qu(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=r.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(r.type.contentMatch.matchFragment(n).fillBefore(A.empty,!0)))),r.copy(n)}function Ys(r,e,t,n,i){let s=r.node(e),o=i?r.indexAfter(e):r.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let l=n.fillBefore(s.content,!0,o);return l&&!Yd(t,s.content,o)?l:null}function Yd(r,e,t){for(let n=t;n<e.childCount;n++)if(!r.allowsMarks(e.child(n).marks))return!0;return!1}function Xd(r){return r.spec.defining||r.spec.definingForContent}function Qd(r,e,t,n){if(!n.size)return r.deleteRange(e,t);let i=r.doc.resolve(e),s=r.doc.resolve(t);if(Ju(i,s,n))return r.step(new Pe(e,t,n));let o=Yu(i,r.doc.resolve(t));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?l=d:i.before(d)==h&&o.splice(1,0,-d)}let a=o.indexOf(l),c=[],u=n.openStart;for(let d=n.content,h=0;;h++){let p=d.firstChild;if(c.push(p),h==n.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let h=c[d].type,p=Xd(h);if(p&&i.node(a).type!=h)u=d;else if(p||!h.isTextblock)break}for(let d=n.openStart;d>=0;d--){let h=(d+u+1)%(n.openStart+1),p=c[h];if(p)for(let m=0;m<o.length;m++){let y=o[(m+a)%o.length],g=!0;y<0&&(g=!1,y=-y);let b=i.node(y-1),v=i.index(y-1);if(b.canReplaceWith(v,v,p.type,p.marks))return r.replace(i.before(y),g?s.after(y):t,new L(Gu(n.content,0,n.openStart,h),h,n.openEnd))}}let f=r.steps.length;for(let d=o.length-1;d>=0&&(r.replace(e,t,n),!(r.steps.length>f));d--){let h=o[d];h<0||(e=i.before(h),t=s.after(h))}}function Gu(r,e,t,n,i){if(e<t){let s=r.firstChild;r=r.replaceChild(0,s.copy(Gu(s.content,e+1,t,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(r).append(r);r=o.append(s.matchFragment(o).fillBefore(A.empty,!0))}return r}function Zd(r,e,t,n){if(!n.isInline&&e==t&&r.doc.resolve(e).parent.content.size){let i=Jd(r.doc,e,n.type);i!=null&&(e=t=i)}r.replaceRange(e,t,new L(A.from(n),0,0))}function eh(r,e,t){let n=r.doc.resolve(e),i=r.doc.resolve(t),s=Yu(n,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||n.node(l).type.contentMatch.validEnd)return r.delete(n.start(l),i.end(l));if(l>0&&(a||n.node(l-1).canReplace(n.index(l-1),i.indexAfter(l-1))))return r.delete(n.before(l),i.after(l))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&t>n.end(o)&&i.end(o)-t!=i.depth-o)return r.delete(n.before(o),t);r.delete(e,t)}function Yu(r,e){let t=[],n=Math.min(r.depth,e.depth);for(let i=n;i>=0;i--){let s=r.start(i);if(s<r.pos-(r.depth-i)||e.end(i)>e.pos+(e.depth-i)||r.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==r.depth&&i==e.depth&&r.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class er extends Ge{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return xe.fail("No node at attribute step's position");let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let i=t.type.create(n,null,t.marks);return xe.fromReplace(e,this.pos,this.pos+1,new L(A.from(i),0,t.isLeaf?0:1))}getMap(){return ot.empty}invert(e){return new er(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new er(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new er(t.pos,t.attr,t.value)}}Ge.jsonID("attr",er);let or=class extends Error{};or=function r(e){let t=Error.call(this,e);return t.__proto__=r.prototype,t};or.prototype=Object.create(Error.prototype);or.prototype.constructor=or;or.prototype.name="TransformError";class Xu{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Nr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new or(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=L.empty){let i=Lo(this.doc,e,t,n);return i&&this.step(i),this}replaceWith(e,t,n){return this.replace(e,t,new L(A.from(n),0,0))}delete(e,t){return this.replace(e,t,L.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return Qd(this,e,t,n),this}replaceRangeWith(e,t,n){return Zd(this,e,t,n),this}deleteRange(e,t){return eh(this,e,t),this}lift(e,t){return Pd(this,e,t),this}join(e,t=1){return Kd(this,e,t),this}wrap(e,t){return Vd(this,e,t),this}setBlockType(e,t=e,n,i=null){return Hd(this,e,t,n,i),this}setNodeMarkup(e,t,n=null,i){return Ud(this,e,t,n,i),this}setNodeAttribute(e,t,n){return this.step(new er(e,t,n)),this}addNodeMark(e,t){return this.step(new Yt(e,t)),this}removeNodeMark(e,t){if(!(t instanceof me)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t=t.isInSet(n.marks),!t)return this}return this.step(new sr(e,t)),this}split(e,t=1,n){return Wd(this,e,t,n),this}addMark(e,t,n){return Bd(this,e,t,n),this}removeMark(e,t,n){return Id(this,e,t,n),this}clearIncompatible(e,t,n){return $d(this,e,t,n),this}}const Xs=Object.create(null);class ae{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new th(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=L.empty){let n=t.content.lastChild,i=null;for(let l=0;l<t.openEnd;l++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],u=e.mapping.slice(s);e.replaceRange(u.map(a.pos),u.map(c.pos),l?L.empty:t),l==0&&Xl(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(n),c=a.map(o.pos),u=a.map(l.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),Xl(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let i=e.parent.inlineContent?new ue(e):Un(e.node(0),e.parent,e.pos,e.index(),t,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?Un(e.node(0),e.node(s),e.before(s+1),e.index(s),t,n):Un(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,n);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new pt(e.node(0))}static atStart(e){return Un(e,e,0,0,1)||new pt(e)}static atEnd(e){return Un(e,e,e.content.size,e.childCount,-1)||new pt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Xs[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Xs)throw new RangeError("Duplicate use of selection JSON ID "+e);return Xs[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ue.between(this.$anchor,this.$head).getBookmark()}}ae.prototype.visible=!0;class th{constructor(e,t){this.$from=e,this.$to=t}}let Gl=!1;function Yl(r){!Gl&&!r.parent.inlineContent&&(Gl=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class ue extends ae{constructor(e,t=e){Yl(e),Yl(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return ae.near(n);let i=e.resolve(t.map(this.anchor));return new ue(i.parent.inlineContent?i:n,n)}replace(e,t=L.empty){if(super.replace(e,t),t==L.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof ue&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new cs(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ue(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let i=e.resolve(t);return new this(i,n==t?i:e.resolve(n))}static between(e,t,n){let i=e.pos-t.pos;if((!n||i)&&(n=i>=0?1:-1),!t.parent.inlineContent){let s=ae.findFrom(t,n,!0)||ae.findFrom(t,-n,!0);if(s)t=s.$head;else return ae.near(t,n)}return e.parent.inlineContent||(i==0?e=t:(e=(ae.findFrom(e,-n,!0)||ae.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new ue(e,t)}}ae.jsonID("text",ue);class cs{constructor(e,t){this.anchor=e,this.head=t}map(e){return new cs(e.map(this.anchor),e.map(this.head))}resolve(e){return ue.between(e.resolve(this.anchor),e.resolve(this.head))}}class X extends ae{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return n?ae.near(s):new X(s)}content(){return new L(A.from(this.node),0,0)}eq(e){return e instanceof X&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new zo(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new X(e.resolve(t.anchor))}static create(e,t){return new X(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}X.prototype.visible=!1;ae.jsonID("node",X);class zo{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new cs(n,n):new zo(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&X.isSelectable(n)?new X(t):ae.near(t)}}class pt extends ae{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=L.empty){if(t==L.empty){e.delete(0,e.doc.content.size);let n=ae.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new pt(e)}map(e){return new pt(e)}eq(e){return e instanceof pt}getBookmark(){return nh}}ae.jsonID("all",pt);const nh={map(){return this},resolve(r){return new pt(r)}};function Un(r,e,t,n,i,s=!1){if(e.inlineContent)return ue.create(r,t);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&X.isSelectable(l))return X.create(r,t-(i<0?l.nodeSize:0))}else{let a=Un(r,l,t+i,i<0?l.childCount:0,i,s);if(a)return a}t+=l.nodeSize*i}return null}function Xl(r,e,t){let n=r.steps.length-1;if(n<e)return;let i=r.steps[n];if(!(i instanceof Pe||i instanceof Ae))return;let s=r.mapping.maps[n],o;s.forEach((l,a,c,u)=>{o==null&&(o=u)}),r.setSelection(ae.near(r.doc.resolve(o),t))}const Ql=1,ui=2,Zl=4;class rh extends Xu{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ql)&~ui,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ql)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ui,this}ensureMarks(e){return me.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ui)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~ui,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||me.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=t),n=n??t,!e)return this.deleteRange(t,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,i.text(e,s)),this.selection.empty||this.setSelection(ae.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Zl,this}get scrolledIntoView(){return(this.updated&Zl)>0}}function ea(r,e){return!e||!r?r:r.bind(e)}class Tr{constructor(e,t,n){this.name=e,this.init=ea(t.init,n),this.apply=ea(t.apply,n)}}const ih=[new Tr("doc",{init(r){return r.doc||r.schema.topNodeType.createAndFill()},apply(r){return r.doc}}),new Tr("selection",{init(r,e){return r.selection||ae.atStart(e.doc)},apply(r){return r.selection}}),new Tr("storedMarks",{init(r){return r.storedMarks||null},apply(r,e,t,n){return n.selection.$cursor?r.storedMarks:null}}),new Tr("scrollToSelection",{init(){return 0},apply(r,e){return r.scrolledIntoView?e+1:e}})];class Qs{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=ih.slice(),t&&t.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Tr(n.key,n.spec.state,n))})}}class Kn{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,u=a<t.length&&l.spec.appendTransaction.call(l,a?t.slice(a):t,c,n);if(u&&n.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<o?{state:n,n:t.length}:{state:this,n:0})}t.push(u),n=n.applyInner(u),s=!0}i&&(i[o]={state:n,n:t.length})}}if(!s)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Kn(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new rh(this)}static create(e){let t=new Qs(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Kn(t);for(let i=0;i<t.fields.length;i++)n[t.fields[i].name]=t.fields[i].init(e,n);return n}reconfigure(e){let t=new Qs(this.schema,e.plugins),n=t.fields,i=new Kn(t);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(t[n]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Qs(e.schema,e.plugins),s=new Kn(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=St.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=ae.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let l in n){let a=n[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){s[o.name]=c.fromJSON.call(a,e,t[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function Qu(r,e,t){for(let n in r){let i=r[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=Qu(i,e,{})),t[n]=i}return t}class Dt{constructor(e){this.spec=e,this.props={},e.props&&Qu(e.props,this,this.props),this.key=e.key?e.key.key:Zu("plugin")}getState(e){return e[this.key]}}const Zs=Object.create(null);function Zu(r){return r in Zs?r+"$"+ ++Zs[r]:(Zs[r]=0,r+"$")}class un{constructor(e="key"){this.key=Zu(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Xe=function(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e},Kr=function(r){let e=r.assignedSlot||r.parentNode;return e&&e.nodeType==11?e.host:e};let ta=null;const Ot=function(r,e,t){let n=ta||(ta=document.createRange());return n.setEnd(r,t??r.nodeValue.length),n.setStart(r,e||0),n},Mn=function(r,e,t,n){return t&&(na(r,e,t,n,-1)||na(r,e,t,n,1))},sh=/^(img|br|input|textarea|hr)$/i;function na(r,e,t,n,i){for(;;){if(r==t&&e==n)return!0;if(e==(i<0?0:xt(r))){let s=r.parentNode;if(!s||s.nodeType!=1||lh(r)||sh.test(r.nodeName)||r.contentEditable=="false")return!1;e=Xe(r)+(i<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(i<0?-1:0)],r.contentEditable=="false")return!1;e=i<0?xt(r):0}else return!1}}function xt(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function oh(r,e,t){for(let n=e==0,i=e==xt(r);n||i;){if(r==t)return!0;let s=Xe(r);if(r=r.parentNode,!r)return!1;n=n&&s==0,i=i&&s==xt(r)}}function lh(r){let e;for(let t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}const fs=function(r){return r.focusNode&&Mn(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function gn(r,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=r,t.key=t.code=e,t}function ah(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}const rn=typeof navigator<"u"?navigator:null,ra=typeof document<"u"?document:null,cn=rn&&rn.userAgent||"",Do=/Edge\/(\d+)/.exec(cn),ec=/MSIE \d/.exec(cn),bo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(cn),qe=!!(ec||bo||Do),Qt=ec?document.documentMode:bo?+bo[1]:Do?+Do[1]:0,yt=!qe&&/gecko\/(\d+)/i.test(cn);yt&&+(/Firefox\/(\d+)/.exec(cn)||[0,0])[1];const vo=!qe&&/Chrome\/(\d+)/.exec(cn),ze=!!vo,uh=vo?+vo[1]:0,Ve=!qe&&!!rn&&/Apple Computer/.test(rn.vendor),lr=Ve&&(/Mobile\/\w+/.test(cn)||!!rn&&rn.maxTouchPoints>2),st=lr||(rn?/Mac/.test(rn.platform):!1),dt=/Android \d/.test(cn),ds=!!ra&&"webkitFontSmoothing"in ra.documentElement.style,ch=ds?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function fh(r){return{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function jt(r,e){return typeof r=="number"?r:r[e]}function dh(r){let e=r.getBoundingClientRect(),t=e.width/r.offsetWidth||1,n=e.height/r.offsetHeight||1;return{left:e.left,right:e.left+r.clientWidth*t,top:e.top,bottom:e.top+r.clientHeight*n}}function ia(r,e,t){let n=r.someProp("scrollThreshold")||0,i=r.someProp("scrollMargin")||5,s=r.dom.ownerDocument;for(let o=t||r.dom;o;o=Kr(o)){if(o.nodeType!=1)continue;let l=o,a=l==s.body,c=a?fh(s):dh(l),u=0,f=0;if(e.top<c.top+jt(n,"top")?f=-(c.top-e.top+jt(i,"top")):e.bottom>c.bottom-jt(n,"bottom")&&(f=e.bottom-c.bottom+jt(i,"bottom")),e.left<c.left+jt(n,"left")?u=-(c.left-e.left+jt(i,"left")):e.right>c.right-jt(n,"right")&&(u=e.right-c.right+jt(i,"right")),u||f)if(a)s.defaultView.scrollBy(u,f);else{let d=l.scrollLeft,h=l.scrollTop;f&&(l.scrollTop+=f),u&&(l.scrollLeft+=u);let p=l.scrollLeft-d,m=l.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(a)break}}function hh(r){let e=r.dom.getBoundingClientRect(),t=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=r.root.elementFromPoint(s,o);if(!l||l==r.dom||!r.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=t-20){n=l,i=a.top;break}}return{refDOM:n,refTop:i,stack:tc(r.dom)}}function tc(r){let e=[],t=r.ownerDocument;for(let n=r;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),r!=t);n=Kr(n));return e}function ph({refDOM:r,refTop:e,stack:t}){let n=r?r.getBoundingClientRect().top:0;nc(t,n==0?0:n-e)}function nc(r,e){for(let t=0;t<r.length;t++){let{dom:n,top:i,left:s}=r[t];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let jn=null;function mh(r){if(r.setActive)return r.setActive();if(jn)return r.focus(jn);let e=tc(r);r.focus(jn==null?{get preventScroll(){return jn={preventScroll:!0},!0}}:void 0),jn||(jn=!1,nc(e,0))}function rc(r,e){let t,n=2e8,i,s=0,o=e.top,l=e.top;for(let a=r.firstChild,c=0;a;a=a.nextSibling,c++){let u;if(a.nodeType==1)u=a.getClientRects();else if(a.nodeType==3)u=Ot(a).getClientRects();else continue;for(let f=0;f<u.length;f++){let d=u[f];if(d.top<=o&&d.bottom>=l){o=Math.max(d.bottom,o),l=Math.min(d.top,l);let h=d.left>e.left?d.left-e.left:d.right<e.left?e.left-d.right:0;if(h<n){t=a,n=h,i=h&&t.nodeType==3?{left:d.right<e.left?d.right:d.left,top:e.top}:e,a.nodeType==1&&h&&(s=c+(e.left>=(d.left+d.right)/2?1:0));continue}}!t&&(e.left>=d.right&&e.top>=d.top||e.left>=d.left&&e.top>=d.bottom)&&(s=c+1)}}return t&&t.nodeType==3?gh(t,i):!t||n&&t.nodeType==1?{node:r,offset:s}:rc(t,i)}function gh(r,e){let t=r.nodeValue.length,n=document.createRange();for(let i=0;i<t;i++){n.setEnd(r,i+1),n.setStart(r,i);let s=Ut(n,1);if(s.top!=s.bottom&&Vo(e,s))return{node:r,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:r,offset:0}}function Vo(r,e){return r.left>=e.left-1&&r.left<=e.right+1&&r.top>=e.top-1&&r.top<=e.bottom+1}function yh(r,e){let t=r.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<r.getBoundingClientRect().left?t:r}function Dh(r,e,t){let{node:n,offset:i}=rc(e,t),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return r.docView.posFromDOM(n,i,s)}function bh(r,e,t,n){let i=-1;for(let s=e;s!=r.dom;){let o=r.docView.nearestDesc(s,!0);if(!o)return null;if(o.node.isBlock&&o.parent){let l=o.dom.getBoundingClientRect();if(l.left>n.left||l.top>n.top)i=o.posBefore;else if(l.right<n.left||l.bottom<n.top)i=o.posAfter;else break}s=o.dom.parentNode}return i>-1?i:r.docView.posFromDOM(e,t,1)}function ic(r,e,t){let n=r.childNodes.length;if(n&&t.top<t.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=r.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(Vo(e,c))return ic(o,e,c)}}if((s=(s+1)%n)==i)break}return r}function vh(r,e){let t=r.dom.ownerDocument,n,i=0;if(t.caretPositionFromPoint)try{let a=t.caretPositionFromPoint(e.left,e.top);a&&({offsetNode:n,offset:i}=a)}catch{}if(!n&&t.caretRangeFromPoint){let a=t.caretRangeFromPoint(e.left,e.top);a&&({startContainer:n,startOffset:i}=a)}let s=(r.root.elementFromPoint?r.root:t).elementFromPoint(e.left,e.top),o;if(!s||!r.dom.contains(s.nodeType!=1?s.parentNode:s)){let a=r.dom.getBoundingClientRect();if(!Vo(e,a)||(s=ic(r.dom,e,a),!s))return null}if(Ve)for(let a=s;n&&a;a=Kr(a))a.draggable&&(n=void 0);if(s=yh(s,e),n){if(yt&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let a=n.childNodes[i],c;a.nodeName=="IMG"&&(c=a.getBoundingClientRect()).right<=e.left&&c.bottom>e.top&&i++}n==r.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?o=r.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(o=bh(r,n,i,e))}o==null&&(o=Dh(r,s,e));let l=r.docView.nearestDesc(s,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function Ut(r,e){let t=r.getClientRects();return t.length?t[e<0?0:t.length-1]:r.getBoundingClientRect()}const kh=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function sc(r,e,t){let{node:n,offset:i,atom:s}=r.docView.domFromPos(e,t<0?-1:1),o=ds||yt;if(n.nodeType==3)if(o&&(kh.test(n.nodeValue)||(t<0?!i:i==n.nodeValue.length))){let a=Ut(Ot(n,i,i),t);if(yt&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=Ut(Ot(n,i-1,i-1),-1);if(c.top==a.top){let u=Ut(Ot(n,i,i+1),-1);if(u.top!=a.top)return vr(u,u.left<c.left)}}return a}else{let a=i,c=i,u=t<0?1:-1;return t<0&&!i?(c++,u=-1):t>=0&&i==n.nodeValue.length?(a--,u=1):t<0?a--:c++,vr(Ut(Ot(n,a,c),1),u<0)}if(!r.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==xt(n))){let a=n.childNodes[i-1];if(a.nodeType==1)return eo(a.getBoundingClientRect(),!1)}if(s==null&&i<xt(n)){let a=n.childNodes[i];if(a.nodeType==1)return eo(a.getBoundingClientRect(),!0)}return eo(n.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==xt(n))){let a=n.childNodes[i-1],c=a.nodeType==3?Ot(a,xt(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return vr(Ut(c,1),!1)}if(s==null&&i<xt(n)){let a=n.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Ot(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return vr(Ut(c,-1),!0)}return vr(Ut(n.nodeType==3?Ot(n):n,-t),t>=0)}function vr(r,e){if(r.width==0)return r;let t=e?r.left:r.right;return{top:r.top,bottom:r.bottom,left:t,right:t}}function eo(r,e){if(r.height==0)return r;let t=e?r.top:r.bottom;return{top:t,bottom:t,left:r.left,right:r.right}}function oc(r,e,t){let n=r.state,i=r.root.activeElement;n!=e&&r.updateState(e),i!=r.dom&&r.focus();try{return t()}finally{n!=e&&r.updateState(n),i!=r.dom&&i&&i.focus()}}function Eh(r,e,t){let n=e.selection,i=t=="up"?n.$from:n.$to;return oc(r,e,()=>{let{node:s}=r.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let l=r.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=sc(r,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Ot(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const xh=/[\u0590-\u08ac]/;function wh(r,e,t){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,l=r.domSelection();return!xh.test(n.parent.textContent)||!l.modify?t=="left"||t=="backward"?s:o:oc(r,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:f}=r.domSelectionRange(),d=l.caretBidiLevel;l.modify("move",t,"character");let h=n.depth?r.docView.domAfterPos(n.before()):r.dom,{focusNode:p,focusOffset:m}=r.domSelectionRange(),y=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&c==m;try{l.collapse(u,f),a&&(a!=u||c!=f)&&l.extend&&l.extend(a,c)}catch{}return d!=null&&(l.caretBidiLevel=d),y})}let sa=null,oa=null,la=!1;function Ch(r,e,t){return sa==e&&oa==t?la:(sa=e,oa=t,la=t=="up"||t=="down"?Eh(r,e,t):wh(r,e,t))}const mt=0,aa=1,Jn=2,Mt=3;class Zr{constructor(e,t,n,i){this.parent=e,this.children=t,this.dom=n,this.contentDOM=i,this.dirty=mt,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let i=this.children[t];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Xe(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let i=this.children[t],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.size;if(l>e||o instanceof ac){i=e-s;break}s=l}if(i)return this.children[n].domFromPos(i-this.children[n].border,t);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof lc&&s.side>=0;n--);if(t<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Xe(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Xe(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let u=o+a.border;if(e>=u&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,u);e=o;for(let f=l;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Xe(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>t||l==this.children.length-1)){t=c;for(let u=l+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=Xe(f.dom);break}t+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(t.nodeType!=1||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let d=0,h=0;d<this.children.length;d++){let p=this.children[d],m=h+p.size;if(s>h&&o<m)return p.setSelection(e-h-p.border,t-h-p.border,n,i);h=m}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1),c=n.getSelection(),u=!1;if((yt||Ve)&&e==t){let{node:d,offset:h}=l;if(d.nodeType==3){if(u=!!(h&&d.nodeValue[h-1]==`
`),u&&h==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(l=a={node:m.parentNode,offset:Xe(m)+1});break}let y=p.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let p=d.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(yt&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&Ve)&&Mn(l.node,l.offset,c.anchorNode,c.anchorOffset)&&Mn(a.node,a.offset,c.focusNode,c.focusOffset))return;let f=!1;if((c.extend||e==t)&&!u){c.collapse(l.node,l.offset);try{e!=t&&c.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>t){let h=l;l=a,a=h}let d=document.createRange();d.setEnd(a.node,a.offset),d.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let l=n+s.border,a=o-s.border;if(e>=l&&t<=a){this.dirty=e==n||t==o?Jn:aa,e==l&&t==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Mt:s.markDirty(e-l,t-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Jn:Mt}n=o}this.dirty=Jn}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=e==1?Jn:aa;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class lc extends Zr{constructor(e,t,n,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==mt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Sh extends Zr{constructor(e,t,n,i){super(e,[],t,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class On extends Zr{constructor(e,t,n,i){super(e,[],n,i),this.mark=t}static create(e,t,n,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,n);return(!o||!o.dom)&&(o=wt.renderSpec(document,t.type.spec.toDOM(t,n))),new On(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&Mt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=Mt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=mt){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=mt}}slice(e,t,n){let i=On.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;t<o&&(s=xo(s,t,o,n)),e>0&&(s=xo(s,0,e,n));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}}class _n extends Zr{constructor(e,t,n,i,s,o,l,a,c){super(e,[],s,o),this.node=t,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=l,o&&this.updateChildren(a,c)}static create(e,t,n,i,s,o){let l=s.nodeViews[t.type.name],a,c=l&&l(t,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},n,i),u=c&&c.dom,f=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=wt.renderSpec(document,t.type.spec.toDOM(t)));!f&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let d=u;return u=fc(u,n,t),c?a=new Ah(e,t,n,i,u,f||null,d,c,s,o+1):t.isText?new hs(e,t,n,i,u,d,s):new _n(e,t,n,i,u,f||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>A.empty)}return e}matchesNode(e,t,n){return this.dirty==mt&&e.eq(this.node)&&Eo(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new Mh(this,o&&o.node,e);Nh(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?a.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!f&&a.syncToMarks(u==this.node.childCount?me.none:this.node.child(u).marks,n,e),a.placeWidget(c,e,i)},(c,u,f,d)=>{a.syncToMarks(c.marks,n,e);let h;a.findNodeMatch(c,u,f,d)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,u,f,h,e)||a.updateNextNode(c,u,f,e,d)||a.addNode(c,u,f,e,i),i+=c.nodeSize}),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Jn)&&(o&&this.protectLocalComposition(e,o),uc(this.contentDOM,this.children,e),lr&&Fh(this.dom))}localCompositionInfo(e,t){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof ue)||n<t||i>t+this.node.content.size)return null;let s=e.domSelectionRange(),o=Bh(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,a=Ih(this.node.content,l,n-t,i-t);return a<0?null:{node:o,pos:a,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Sh(this,s,t,i);e.input.compositionNodes.push(o),this.children=xo(this.children,n,n+i.length,e,o)}update(e,t,n,i){return this.dirty==Mt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,n,i),!0)}updateInner(e,t,n,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=mt}updateOuterDeco(e){if(Eo(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=cc(this.dom,this.nodeDOM,ko(this.outerDeco,this.node,t),ko(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function ua(r,e,t,n,i){return fc(n,e,r),new _n(void 0,r,e,t,n,n,n,i,0)}class hs extends _n{constructor(e,t,n,i,s,o,l){super(e,t,n,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,i){return this.dirty==Mt||this.dirty!=mt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=mt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=mt,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,n){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new hs(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Mt)}get domAtom(){return!1}}class ac extends Zr{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==mt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Ah extends _n{constructor(e,t,n,i,s,o,l,a,c,u){super(e,t,n,i,s,o,l,c,u),this.spec=a}update(e,t,n,i){if(this.dirty==Mt)return!1;if(this.spec.update){let s=this.spec.update(e,t,n);return s&&this.updateInner(e,t,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,i){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function uc(r,e,t){let n=r.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==r){for(;l!=n;)n=ca(n),i=!0;n=n.nextSibling}else i=!0,r.insertBefore(l,n);if(o instanceof On){let a=n?n.previousSibling:r.lastChild;uc(o.contentDOM,o.children,t),n=a?a.nextSibling:r.firstChild}}for(;n;)n=ca(n),i=!0;i&&t.trackWrites==r&&(t.trackWrites=null)}const Fr=function(r){r&&(this.nodeName=r)};Fr.prototype=Object.create(null);const bn=[new Fr];function ko(r,e,t){if(r.length==0)return bn;let n=t?bn[0]:new Fr,i=[n];for(let s=0;s<r.length;s++){let o=r[s].type.attrs;if(o){o.nodeName&&i.push(n=new Fr(o.nodeName));for(let l in o){let a=o[l];a!=null&&(t&&i.length==1&&i.push(n=new Fr(e.isInline?"span":"div")),l=="class"?n.class=(n.class?n.class+" ":"")+a:l=="style"?n.style=(n.style?n.style+";":"")+a:l!="nodeName"&&(n[l]=a))}}}return i}function cc(r,e,t,n){if(t==bn&&n==bn)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],l=t[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=r&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=bn[0]),i=a}Th(i,l||bn[0],o)}return i}function Th(r,e,t){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in t)&&r.removeAttribute(n);for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&t[n]!=e[n]&&r.setAttribute(n,t[n]);if(e.class!=t.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&r.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&r.classList.add(i[s]);r.classList.length==0&&r.removeAttribute("class")}if(e.style!=t.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)r.style.removeProperty(i[1])}t.style&&(r.style.cssText+=t.style)}}function fc(r,e,t){return cc(r,r,bn,ko(e,t,r.nodeType!=1))}function Eo(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].type.eq(e[t].type))return!1;return!0}function ca(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class Mh{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Oh(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=mt,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=On.create(this.top,e[s],t,n);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,t,n)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,n,i,s){let o=this.top.children[i];return o.dirty==Mt&&o.dom==o.contentDOM&&(o.dirty=Jn),o.update(e,t,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=t}}updateNextNode(e,t,n,i,s){for(let o=this.index;o<this.top.children.length;o++){let l=this.top.children[o];if(l instanceof _n){let a=this.preMatch.matched.get(l);if(a!=null&&a!=s)return!1;let c=l.dom;if(!(this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Mt&&Eo(t,l.outerDeco)))&&l.update(e,t,n,i))return this.destroyBetween(this.index,o),l.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,n,i,s){this.top.children.splice(this.index++,0,_n.create(this.top,e,t,n,i,s)),this.changed=!0}placeWidget(e,t,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new lc(this.top,e,t,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof On;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof hs)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ve||ze)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new ac(this.top,[],n,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Oh(r,e){let t=e,n=t.children.length,i=r.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(n){let c=t.children[n-1];if(c instanceof On)t=c,n=c.children.length;else{l=c,n--;break}}else{if(t==e)break e;n=t.parent.children.indexOf(t),t=t.parent}let a=l.node;if(a){if(a!=r.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function _h(r,e){return r.type.side-e.type.side}function Nh(r,e,t,n){let i=e.locals(r),s=0;if(i.length==0){for(let c=0;c<r.childCount;c++){let u=r.child(c);n(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){if(o<i.length&&i[o].to==s){let p=i[o++],m;for(;o<i.length&&i[o].to==s;)(m||(m=[p])).push(i[o++]);if(m){m.sort(_h);for(let y=0;y<m.length;y++)t(m[y],c,!!a)}else t(p,c,!!a)}let u,f;if(a)f=-1,u=a,a=null;else if(c<r.childCount)f=c,u=r.child(c++);else break;for(let p=0;p<l.length;p++)l[p].to<=s&&l.splice(p--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let d=s+u.nodeSize;if(u.isText){let p=d;o<i.length&&i[o].from<p&&(p=i[o].from);for(let m=0;m<l.length;m++)l[m].to<p&&(p=l[m].to);p<d&&(a=u.cut(p-s),u=u.cut(0,p-s),d=p,f=-1)}let h=u.isInline&&!u.isLeaf?l.filter(p=>!p.inline):l.slice();n(u,h,e.forChild(s,u),f),s=d}}function Fh(r){if(r.nodeName=="UL"||r.nodeName=="OL"){let e=r.style.cssText;r.style.cssText=e+"; list-style: square !important",window.getComputedStyle(r).listStyle,r.style.cssText=e}}function Bh(r,e){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0){if(r.childNodes.length>e&&r.childNodes[e].nodeType==3)return r.childNodes[e];r=r.childNodes[e-1],e=xt(r)}else if(r.nodeType==1&&e<r.childNodes.length)r=r.childNodes[e],e=0;else return null}}function Ih(r,e,t,n){for(let i=0,s=0;i<r.childCount&&s<=n;){let o=r.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<r.childCount;){let c=r.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text}if(s>=t){let c=l<n?a.lastIndexOf(e,n-l-1):-1;if(c>=0&&c+e.length+l>=t)return l+c;if(t==n&&a.length>=n+e.length-l&&a.slice(n-l,n-l+e.length)==e)return n}}return-1}function xo(r,e,t,n,i){let s=[];for(let o=0,l=0;o<r.length;o++){let a=r[o],c=l,u=l+=a.size;c>=t||u<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,n)),i&&(s.push(i),i=void 0),u>t&&s.push(a.slice(t-c,a.size,n)))}return s}function Ho(r,e=null){let t=r.domSelectionRange(),n=r.state.doc;if(!t.focusNode)return null;let i=r.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let l=n.resolve(o),a,c;if(fs(t)){for(a=l;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&X.isSelectable(u)&&i.parent&&!(u.isInline&&oh(t.focusNode,t.focusOffset,i.dom))){let f=i.posBefore;c=new X(o==f?l:n.resolve(f))}}else{let u=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null;a=n.resolve(u)}if(!c){let u=e=="pointer"||r.state.selection.head<l.pos&&!s?1:-1;c=jo(r,a,l,u)}return c}function dc(r){return r.editable?r.hasFocus():pc(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function Ft(r,e=!1){let t=r.state.selection;if(hc(r,t),!!dc(r)){if(!e&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&ze){let n=r.domSelectionRange(),i=r.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Mn(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){r.input.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)Rh(r);else{let{anchor:n,head:i}=t,s,o;fa&&!(t instanceof ue)&&(t.$from.parent.inlineContent||(s=da(r,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=da(r,t.to))),r.docView.setSelection(n,i,r.root,e),fa&&(s&&ha(s),o&&ha(o)),t.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&$h(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const fa=Ve||ze&&uh<63;function da(r,e){let{node:t,offset:n}=r.docView.domFromPos(e,0),i=n<t.childNodes.length?t.childNodes[n]:null,s=n?t.childNodes[n-1]:null;if(Ve&&i&&i.contentEditable=="false")return to(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return to(i);if(s)return to(s)}}function to(r){return r.contentEditable="true",Ve&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function ha(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function $h(r){let e=r.dom.ownerDocument;e.removeEventListener("selectionchange",r.input.hideSelectionGuard);let t=r.domSelectionRange(),n=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(t.anchorNode!=n||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!dc(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function Rh(r){let e=r.domSelection(),t=document.createRange(),n=r.cursorWrapper.dom,i=n.nodeName=="IMG";i?t.setEnd(n.parentNode,Xe(n)+1):t.setEnd(n,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!r.state.selection.visible&&qe&&Qt<=11&&(n.disabled=!0,n.disabled=!1)}function hc(r,e){if(e instanceof X){let t=r.docView.descAt(e.from);t!=r.lastSelectedViewDesc&&(pa(r),t&&t.selectNode(),r.lastSelectedViewDesc=t)}else pa(r)}function pa(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function jo(r,e,t,n){return r.someProp("createSelectionBetween",i=>i(r,e,t))||ue.between(e,t,n)}function ma(r){return r.editable&&!r.hasFocus()?!1:pc(r)}function pc(r){let e=r.domSelectionRange();if(!e.anchorNode)return!1;try{return r.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(r.editable||r.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Ph(r){let e=r.docView.domFromPos(r.state.selection.anchor,0),t=r.domSelectionRange();return Mn(e.node,e.offset,t.anchorNode,t.anchorOffset)}function wo(r,e){let{$anchor:t,$head:n}=r.selection,i=e>0?t.max(n):t.min(n),s=i.parent.inlineContent?i.depth?r.doc.resolve(e>0?i.after():i.before()):null:i;return s&&ae.findFrom(s,e)}function yn(r,e){return r.dispatch(r.state.tr.setSelection(e).scrollIntoView()),!0}function ga(r,e,t){let n=r.state.selection;if(n instanceof ue){if(!n.empty||t.indexOf("s")>-1)return!1;if(r.endOfTextblock(e>0?"right":"left")){let i=wo(r.state,e);return i&&i instanceof X?yn(r,i):!1}else if(!(st&&t.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=r.docView.descAt(l))&&!o.contentDOM?X.isSelectable(s)?yn(r,new X(e<0?r.state.doc.resolve(i.pos-s.nodeSize):i)):ds?yn(r,new ue(r.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else{if(n instanceof X&&n.node.isInline)return yn(r,new ue(e>0?n.$to:n.$from));{let i=wo(r.state,e);return i?yn(r,i):!1}}}function Si(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function Br(r){let e=r.pmViewDesc;return e&&e.size==0&&(r.nextSibling||r.nodeName!="BR")}function no(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let i,s,o=!1;for(yt&&t.nodeType==1&&n<Si(t)&&Br(t.childNodes[n])&&(o=!0);;)if(n>0){if(t.nodeType!=1)break;{let l=t.childNodes[n-1];if(Br(l))i=t,s=--n;else if(l.nodeType==3)t=l,n=t.nodeValue.length;else break}}else{if(mc(t))break;{let l=t.previousSibling;for(;l&&Br(l);)i=t.parentNode,s=Xe(l),l=l.previousSibling;if(l)t=l,n=Si(t);else{if(t=t.parentNode,t==r.dom)break;n=0}}}o?Co(r,t,n):i&&Co(r,i,s)}function ro(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let i=Si(t),s,o;for(;;)if(n<i){if(t.nodeType!=1)break;let l=t.childNodes[n];if(Br(l))s=t,o=++n;else break}else{if(mc(t))break;{let l=t.nextSibling;for(;l&&Br(l);)s=l.parentNode,o=Xe(l)+1,l=l.nextSibling;if(l)t=l,n=0,i=Si(t);else{if(t=t.parentNode,t==r.dom)break;n=i=0}}}s&&Co(r,s,o)}function mc(r){let e=r.pmViewDesc;return e&&e.node&&e.node.isBlock}function Co(r,e,t){let n=r.domSelection();if(fs(n)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,t);r.domObserver.setCurSelection();let{state:i}=r;setTimeout(()=>{r.state==i&&Ft(r)},50)}function ya(r,e,t){let n=r.state.selection;if(n instanceof ue&&!n.empty||t.indexOf("s")>-1||st&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||r.endOfTextblock(e<0?"up":"down")){let o=wo(r.state,e);if(o&&o instanceof X)return yn(r,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=n instanceof pt?ae.near(o,e):ae.findFrom(o,e);return l?yn(r,l):!1}return!1}function Da(r,e){if(!(r.state.selection instanceof ue))return!0;let{$head:t,$anchor:n,empty:i}=r.state.selection;if(!t.sameParent(n))return!0;if(!i)return!1;if(r.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=r.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),r.dispatch(o),!0}return!1}function ba(r,e,t){r.domObserver.stop(),e.contentEditable=t,r.domObserver.start()}function Lh(r){if(!Ve||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=r.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;ba(r,n,"true"),setTimeout(()=>ba(r,n,"false"),20)}return!1}function zh(r){let e="";return r.ctrlKey&&(e+="c"),r.metaKey&&(e+="m"),r.altKey&&(e+="a"),r.shiftKey&&(e+="s"),e}function Vh(r,e){let t=e.keyCode,n=zh(e);return t==8||st&&t==72&&n=="c"?Da(r,-1)||no(r):t==46||st&&t==68&&n=="c"?Da(r,1)||ro(r):t==13||t==27?!0:t==37||st&&t==66&&n=="c"?ga(r,-1,n)||no(r):t==39||st&&t==70&&n=="c"?ga(r,1,n)||ro(r):t==38||st&&t==80&&n=="c"?ya(r,-1,n)||no(r):t==40||st&&t==78&&n=="c"?Lh(r)||ya(r,1,n)||ro(r):n==(st?"m":"c")&&(t==66||t==73||t==89||t==90)}function gc(r,e){r.someProp("transformCopied",h=>{e=h(e,r)});let t=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let h=n.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),n=h.content}let o=r.someProp("clipboardSerializer")||wt.fromSchema(r.state.schema),l=Ec(),a=l.createElement("div");a.appendChild(o.serializeFragment(n,{document:l}));let c=a.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=kc[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=l.createElement(u[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),f++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(t)}`);let d=r.someProp("clipboardTextSerializer",h=>h(e,r))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:d}}function yc(r,e,t,n,i){let s=i.parent.type.spec.code,o,l;if(!t&&!e)return null;let a=e&&(n||s||!t);if(a){if(r.someProp("transformPastedText",d=>{e=d(e,s||n,r)}),s)return e?new L(A.from(r.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):L.empty;let f=r.someProp("clipboardTextParser",d=>d(e,i,n,r));if(f)l=f;else{let d=i.marks(),{schema:h}=r.state,p=wt.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let y=o.appendChild(document.createElement("p"));m&&y.appendChild(p.serializeNode(h.text(m,d)))})}}else r.someProp("transformPastedHTML",f=>{t=f(t,r)}),o=Uh(t),ds&&Wh(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(l||(l=(r.someProp("clipboardParser")||r.someProp("domParser")||ir.fromSchema(r.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Hh.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)l=Kh(va(l,+u[1],+u[2]),u[4]);else if(l=L.maxOpen(jh(l.content,i),!0),l.openStart||l.openEnd){let f=0,d=0;for(let h=l.content.firstChild;f<l.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=l.content.lastChild;d<l.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);l=va(l,f,d)}return r.someProp("transformPasted",f=>{l=f(l,r)}),l}const Hh=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function jh(r,e){if(r.childCount<2)return r;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(r.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&bc(a,s,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=vc(o[o.length-1],s.length));let u=Dc(l,a);o.push(u),i=i.matchType(u.type),s=a}}),o)return A.from(o)}return r}function Dc(r,e,t=0){for(let n=e.length-1;n>=t;n--)r=e[n].create(null,A.from(r));return r}function bc(r,e,t,n,i){if(i<r.length&&i<e.length&&r[i]==e[i]){let s=bc(r,e,t,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==r.length-1?t.type:r[i+1]))return n.copy(n.content.append(A.from(Dc(t,r,i+1))))}}function vc(r,e){if(e==0)return r;let t=r.content.replaceChild(r.childCount-1,vc(r.lastChild,e-1)),n=r.contentMatchAt(r.childCount).fillBefore(A.empty,!0);return r.copy(t.append(n))}function So(r,e,t,n,i,s){let o=e<0?r.firstChild:r.lastChild,l=o.content;return i<n-1&&(l=So(l,e,t,n,i+1,s)),i>=t&&(l=e<0?o.contentMatchAt(0).fillBefore(l,r.childCount>1||s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(A.empty,!0))),r.replaceChild(e<0?0:r.childCount-1,o.copy(l))}function va(r,e,t){return e<r.openStart&&(r=new L(So(r.content,-1,e,r.openStart,0,r.openEnd),e,r.openEnd)),t<r.openEnd&&(r=new L(So(r.content,1,t,r.openEnd,0,0),r.openStart,t)),r}const kc={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ka=null;function Ec(){return ka||(ka=document.implementation.createHTMLDocument("title"))}function Uh(r){let e=/^(\s*<meta [^>]*>)*/.exec(r);e&&(r=r.slice(e[0].length));let t=Ec().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(r),i;if((i=n&&kc[n[1].toLowerCase()])&&(r=i.map(s=>"<"+s+">").join("")+r+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=r,i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function Wh(r){let e=r.querySelectorAll(ze?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let n=e[t];n.childNodes.length==1&&n.textContent==" "&&n.parentNode&&n.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),n)}}function Kh(r,e){if(!r.size)return r;let t=r.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return r}let{content:i,openStart:s,openEnd:o}=r;for(let l=n.length-2;l>=0;l-=2){let a=t.nodes[n[l]];if(!a||a.hasRequiredAttrs())break;i=A.from(a.create(n[l+1],i)),s++,o++}return new L(i,s,o)}const He={},je={},Jh={touchstart:!0,touchmove:!0};class qh{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Gh(r){for(let e in He){let t=He[e];r.dom.addEventListener(e,r.input.eventHandlers[e]=n=>{Xh(r,n)&&!Uo(r,n)&&(r.editable||!(n.type in je))&&t(r,n)},Jh[e]?{passive:!0}:void 0)}Ve&&r.dom.addEventListener("input",()=>null),Ao(r)}function Xt(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}function Yh(r){r.domObserver.stop();for(let e in r.input.eventHandlers)r.dom.removeEventListener(e,r.input.eventHandlers[e]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}function Ao(r){r.someProp("handleDOMEvents",e=>{for(let t in e)r.input.eventHandlers[t]||r.dom.addEventListener(t,r.input.eventHandlers[t]=n=>Uo(r,n))})}function Uo(r,e){return r.someProp("handleDOMEvents",t=>{let n=t[e.type];return n?n(r,e)||e.defaultPrevented:!1})}function Xh(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=r.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Qh(r,e){!Uo(r,e)&&He[e.type]&&(r.editable||!(e.type in je))&&He[e.type](r,e)}je.keydown=(r,e)=>{let t=e;if(r.input.shiftKey=t.keyCode==16||t.shiftKey,!wc(r,t)&&(r.input.lastKeyCode=t.keyCode,r.input.lastKeyCodeTime=Date.now(),!(dt&&ze&&t.keyCode==13)))if(t.keyCode!=229&&r.domObserver.forceFlush(),lr&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let n=Date.now();r.input.lastIOSEnter=n,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==n&&(r.someProp("handleKeyDown",i=>i(r,gn(13,"Enter"))),r.input.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",n=>n(r,t))||Vh(r,t)?t.preventDefault():Xt(r,"key")};je.keyup=(r,e)=>{e.keyCode==16&&(r.input.shiftKey=!1)};je.keypress=(r,e)=>{let t=e;if(wc(r,t)||!t.charCode||t.ctrlKey&&!t.altKey||st&&t.metaKey)return;if(r.someProp("handleKeyPress",i=>i(r,t))){t.preventDefault();return}let n=r.state.selection;if(!(n instanceof ue)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!r.someProp("handleTextInput",s=>s(r,n.$from.pos,n.$to.pos,i))&&r.dispatch(r.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function ps(r){return{left:r.clientX,top:r.clientY}}function Zh(r,e){let t=e.x-r.clientX,n=e.y-r.clientY;return t*t+n*n<100}function Wo(r,e,t,n,i){if(n==-1)return!1;let s=r.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(r.someProp(e,l=>o>s.depth?l(r,t,s.nodeAfter,s.before(o),i,!0):l(r,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function tr(r,e,t){r.focused||r.focus();let n=r.state.tr.setSelection(e);t=="pointer"&&n.setMeta("pointer",!0),r.dispatch(n)}function ep(r,e){if(e==-1)return!1;let t=r.state.doc.resolve(e),n=t.nodeAfter;return n&&n.isAtom&&X.isSelectable(n)?(tr(r,new X(t),"pointer"),!0):!1}function tp(r,e){if(e==-1)return!1;let t=r.state.selection,n,i;t instanceof X&&(n=t.node);let s=r.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(X.isSelectable(l)){n&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(tr(r,X.create(r.state.doc,i),"pointer"),!0):!1}function np(r,e,t,n,i){return Wo(r,"handleClickOn",e,t,n)||r.someProp("handleClick",s=>s(r,e,n))||(i?tp(r,t):ep(r,t))}function rp(r,e,t,n){return Wo(r,"handleDoubleClickOn",e,t,n)||r.someProp("handleDoubleClick",i=>i(r,e,n))}function ip(r,e,t,n){return Wo(r,"handleTripleClickOn",e,t,n)||r.someProp("handleTripleClick",i=>i(r,e,n))||sp(r,t,n)}function sp(r,e,t){if(t.button!=0)return!1;let n=r.state.doc;if(e==-1)return n.inlineContent?(tr(r,ue.create(n,0,n.content.size),"pointer"),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)tr(r,ue.create(n,l+1,l+1+o.content.size),"pointer");else if(X.isSelectable(o))tr(r,X.create(n,l),"pointer");else continue;return!0}}function Ko(r){return Ai(r)}const xc=st?"metaKey":"ctrlKey";He.mousedown=(r,e)=>{let t=e;r.input.shiftKey=t.shiftKey;let n=Ko(r),i=Date.now(),s="singleClick";i-r.input.lastClick.time<500&&Zh(t,r.input.lastClick)&&!t[xc]&&(r.input.lastClick.type=="singleClick"?s="doubleClick":r.input.lastClick.type=="doubleClick"&&(s="tripleClick")),r.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let o=r.posAtCoords(ps(t));o&&(s=="singleClick"?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new op(r,o,t,!!n)):(s=="doubleClick"?rp:ip)(r,o.pos,o.inside,t)?t.preventDefault():Xt(r,"pointer"))};class op{constructor(e,t,n,i){this.view=e,this.pos=t,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[xc],this.allowDefault=n.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,o=u.depth?u.before():0}const l=i?null:n.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a?a.dom:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof X&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&yt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xt(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ft(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ps(e))),this.updateAllowDefault(e),this.allowDefault||!t?Xt(this.view,"pointer"):np(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ve&&this.mightDrag&&!this.mightDrag.node.isAtom||ze&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(tr(this.view,ae.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Xt(this.view,"pointer")}move(e){this.updateAllowDefault(e),Xt(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}He.touchstart=r=>{r.input.lastTouch=Date.now(),Ko(r),Xt(r,"pointer")};He.touchmove=r=>{r.input.lastTouch=Date.now(),Xt(r,"pointer")};He.contextmenu=r=>Ko(r);function wc(r,e){return r.composing?!0:Ve&&Math.abs(e.timeStamp-r.input.compositionEndedAt)<500?(r.input.compositionEndedAt=-2e8,!0):!1}const lp=dt?5e3:-1;je.compositionstart=je.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:e}=r,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))r.markCursor=r.state.storedMarks||t.marks(),Ai(r,!0),r.markCursor=null;else if(Ai(r),yt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let n=r.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){r.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}r.input.composing=!0}Cc(r,lp)};je.compositionend=(r,e)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=e.timeStamp,Cc(r,20))};function Cc(r,e){clearTimeout(r.input.composingTimeout),e>-1&&(r.input.composingTimeout=setTimeout(()=>Ai(r),e))}function Sc(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=ap());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function ap(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function Ai(r,e=!1){if(!(dt&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),Sc(r),e||r.docView&&r.docView.dirty){let t=Ho(r);return t&&!t.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(t)):r.updateState(r.state),!0}return!1}}function up(r,e){if(!r.dom.parentNode)return;let t=r.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),r.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),r.focus()},50)}const ar=qe&&Qt<15||lr&&ch<604;He.copy=je.cut=(r,e)=>{let t=e,n=r.state.selection,i=t.type=="cut";if(n.empty)return;let s=ar?null:t.clipboardData,o=n.content(),{dom:l,text:a}=gc(r,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):up(r,l),i&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function cp(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function fp(r,e){if(!r.dom.parentNode)return;let t=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,n=r.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{r.focus(),n.parentNode&&n.parentNode.removeChild(n),t?Jr(r,n.value,null,r.input.shiftKey,e):Jr(r,n.textContent,n.innerHTML,r.input.shiftKey,e)},50)}function Jr(r,e,t,n,i){let s=yc(r,e,t,n,r.state.selection.$from);if(r.someProp("handlePaste",a=>a(r,i,s||L.empty)))return!0;if(!s)return!1;let o=cp(s),l=o?r.state.tr.replaceSelectionWith(o,r.input.shiftKey):r.state.tr.replaceSelection(s);return r.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}je.paste=(r,e)=>{let t=e;if(r.composing&&!dt)return;let n=ar?null:t.clipboardData;n&&Jr(r,n.getData("text/plain"),n.getData("text/html"),r.input.shiftKey,t)?t.preventDefault():fp(r,t)};class dp{constructor(e,t){this.slice=e,this.move=t}}const Ac=st?"altKey":"ctrlKey";He.dragstart=(r,e)=>{let t=e,n=r.input.mouseDown;if(n&&n.done(),!t.dataTransfer)return;let i=r.state.selection,s=i.empty?null:r.posAtCoords(ps(t));if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof X?i.to-1:i.to))){if(n&&n.mightDrag)r.dispatch(r.state.tr.setSelection(X.create(r.state.doc,n.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let c=r.docView.nearestDesc(t.target,!0);c&&c.node.type.spec.draggable&&c!=r.docView&&r.dispatch(r.state.tr.setSelection(X.create(r.state.doc,c.posBefore)))}}let o=r.state.selection.content(),{dom:l,text:a}=gc(r,o);t.dataTransfer.clearData(),t.dataTransfer.setData(ar?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",ar||t.dataTransfer.setData("text/plain",a),r.dragging=new dp(o,!t[Ac])};He.dragend=r=>{let e=r.dragging;window.setTimeout(()=>{r.dragging==e&&(r.dragging=null)},50)};je.dragover=je.dragenter=(r,e)=>e.preventDefault();je.drop=(r,e)=>{let t=e,n=r.dragging;if(r.dragging=null,!t.dataTransfer)return;let i=r.posAtCoords(ps(t));if(!i)return;let s=r.state.doc.resolve(i.pos),o=n&&n.slice;o?r.someProp("transformPasted",p=>{o=p(o,r)}):o=yc(r,t.dataTransfer.getData(ar?"Text":"text/plain"),ar?null:t.dataTransfer.getData("text/html"),!1,s);let l=!!(n&&!t[Ac]);if(r.someProp("handleDrop",p=>p(r,t,o||L.empty,l))){t.preventDefault();return}if(!o)return;t.preventDefault();let a=o?qd(r.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let c=r.state.tr;l&&c.deleteSelection();let u=c.mapping.map(a),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(f?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let h=c.doc.resolve(u);if(f&&X.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new X(h));else{let p=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((m,y,g,b)=>p=b),c.setSelection(jo(r,h,c.doc.resolve(p)))}r.focus(),r.dispatch(c.setMeta("uiEvent","drop"))};He.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&Ft(r)},20))};He.blur=(r,e)=>{let t=e;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),t.relatedTarget&&r.dom.contains(t.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)};He.beforeinput=(r,e)=>{if(ze&&dt&&e.inputType=="deleteContentBackward"){r.domObserver.flushSoon();let{domChangeCount:n}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=n||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",s=>s(r,gn(8,"Backspace")))))return;let{$cursor:i}=r.state.selection;i&&i.pos>0&&r.dispatch(r.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let r in je)He[r]=je[r];function qr(r,e){if(r==e)return!0;for(let t in r)if(r[t]!==e[t])return!1;for(let t in e)if(!(t in r))return!1;return!0}class Jo{constructor(e,t){this.toDOM=e,this.spec=t||xn,this.side=this.spec.side||0}map(e,t,n,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new ht(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Jo&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&qr(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Zt{constructor(e,t){this.attrs=e,this.spec=t||xn}map(e,t,n,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new ht(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Zt&&qr(this.attrs,e.attrs)&&qr(this.spec,e.spec)}static is(e){return e.type instanceof Zt}destroy(){}}class qo{constructor(e,t){this.attrs=e,this.spec=t||xn}map(e,t,n,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new ht(s.pos-n,o.pos-n,this)}valid(e,t){let{index:n,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(n)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof qo&&qr(this.attrs,e.attrs)&&qr(this.spec,e.spec)}destroy(){}}class ht{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new ht(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new ht(e,e,new Jo(t,n))}static inline(e,t,n,i){return new ht(e,t,new Zt(n,i))}static node(e,t,n,i){return new ht(e,t,new qo(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Zt}}const Wn=[],xn={};class Se{constructor(e,t){this.local=e.length?e:Wn,this.children=t.length?t:Wn}static create(e,t){return t.length?Ti(t,e,0,xn):$e}find(e,t,n){let i=[];return this.findInner(e??0,t??1e9,i,0,n),i}findInner(e,t,n,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=t&&l.to>=e&&(!s||s(l.spec))&&n.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,t-l,n,i+l,s)}}map(e,t,n){return this==$e||e.maps.length==0?this:this.mapInner(e,t,0,0,n||xn)}mapInner(e,t,n,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,n,i);a&&a.type.valid(t,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?hp(this.children,o||[],e,t,n,i,s):o?new Se(o.sort(wn),Wn):$e}add(e,t){return t.length?this==$e?Se.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let i,s=0;e.forEach((l,a)=>{let c=a+n,u;if(u=Mc(t,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,u,c+1):i.splice(s,0,a,a+l.nodeSize,Ti(u,l,c+1,xn)),s+=3}});let o=Tc(s?Oc(t):t,-n);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new Se(o.length?this.local.concat(o).sort(wn):this.local,i||this.children)}remove(e){return e.length==0||this==$e?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,l=n[s]+t,a=n[s+1]+t;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>l&&f.to<a&&(e[u]=null,(o||(o=[])).push(f));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,l+1);c!=$e?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Se(i,n):$e}forChild(e,t){if(this==$e)return this;if(t.isLeaf)return Se.empty;let n,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(n=this.children[l+2]);break}let s=e+1,o=s+t.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof Zt){let c=Math.max(s,a.from)-s,u=Math.min(o,a.to)-s;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new Se(i.sort(wn),Wn);return n?new qt([l,n]):l}return n||$e}eq(e){if(this==e)return!0;if(!(e instanceof Se)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Go(this.localsInner(e))}localsInner(e){if(this==$e)return Wn;if(e.inlineContent||!this.local.some(Zt.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Zt||t.push(this.local[n]);return t}}Se.empty=new Se([],[]);Se.removeOverlap=Go;const $e=Se.empty;class qt{constructor(e){this.members=e}map(e,t){const n=this.members.map(i=>i.map(e,t,xn));return qt.from(n)}forChild(e,t){if(t.isLeaf)return Se.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=$e&&(s instanceof qt?n=n.concat(s.members):n.push(s))}return qt.from(n)}eq(e){if(!(e instanceof qt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{n&&(t=t.slice(),n=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?Go(n?t:t.sort(wn)):Wn}static from(e){switch(e.length){case 0:return $e;case 1:return e[0];default:return new qt(e.every(t=>t instanceof Se)?e:e.reduce((t,n)=>t.concat(n instanceof Se?n:n.members),[]))}}}function hp(r,e,t,n,i,s,o){let l=r.slice();for(let c=0,u=s;c<t.maps.length;c++){let f=0;t.maps[c].forEach((d,h,p,m)=>{let y=m-p-(h-d);for(let g=0;g<l.length;g+=3){let b=l[g+1];if(b<0||d>b+u-f)continue;let v=l[g]+u-f;h>=v?l[g+1]=d<=v?-2:-1:p>=i&&y&&(l[g]+=y,l[g+1]+=y)}f+=y}),u=t.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=t.map(r[c]+s),f=u-i;if(f<0||f>=n.content.size){a=!0;continue}let d=t.map(r[c+1]+s,-1),h=d-i,{index:p,offset:m}=n.content.findIndex(f),y=n.maybeChild(p);if(y&&m==f&&m+y.nodeSize==h){let g=l[c+2].mapInner(t,y,u+1,r[c]+s+1,o);g!=$e?(l[c]=f,l[c+1]=h,l[c+2]=g):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=pp(l,r,e,t,i,s,o),u=Ti(c,n,0,o);e=u.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,d=0;f<u.children.length;f+=3){let h=u.children[f];for(;d<l.length&&l[d]<h;)d+=3;l.splice(d,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Se(e.sort(wn),l)}function Tc(r,e){if(!e||!r.length)return r;let t=[];for(let n=0;n<r.length;n++){let i=r[n];t.push(new ht(i.from+e,i.to+e,i.type))}return t}function pp(r,e,t,n,i,s,o){function l(a,c){for(let u=0;u<a.local.length;u++){let f=a.local[u].map(n,i,c);f?t.push(f):o.onRemove&&o.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<r.length;a+=3)r[a+1]==-1&&l(r[a+2],e[a]+s+1);return t}function Mc(r,e,t){if(e.isLeaf)return null;let n=t+e.nodeSize,i=null;for(let s=0,o;s<r.length;s++)(o=r[s])&&o.from>t&&o.to<n&&((i||(i=[])).push(o),r[s]=null);return i}function Oc(r){let e=[];for(let t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function Ti(r,e,t,n){let i=[],s=!1;e.forEach((l,a)=>{let c=Mc(r,l,a+t);if(c){s=!0;let u=Ti(c,l,t+a+1,n);u!=$e&&i.push(a,a+l.nodeSize,u)}});let o=Tc(s?Oc(r):r,-t).sort(wn);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(n.onRemove&&n.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Se(o,i):$e}function wn(r,e){return r.from-e.from||r.to-e.to}function Go(r){let e=r;for(let t=0;t<e.length-1;t++){let n=e[t];if(n.from!=n.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==r&&(e=r.slice()),e[i]=s.copy(s.from,n.to),Ea(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==r&&(e=r.slice()),e[t]=n.copy(n.from,s.from),Ea(e,i,n.copy(s.from,n.to)));break}}}return e}function Ea(r,e,t){for(;e<r.length&&wn(t,r[e])>0;)e++;r.splice(e,0,t)}function io(r){let e=[];return r.someProp("decorations",t=>{let n=t(r.state);n&&n!=$e&&e.push(n)}),r.cursorWrapper&&e.push(Se.create(r.state.doc,[r.cursorWrapper.deco])),qt.from(e)}const mp={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},gp=qe&&Qt<=11;class yp{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Dp{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new yp,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);qe&&Qt<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),gp&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,mp)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ma(this.view)){if(this.suppressingSelectionUpdates)return Ft(this.view);if(qe&&Qt<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Mn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let s=e.focusNode;s;s=Kr(s))t.add(s);for(let s=e.anchorNode;s;s=Kr(s))if(t.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&ma(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let u=0;u<t.length;u++){let f=this.registerMutation(t[u],a);f&&(s=s<0?f.from:Math.min(f.from,s),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(l=!0))}if(yt&&a.length>1){let u=a.filter(f=>f.nodeName=="BR");if(u.length==2){let f=u[0],d=u[1];f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&e.input.lastTouch<Date.now()-300&&fs(n)&&(c=Ho(e))&&c.eq(ae.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ft(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),bp(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Ft(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)t.push(e.addedNodes[u]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(qe&&Qt<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:d}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?Xe(i)+1:0,l=n.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?Xe(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let xa=new WeakMap,wa=!1;function bp(r){if(!xa.has(r)&&(xa.set(r,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace)!==-1)){if(r.requiresGeckoHackNode=yt,wa)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),wa=!0}}function vp(r){let e;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}r.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",t,!0);let n=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,l=r.domAtPos(r.state.selection.anchor);return Mn(l.node,l.offset,s,o)&&([n,i,s,o]=[s,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:o}}function kp(r,e,t){let{node:n,fromOffset:i,toOffset:s,from:o,to:l}=r.docView.parseRange(e,t),a=r.domSelectionRange(),c,u=a.anchorNode;if(u&&r.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],fs(a)||c.push({node:a.focusNode,offset:a.focusOffset})),ze&&r.input.lastKeyCode===8)for(let y=s;y>i;y--){let g=n.childNodes[y-1],b=g.pmViewDesc;if(g.nodeName=="BR"&&!b){s=y;break}if(!b||b.size)break}let f=r.state.doc,d=r.someProp("domParser")||ir.fromSchema(r.state.schema),h=f.resolve(o),p=null,m=d.parse(n,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Ep,context:h});if(c&&c[0].pos!=null){let y=c[0].pos,g=c[1]&&c[1].pos;g==null&&(g=y),p={anchor:y+o,head:g+o}}return{doc:m,sel:p,from:o,to:l}}function Ep(r){let e=r.pmViewDesc;if(e)return e.parseRule();if(r.nodeName=="BR"&&r.parentNode){if(Ve&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(r.parentNode.lastChild==r||Ve&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if(r.nodeName=="IMG"&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}function xp(r,e,t,n,i){if(e<0){let N=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,S=Ho(r,N);if(S&&!r.state.selection.eq(S)){if(ze&&dt&&r.input.lastKeyCode===13&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",q=>q(r,gn(13,"Enter"))))return;let ee=r.state.tr.setSelection(S);N=="pointer"?ee.setMeta("pointer",!0):N=="key"&&ee.scrollIntoView(),r.dispatch(ee)}return}let s=r.state.doc.resolve(e),o=s.sharedDepth(t);e=s.before(o+1),t=r.state.doc.resolve(t).after(o+1);let l=r.state.selection,a=kp(r,e,t),c=r.state.doc,u=c.slice(a.from,a.to),f,d;r.input.lastKeyCode===8&&Date.now()-100<r.input.lastKeyCodeTime?(f=r.state.selection.to,d="end"):(f=r.state.selection.from,d="start"),r.input.lastKeyCode=null;let h=Sp(u.content,a.doc.content,a.from,f,d);if((lr&&r.input.lastIOSEnter>Date.now()-225||dt)&&i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"||N.nodeName=="LI")&&(!h||h.endA>=h.endB)&&r.someProp("handleKeyDown",N=>N(r,gn(13,"Enter")))){r.input.lastIOSEnter=0;return}if(!h)if(n&&l instanceof ue&&!l.empty&&l.$head.sameParent(l.$anchor)&&!r.composing&&!(a.sel&&a.sel.anchor!=a.sel.head))h={start:l.from,endA:l.to,endB:l.to};else{if(a.sel){let N=Ca(r,r.state.doc,a.sel);N&&!N.eq(r.state.selection)&&r.dispatch(r.state.tr.setSelection(N))}return}if(ze&&r.cursorWrapper&&a.sel&&a.sel.anchor==r.cursorWrapper.deco.from&&a.sel.head==a.sel.anchor){let N=h.endB-h.start;a.sel={anchor:a.sel.anchor+N,head:a.sel.anchor+N}}r.input.domChangeCount++,r.state.selection.from<r.state.selection.to&&h.start==h.endB&&r.state.selection instanceof ue&&(h.start>r.state.selection.from&&h.start<=r.state.selection.from+2&&r.state.selection.from>=a.from?h.start=r.state.selection.from:h.endA<r.state.selection.to&&h.endA>=r.state.selection.to-2&&r.state.selection.to<=a.to&&(h.endB+=r.state.selection.to-h.endA,h.endA=r.state.selection.to)),qe&&Qt<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>a.from&&a.doc.textBetween(h.start-a.from-1,h.start-a.from+1)=="  "&&(h.start--,h.endA--,h.endB--);let p=a.doc.resolveNoCache(h.start-a.from),m=a.doc.resolveNoCache(h.endB-a.from),y=c.resolve(h.start),g=p.sameParent(m)&&p.parent.inlineContent&&y.end()>=h.endA,b;if((lr&&r.input.lastIOSEnter>Date.now()-225&&(!g||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!g&&p.pos<a.doc.content.size&&(b=ae.findFrom(a.doc.resolve(p.pos+1),1,!0))&&b.head==m.pos)&&r.someProp("handleKeyDown",N=>N(r,gn(13,"Enter")))){r.input.lastIOSEnter=0;return}if(r.state.selection.anchor>h.start&&Cp(c,h.start,h.endA,p,m)&&r.someProp("handleKeyDown",N=>N(r,gn(8,"Backspace")))){dt&&ze&&r.domObserver.suppressSelectionUpdates();return}ze&&dt&&h.endB==h.start&&(r.input.lastAndroidDelete=Date.now()),dt&&!g&&p.start()!=m.start()&&m.parentOffset==0&&p.depth==m.depth&&a.sel&&a.sel.anchor==a.sel.head&&a.sel.head==h.endA&&(h.endB-=2,m=a.doc.resolveNoCache(h.endB-a.from),setTimeout(()=>{r.someProp("handleKeyDown",function(N){return N(r,gn(13,"Enter"))})},20));let v=h.start,x=h.endA,T,P,Q;if(g){if(p.pos==m.pos)qe&&Qt<=11&&p.parentOffset==0&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ft(r),20)),T=r.state.tr.delete(v,x),P=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(Q=wp(p.parent.content.cut(p.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,h.endA-y.start()))))T=r.state.tr,Q.type=="add"?T.addMark(v,x,Q.mark):T.removeMark(v,x,Q.mark);else if(p.parent.child(p.index()).isText&&p.index()==m.index()-(m.textOffset?0:1)){let N=p.parent.textBetween(p.parentOffset,m.parentOffset);if(r.someProp("handleTextInput",S=>S(r,v,x,N)))return;T=r.state.tr.insertText(N,v,x)}}if(T||(T=r.state.tr.replace(v,x,a.doc.slice(h.start-a.from,h.endB-a.from))),a.sel){let N=Ca(r,T.doc,a.sel);N&&!(ze&&dt&&r.composing&&N.empty&&(h.start!=h.endB||r.input.lastAndroidDelete<Date.now()-100)&&(N.head==v||N.head==T.mapping.map(x)-1)||qe&&N.empty&&N.head==v)&&T.setSelection(N)}P&&T.ensureMarks(P),r.dispatch(T.scrollIntoView())}function Ca(r,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:jo(r,e.resolve(t.anchor),e.resolve(t.head))}function wp(r,e){let t=r.firstChild.marks,n=e.firstChild.marks,i=t,s=n,o,l,a;for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);for(let u=0;u<t.length;u++)s=t[u].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(A.from(c).eq(r))return{mark:l,type:o}}function Cp(r,e,t,n,i){if(!n.parent.isTextblock||t-e<=i.pos-n.pos||so(n,!0,!1)<i.pos)return!1;let s=r.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=r.resolve(so(s,!0,!0));return!o.parent.isTextblock||o.pos>t||so(o,!0,!1)<t?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function so(r,e,t){let n=r.depth,i=e?r.end():r.pos;for(;n>0&&(e||r.indexAfter(n)==r.node(n).childCount);)n--,i++,e=!1;if(t){let s=r.node(n).maybeChild(r.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Sp(r,e,t,n,i){let s=r.findDiffStart(e,t);if(s==null)return null;let{a:o,b:l}=r.findDiffEnd(e,t+r.size,t+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));n-=o+a-s}if(o<s&&r.size<e.size){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}class Ap{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new qh,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Oa),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ta(this),Aa(this),this.nodeViews=Ma(this),this.docView=ua(this.state.doc,Sa(this),io(this),this.dom,this),this.domObserver=new Dp(this,(n,i,s,o)=>xp(this,n,i,s,o)),this.domObserver.start(),Gh(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ao(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Oa),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let n=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(Sc(this),s=!0),this.state=e;let o=n.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let d=Ma(this);Mp(d,this.nodeViews)&&(this.nodeViews=d,i=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ao(this),this.editable=Ta(this),Aa(this);let l=io(this),a=Sa(this),c=n.plugins!=e.plugins&&!n.doc.eq(e.doc)?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,a,l);(u||!e.selection.eq(n.selection))&&(s=!0);let f=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&hh(this);if(s){this.domObserver.stop();let d=u&&(qe||ze)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&Tp(n.selection,e.selection);if(u){let h=ze?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,a,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ua(e.doc,a,l,this.dom,this)),h&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Ph(this))?Ft(this,d):(hc(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&ph(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof X){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&ia(this,t.getBoundingClientRect(),e)}else ia(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let n=this.directPlugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let n=this.state.plugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}}someProp(e,t){let n=this._props&&this._props[e],i;if(n!=null&&(i=t?t(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=t?t(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=t?t(l):l))return i}}hasFocus(){if(qe){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&mh(this.dom),Ft(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}posAtCoords(e){return vh(this,e)}coordsAtPos(e,t=1){return sc(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let i=this.docView.posFromDOM(e,t,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return Ch(this,t||this.state,e)}pasteHTML(e,t){return Jr(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Jr(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(Yh(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],io(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Qh(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Ve&&this.root.nodeType===11&&ah(this.dom.ownerDocument)==this.dom?vp(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Sa(r){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(r.editable),e.translate="no",r.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(r.state)),t)for(let n in t)n=="class"&&(e.class+=" "+t[n]),n=="style"?e.style=(e.style?e.style+";":"")+t[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(t[n]))}),[ht.node(0,r.state.doc.content.size,e)]}function Aa(r){if(r.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),r.cursorWrapper={dom:e,deco:ht.widget(r.state.selection.head,e,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function Ta(r){return!r.someProp("editable",e=>e(r.state)===!1)}function Tp(r,e){let t=Math.min(r.$anchor.sharedDepth(r.head),e.$anchor.sharedDepth(e.head));return r.$anchor.start(t)!=e.$anchor.start(t)}function Ma(r){let e=Object.create(null);function t(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return r.someProp("nodeViews",t),r.someProp("markViews",t),e}function Mp(r,e){let t=0,n=0;for(let i in r){if(r[i]!=e[i])return!0;t++}for(let i in e)n++;return t!=n}function Oa(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var sn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Mi={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},_a=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),Op=typeof navigator<"u"&&/Mac/.test(navigator.platform),_p=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Np=Op||_a&&+_a[1]<57;for(var Fe=0;Fe<10;Fe++)sn[48+Fe]=sn[96+Fe]=String(Fe);for(var Fe=1;Fe<=24;Fe++)sn[Fe+111]="F"+Fe;for(var Fe=65;Fe<=90;Fe++)sn[Fe]=String.fromCharCode(Fe+32),Mi[Fe]=String.fromCharCode(Fe);for(var oo in sn)Mi.hasOwnProperty(oo)||(Mi[oo]=sn[oo]);function Fp(r){var e=Np&&(r.ctrlKey||r.altKey||r.metaKey)||_p&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?Mi:sn)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Bp=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Ip(r){let e=r.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let n,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))Bp?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return n&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function $p(r){let e=Object.create(null);for(let t in r)e[Ip(t)]=r[t];return e}function lo(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}function Rp(r){return new Dt({props:{handleKeyDown:Pp(r)}})}function Pp(r){let e=$p(r);return function(t,n){let i=Fp(n),s=i.length==1&&i!=" ",o,l=e[lo(i,n,!s)];if(l&&l(t.state,t.dispatch,t))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=sn[n.keyCode])&&o!=i){let a=e[lo(o,n,!0)];if(a&&a(t.state,t.dispatch,t))return!0}else if(s&&n.shiftKey){let a=e[lo(i,n,!0)];if(a&&a(t.state,t.dispatch,t))return!0}return!1}}const Lp=(r,e)=>r.selection.empty?!1:(e&&e(r.tr.deleteSelection().scrollIntoView()),!0);function zp(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}const Vp=(r,e,t)=>{let n=zp(r,t);if(!n)return!1;let i=_c(n);if(!i){let o=n.blockRange(),l=o&&mr(o);return l==null?!1:(e&&e(r.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&Bc(r,i,e))return!0;if(n.parent.content.size==0&&(ur(s,"end")||X.isSelectable(s))){let o=Lo(r.doc,n.before(),n.after(),L.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=r.tr.step(o);l.setSelection(ur(s,"end")?ae.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):X.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(r.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function ur(r,e,t=!1){for(let n=r;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}const Hp=(r,e,t)=>{let{$head:n,empty:i}=r.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("backward",r):n.parentOffset>0)return!1;s=_c(n)}let o=s&&s.nodeBefore;return!o||!X.isSelectable(o)?!1:(e&&e(r.tr.setSelection(X.create(r.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function _c(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function jp(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}const Up=(r,e,t)=>{let n=jp(r,t);if(!n)return!1;let i=Nc(n);if(!i)return!1;let s=i.nodeAfter;if(Bc(r,i,e))return!0;if(n.parent.content.size==0&&(ur(s,"start")||X.isSelectable(s))){let o=Lo(r.doc,n.before(),n.after(),L.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=r.tr.step(o);l.setSelection(ur(s,"start")?ae.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):X.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(r.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Wp=(r,e,t)=>{let{$head:n,empty:i}=r.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("forward",r):n.parentOffset<n.parent.content.size)return!1;s=Nc(n)}let o=s&&s.nodeAfter;return!o||!X.isSelectable(o)?!1:(e&&e(r.tr.setSelection(X.create(r.doc,s.pos)).scrollIntoView()),!0)};function Nc(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){let t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}const Kp=(r,e)=>{let t=r.selection,n=t instanceof X,i;if(n){if(t.node.isTextblock||!an(r.doc,t.from))return!1;i=t.from}else if(i=Ku(r.doc,t.from,-1),i==null)return!1;if(e){let s=r.tr.join(i);n&&s.setSelection(X.create(s.doc,i-r.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Jp=(r,e)=>{let t=r.selection,n;if(t instanceof X){if(t.node.isTextblock||!an(r.doc,t.to))return!1;n=t.to}else if(n=Ku(r.doc,t.to,1),n==null)return!1;return e&&e(r.tr.join(n).scrollIntoView()),!0},qp=(r,e)=>{let{$from:t,$to:n}=r.selection,i=t.blockRange(n),s=i&&mr(i);return s==null?!1:(e&&e(r.tr.lift(i,s).scrollIntoView()),!0)},Gp=(r,e)=>{let{$head:t,$anchor:n}=r.selection;return!t.parent.type.spec.code||!t.sameParent(n)?!1:(e&&e(r.tr.insertText(`
`).scrollIntoView()),!0)};function Fc(r){for(let e=0;e<r.edgeCount;e++){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Yp=(r,e)=>{let{$head:t,$anchor:n}=r.selection;if(!t.parent.type.spec.code||!t.sameParent(n))return!1;let i=t.node(-1),s=t.indexAfter(-1),o=Fc(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=t.after(),a=r.tr.replaceWith(l,l,o.createAndFill());a.setSelection(ae.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},Xp=(r,e)=>{let t=r.selection,{$from:n,$to:i}=t;if(t instanceof pt||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=Fc(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,l=r.tr.insert(o,s.createAndFill());l.setSelection(ue.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},Qp=(r,e)=>{let{$cursor:t}=r.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Zn(r.doc,s))return e&&e(r.tr.split(s).scrollIntoView()),!0}let n=t.blockRange(),i=n&&mr(n);return i==null?!1:(e&&e(r.tr.lift(n,i).scrollIntoView()),!0)},Zp=(r,e)=>{let{$from:t,to:n}=r.selection,i,s=t.sharedDepth(n);return s==0?!1:(i=t.before(s),e&&e(r.tr.setSelection(X.create(r.doc,i))),!0)};function em(r,e,t){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(t&&t(r.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||an(r.doc,e.pos))?!1:(t&&t(r.tr.clearIncompatible(e.pos,n.type,n.contentMatchAt(n.childCount)).join(e.pos).scrollIntoView()),!0)}function Bc(r,e,t){let n=e.nodeBefore,i=e.nodeAfter,s,o;if(n.type.spec.isolating||i.type.spec.isolating)return!1;if(em(r,e,t))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(s=(o=n.contentMatchAt(n.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(t){let f=e.pos+i.nodeSize,d=A.empty;for(let m=s.length-1;m>=0;m--)d=A.from(s[m].create(null,d));d=A.from(n.copy(d));let h=r.tr.step(new Ae(e.pos-1,f,e.pos,f,new L(d,1,0),s.length,!0)),p=f+2*s.length;an(h.doc,p)&&h.join(p),t(h.scrollIntoView())}return!0}let a=ae.findFrom(e,1),c=a&&a.$from.blockRange(a.$to),u=c&&mr(c);if(u!=null&&u>=e.depth)return t&&t(r.tr.lift(c,u).scrollIntoView()),!0;if(l&&ur(i,"start",!0)&&ur(n,"end")){let f=n,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(f.canReplace(f.childCount,f.childCount,h.content)){if(t){let m=A.empty;for(let g=d.length-1;g>=0;g--)m=A.from(d[g].copy(m));let y=r.tr.step(new Ae(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new L(m,d.length,0),0,!0));t(y.scrollIntoView())}return!0}}return!1}function Ic(r){return function(e,t){let n=e.selection,i=r<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(ue.create(e.doc,r<0?i.start(s):i.end(s)))),!0):!1}}const tm=Ic(-1),nm=Ic(1);function rm(r,e=null){return function(t,n){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),l=o&&Po(o,r,e);return l?(n&&n(t.tr.wrap(o,l).scrollIntoView()),!0):!1}}function Na(r,e=null){return function(t,n){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=t.selection.ranges[s];t.doc.nodesBetween(o,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(r,e)))if(a.type==r)i=!0;else{let u=t.doc.resolve(c),f=u.index();i=u.parent.canReplaceWith(f,f+1,r)}})}if(!i)return!1;if(n){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=t.selection.ranges[o];s.setBlockType(l,a,r,e)}n(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function im(r,e=null){return function(t,n){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),l=!1,a=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(r)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=t.doc.resolve(o.start-2);a=new Ei(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new Ei(i,t.doc.resolve(s.end(o.depth)),o.depth)),l=!0}let c=Po(a,r,e,o);return c?(n&&n(sm(t.tr,o,c,l,r).scrollIntoView()),!0):!1}}function sm(r,e,t,n,i){let s=A.empty;for(let u=t.length-1;u>=0;u--)s=A.from(t[u].type.create(t[u].attrs,s));r.step(new Ae(e.start-(n?2:0),e.end,e.start,e.end,new L(s,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==i&&(o=u+1);let l=t.length-o,a=e.start+t.length-(n?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,d=!0;u<f;u++,d=!1)!d&&Zn(r.doc,a,l)&&(r.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return r}function om(r){return function(e,t){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==r);return s?t?n.node(s.depth-1).type==r?lm(e,t,r,s):am(e,t,s):!0:!1}}function lm(r,e,t,n){let i=r.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Ae(s-1,o,s,o,new L(A.from(t.create(null,n.parent.copy())),1,0),1,!0)),n=new Ei(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const l=mr(n);if(l==null)return!1;i.lift(n,l);let a=i.mapping.map(s,-1)-1;return an(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function am(r,e,t){let n=r.tr,i=t.parent;for(let h=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)h-=i.child(p).nodeSize,n.delete(h-1,h+1);let s=n.doc.resolve(t.start),o=s.nodeAfter;if(n.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,a=t.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(l?0:1),u+1,o.content.append(a?A.empty:A.from(i))))return!1;let f=s.pos,d=f+o.nodeSize;return n.step(new Ae(f-(l?1:0),d+(a?1:0),f+1,d-1,new L((l?A.empty:A.from(i.copy(A.empty))).append(a?A.empty:A.from(i.copy(A.empty))),l?0:1,a?0:1),l?0:1)),e(n.scrollIntoView()),!0}function um(r){return function(e,t){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==r);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=r)return!1;if(t){let c=a.lastChild&&a.lastChild.type==l.type,u=A.from(c?r.create():null),f=new L(A.from(r.create(null,A.from(l.type.create(null,u)))),c?3:1,0),d=s.start,h=s.end;t(e.tr.step(new Ae(d-(c?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}var cm=Object.defineProperty,$c=(r,e)=>{for(var t in e)cm(r,t,{get:e[t],enumerable:!0})};function ms(r){const{state:e,transaction:t}=r;let{selection:n}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=t.selection,i=t.doc,s=t.storedMarks,t}}}var gs=class{constructor(r){this.editor=r.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=r.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:r,editor:e,state:t}=this,{view:n}=e,{tr:i}=t,s=this.buildProps(i);return Object.fromEntries(Object.entries(r).map(([o,l])=>[o,(...c)=>{const u=l(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(r,e=!0){const{rawCommands:t,editor:n,state:i}=this,{view:s}=n,o=[],l=!!r,a=r||i.tr,c=()=>(!l&&e&&!a.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(a),o.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(t).map(([f,d])=>[f,(...p)=>{const m=this.buildProps(a,e),y=d(...p)(m);return o.push(y),u}])),run:c};return u}createCan(r){const{rawCommands:e,state:t}=this,n=!1,i=r||t.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>a(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(r,e=!0){const{rawCommands:t,editor:n,state:i}=this,{view:s}=n;i.storedMarks&&r.setStoredMarks(i.storedMarks);const o={tr:r,editor:n,view:s,state:ms({state:i,transaction:r}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(r),can:()=>this.createCan(r),get commands(){return Object.fromEntries(Object.entries(t).map(([l,a])=>[l,(...c)=>a(...c)(o)]))}};return o}},fm=class{constructor(){this.callbacks={}}on(r,e){return this.callbacks[r]||(this.callbacks[r]=[]),this.callbacks[r].push(e),this}emit(r,...e){const t=this.callbacks[r];return t&&t.forEach(n=>n.apply(this,e)),this}off(r,e){const t=this.callbacks[r];return t&&(e?this.callbacks[r]=t.filter(n=>n!==e):delete this.callbacks[r]),this}removeAllListeners(){this.callbacks={}}};function z(r,e,t){return r.config[e]===void 0&&r.parent?z(r.parent,e,t):typeof r.config[e]=="function"?r.config[e].bind({...t,parent:r.parent?z(r.parent,e,t):null}):r.config[e]}function ys(r){const e=r.filter(i=>i.type==="extension"),t=r.filter(i=>i.type==="node"),n=r.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:n}}function Rc(r){const e=[],{nodeExtensions:t,markExtensions:n}=ys(r),i=[...t,...n],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return r.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=z(o,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...s,...h}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=z(o,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,f])=>{const d={...s,...f};f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function Te(r,e){if(typeof r=="string"){if(!e.nodes[r])throw Error(`There is no node type named '${r}'. Maybe you forgot to add the extension?`);return e.nodes[r]}return r}function lt(...r){return r.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}i==="class"?n[i]=[n[i],s].join(" "):i==="style"?n[i]=[n[i],s].join("; "):n[i]=s}),n},{})}function To(r,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(r.attrs)||{}:{[t.name]:r.attrs[t.name]}).reduce((t,n)=>lt(t,n),{})}function Pc(r){return typeof r=="function"}function re(r,e=void 0,...t){return Pc(r)?e?r.bind(e)(...t):r(...t):r}function dm(r={}){return Object.keys(r).length===0&&r.constructor===Object}function hm(r){return typeof r!="string"?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):r==="true"?!0:r==="false"?!1:r}function Fa(r,e){return r.style?r:{...r,getAttrs:t=>{const n=r.getAttrs?r.getAttrs(t):r.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(t):hm(t.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...n,...i}}}}function Ba(r){return Object.fromEntries(Object.entries(r).filter(([e,t])=>e==="attrs"&&dm(t)?!1:t!=null))}function pm(r){var e;const t=Rc(r),{nodeExtensions:n,markExtensions:i}=ys(r),s=(e=n.find(a=>z(a,"topNode")))==null?void 0:e.name,o=Object.fromEntries(n.map(a=>{const c=t.filter(y=>y.type===a.name),u={name:a.name,options:a.options,storage:a.storage},f=r.reduce((y,g)=>{const b=z(g,"extendNodeSchema",u);return{...y,...b?b(a):{}}},{}),d=Ba({...f,content:re(z(a,"content",u)),marks:re(z(a,"marks",u)),group:re(z(a,"group",u)),inline:re(z(a,"inline",u)),atom:re(z(a,"atom",u)),selectable:re(z(a,"selectable",u)),draggable:re(z(a,"draggable",u)),code:re(z(a,"code",u)),defining:re(z(a,"defining",u)),isolating:re(z(a,"isolating",u)),attrs:Object.fromEntries(c.map(y=>{var g;return[y.name,{default:(g=y==null?void 0:y.attribute)==null?void 0:g.default}]}))}),h=re(z(a,"parseHTML",u));h&&(d.parseDOM=h.map(y=>Fa(y,c)));const p=z(a,"renderHTML",u);p&&(d.toDOM=y=>p({node:y,HTMLAttributes:To(y,c)}));const m=z(a,"renderText",u);return m&&(d.toText=m),[a.name,d]})),l=Object.fromEntries(i.map(a=>{const c=t.filter(m=>m.type===a.name),u={name:a.name,options:a.options,storage:a.storage},f=r.reduce((m,y)=>{const g=z(y,"extendMarkSchema",u);return{...m,...g?g(a):{}}},{}),d=Ba({...f,inclusive:re(z(a,"inclusive",u)),excludes:re(z(a,"excludes",u)),group:re(z(a,"group",u)),spanning:re(z(a,"spanning",u)),code:re(z(a,"code",u)),attrs:Object.fromEntries(c.map(m=>{var y;return[m.name,{default:(y=m==null?void 0:m.attribute)==null?void 0:y.default}]}))}),h=re(z(a,"parseHTML",u));h&&(d.parseDOM=h.map(m=>Fa(m,c)));const p=z(a,"renderHTML",u);return p&&(d.toDOM=m=>p({mark:m,HTMLAttributes:To(m,c)})),[a.name,d]}));return new Cd({topNode:s,nodes:o,marks:l})}function ao(r,e){return e.nodes[r]||e.marks[r]||null}function Ia(r,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===r.name):e}var mm=(r,e=500)=>{let t="";const n=r.parentOffset;return r.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)==null?void 0:c.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";t+=u.slice(0,Math.max(0,n-s))}),t};function Yo(r){return Object.prototype.toString.call(r)==="[object RegExp]"}var Xo=class{constructor(r){this.find=r.find,this.handler=r.handler}},gm=(r,e)=>{if(Yo(e))return e.exec(r);const t=e(r);if(!t)return null;const n=[t.text];return n.index=t.index,n.input=r,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(t.replaceWith)),n};function uo(r){var e;const{editor:t,from:n,to:i,text:s,rules:o,plugin:l}=r,{view:a}=t;if(a.composing)return!1;const c=a.state.doc.resolve(n);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const f=mm(c)+s;return o.forEach(d=>{if(u)return;const h=gm(f,d.find);if(!h)return;const p=a.state.tr,m=ms({state:a.state,transaction:p}),y={from:n-(h[0].length-s.length),to:i},{commands:g,chain:b,can:v}=new gs({editor:t,state:m});d.handler({state:m,range:y,match:h,commands:g,chain:b,can:v})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:n,to:i,text:s}),a.dispatch(p),u=!0)}),u}function ym(r){const{editor:e,rules:t}=r,n=new Dt({state:{init(){return null},apply(i,s){const o=i.getMeta(n);return o||(i.selectionSet||i.docChanged?null:s)}},props:{handleTextInput(i,s,o,l){return uo({editor:e,from:s,to:o,text:l,rules:t,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&uo({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?uo({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:n}):!1}},isInputRules:!0});return n}function Dm(r){return typeof r=="number"}var bm=class{constructor(r){this.find=r.find,this.handler=r.handler}},vm=(r,e)=>{if(Yo(e))return[...r.matchAll(e)];const t=e(r);return t?t.map(n=>{const i=[n.text];return i.index=n.index,i.input=r,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(n.replaceWith)),i}):[]};function km(r){const{editor:e,state:t,from:n,to:i,rule:s}=r,{commands:o,chain:l,can:a}=new gs({editor:e,state:t}),c=[];return t.doc.nodesBetween(n,i,(f,d)=>{if(!f.isTextblock||f.type.spec.code)return;const h=Math.max(n,d),p=Math.min(i,d+f.content.size),m=f.textBetween(h-d,p-d,void 0,"￼");vm(m,s.find).forEach(g=>{if(g.index===void 0)return;const b=h+g.index+1,v=b+g[0].length,x={from:t.tr.mapping.map(b),to:t.tr.mapping.map(v)},T=s.handler({state:t,range:x,match:g,commands:o,chain:l,can:a});c.push(T)})}),c.every(f=>f!==null)}function Em(r){const{editor:e,rules:t}=r;let n=null,i=!1,s=!1;return t.map(l=>new Dt({view(a){const c=u=>{var f;n=(f=a.dom.parentElement)!=null&&f.contains(u.target)?a.dom.parentElement:null};return window.addEventListener("dragstart",c),{destroy(){window.removeEventListener("dragstart",c)}}},props:{handleDOMEvents:{drop:a=>(s=n===a.dom.parentElement,!1),paste:(a,c)=>{var u;const f=(u=c.clipboardData)==null?void 0:u.getData("text/html");return i=!!(f!=null&&f.includes("data-pm-slice")),!1}}},appendTransaction:(a,c,u)=>{const f=a[0],d=f.getMeta("uiEvent")==="paste"&&!i,h=f.getMeta("uiEvent")==="drop"&&!s;if(!d&&!h)return;const p=c.doc.content.findDiffStart(u.doc.content),m=c.doc.content.findDiffEnd(u.doc.content);if(!Dm(p)||!m||p===m.b)return;const y=u.tr,g=ms({state:u,transaction:y});if(!(!km({editor:e,state:g,from:Math.max(p-1,0),to:m.b-1,rule:l})||!y.steps.length))return y}}))}function xm(r){const e=r.filter((t,n)=>r.indexOf(t)!==n);return[...new Set(e)]}var Mr=class{constructor(r,e){this.splittableMarks=[],this.editor=e,this.extensions=Mr.resolve(r),this.schema=pm(this.extensions),this.extensions.forEach(t=>{var n;this.editor.extensionStorage[t.name]=t.storage;const i={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:ao(t.name,this.schema)};t.type==="mark"&&((n=re(z(t,"keepOnSplit",i)))==null||n)&&this.splittableMarks.push(t.name);const s=z(t,"onBeforeCreate",i);s&&this.editor.on("beforeCreate",s);const o=z(t,"onCreate",i);o&&this.editor.on("create",o);const l=z(t,"onUpdate",i);l&&this.editor.on("update",l);const a=z(t,"onSelectionUpdate",i);a&&this.editor.on("selectionUpdate",a);const c=z(t,"onTransaction",i);c&&this.editor.on("transaction",c);const u=z(t,"onFocus",i);u&&this.editor.on("focus",u);const f=z(t,"onBlur",i);f&&this.editor.on("blur",f);const d=z(t,"onDestroy",i);d&&this.editor.on("destroy",d)})}static resolve(r){const e=Mr.sort(Mr.flatten(r)),t=xm(e.map(n=>n.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}static flatten(r){return r.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},n=z(e,"addExtensions",t);return n?[e,...this.flatten(n())]:e}).flat(10)}static sort(r){return r.sort((t,n)=>{const i=z(t,"priority")||100,s=z(n,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((r,e)=>{const t={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ao(e.name,this.schema)},n=z(e,"addCommands",t);return n?{...r,...n()}:r},{})}get plugins(){const{editor:r}=this,e=Mr.sort([...this.extensions].reverse()),t=[],n=[],i=e.map(s=>{const o={name:s.name,options:s.options,storage:s.storage,editor:r,type:ao(s.name,this.schema)},l=[],a=z(s,"addKeyboardShortcuts",o);let c={};if(s.type==="mark"&&s.config.exitable&&(c.ArrowRight=()=>on.handleExit({editor:r,mark:s})),a){const p=Object.fromEntries(Object.entries(a()).map(([m,y])=>[m,()=>y({editor:r})]));c={...c,...p}}const u=Rp(c);l.push(u);const f=z(s,"addInputRules",o);Ia(s,r.options.enableInputRules)&&f&&t.push(...f());const d=z(s,"addPasteRules",o);Ia(s,r.options.enablePasteRules)&&d&&n.push(...d());const h=z(s,"addProseMirrorPlugins",o);if(h){const p=h();l.push(...p)}return l}).flat();return[ym({editor:r,rules:t}),...Em({editor:r,rules:n}),...i]}get attributes(){return Rc(this.extensions)}get nodeViews(){const{editor:r}=this,{nodeExtensions:e}=ys(this.extensions);return Object.fromEntries(e.filter(t=>!!z(t,"addNodeView")).map(t=>{const n=this.attributes.filter(l=>l.type===t.name),i={name:t.name,options:t.options,storage:t.storage,editor:r,type:Te(t.name,this.schema)},s=z(t,"addNodeView",i);if(!s)return[];const o=(l,a,c,u)=>{const f=To(l,n);return s()({editor:r,node:l,getPos:c,decorations:u,HTMLAttributes:f,extension:t})};return[t.name,o]}))}},Lc={};$c(Lc,{ClipboardTextSerializer:()=>Cm,Commands:()=>Hg,Editable:()=>jg,FocusEvents:()=>Ug,Keymap:()=>Wg,Tabindex:()=>Kg});function wm(r){return Object.prototype.toString.call(r).slice(8,-1)}function co(r){return wm(r)!=="Object"?!1:r.constructor===Object&&Object.getPrototypeOf(r)===Object.prototype}function Ds(r,e){const t={...r};return co(r)&&co(e)&&Object.keys(e).forEach(n=>{co(e[n])?n in r?t[n]=Ds(r[n],e[n]):Object.assign(t,{[n]:e[n]}):Object.assign(t,{[n]:e[n]})}),t}var $t=class{constructor(r={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...r},this.name=this.config.name,r.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=re(z(this,"addOptions",{name:this.name}))),this.storage=re(z(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(r={}){return new $t(r)}configure(r={}){const e=this.extend();return e.options=Ds(this.options,r),e.storage=re(z(e,"addStorage",{name:e.name,options:e.options})),e}extend(r={}){const e=new $t(r);return e.parent=this,this.child=e,e.name=r.name?r.name:e.parent.name,r.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=re(z(e,"addOptions",{name:e.name})),e.storage=re(z(e,"addStorage",{name:e.name,options:e.options})),e}};function zc(r,e,t){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let l="",a=!0;return r.nodesBetween(n,i,(c,u,f,d)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!a&&(l+=s,a=!0),f&&(l+=p({node:c,pos:u,parent:f,index:d,range:e}))):c.isText?(l+=(h=c==null?void 0:c.text)==null?void 0:h.slice(Math.max(n,u)-u,i-u),a=!1):c.isBlock&&!a&&(l+=s,a=!0)}),l}function Vc(r){return Object.fromEntries(Object.entries(r.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}var Cm=$t.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Dt({key:new un("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:r}=this,{state:e,schema:t}=r,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),l=Math.max(...s.map(u=>u.$to.pos)),a=Vc(t);return zc(n,{from:o,to:l},{textSerializers:a})}}})]}}),Hc={};$c(Hc,{blur:()=>Sm,clearContent:()=>Am,clearNodes:()=>Tm,command:()=>Mm,createParagraphNear:()=>Om,deleteCurrentNode:()=>_m,deleteNode:()=>Nm,deleteRange:()=>Fm,deleteSelection:()=>Bm,enter:()=>Im,exitCode:()=>$m,extendMarkRange:()=>Pm,first:()=>Lm,focus:()=>zm,forEach:()=>Vm,insertContent:()=>Hm,insertContentAt:()=>Wm,joinBackward:()=>qm,joinDown:()=>Jm,joinForward:()=>Gm,joinUp:()=>Km,keyboardShortcut:()=>Xm,lift:()=>Qm,liftEmptyBlock:()=>Zm,liftListItem:()=>eg,newlineInCode:()=>tg,resetAttributes:()=>ng,scrollIntoView:()=>rg,selectAll:()=>ig,selectNodeBackward:()=>sg,selectNodeForward:()=>og,selectParentNode:()=>lg,selectTextblockEnd:()=>ag,selectTextblockStart:()=>ug,setContent:()=>cg,setMark:()=>wg,setMeta:()=>Cg,setNode:()=>Sg,setNodeSelection:()=>Ag,setTextSelection:()=>Tg,sinkListItem:()=>Mg,splitBlock:()=>Og,splitListItem:()=>_g,toggleList:()=>Ng,toggleMark:()=>Fg,toggleNode:()=>Bg,toggleWrap:()=>Ig,undoInputRule:()=>$g,unsetAllMarks:()=>Rg,unsetMark:()=>Pg,updateAttributes:()=>Lg,wrapIn:()=>zg,wrapInList:()=>Vg});var Sm=()=>({editor:r,view:e})=>(requestAnimationFrame(()=>{var t;r.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())==null||t.removeAllRanges())}),!0),Am=(r=!1)=>({commands:e})=>e.setContent("",r),Tm=()=>({state:r,tr:e,dispatch:t})=>{const{selection:n}=e,{ranges:i}=n;return t&&i.forEach(({$from:s,$to:o})=>{r.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(a)),d=c.resolve(u.map(a+l.nodeSize)),h=f.blockRange(d);if(!h)return;const p=mr(h);if(l.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Mm=r=>e=>r(e),Om=()=>({state:r,dispatch:e})=>Xp(r,e),_m=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,n=t.$anchor.node();if(n.content.size>0)return!1;const i=r.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const l=i.before(s),a=i.after(s);r.delete(l,a).scrollIntoView()}return!0}return!1},Nm=r=>({tr:e,state:t,dispatch:n})=>{const i=Te(r,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const a=s.before(o),c=s.after(o);e.delete(a,c).scrollIntoView()}return!0}return!1},Fm=r=>({tr:e,dispatch:t})=>{const{from:n,to:i}=r;return t&&e.delete(n,i),!0},Bm=()=>({state:r,dispatch:e})=>Lp(r,e),Im=()=>({commands:r})=>r.keyboardShortcut("Enter"),$m=()=>({state:r,dispatch:e})=>Yp(r,e);function Oi(r,e,t={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>t.strict?e[i]===r[i]:Yo(e[i])?e[i].test(r[i]):e[i]===r[i]):!0}function Mo(r,e,t={}){return r.find(n=>n.type===e&&Oi(n.attrs,t))}function Rm(r,e,t={}){return!!Mo(r,e,t)}function Qo(r,e,t={}){if(!r||!e)return;let n=r.parent.childAfter(r.parentOffset);if(r.parentOffset===n.offset&&n.offset!==0&&(n=r.parent.childBefore(r.parentOffset)),!n.node)return;const i=Mo([...n.node.marks],e,t);if(!i)return;let s=n.index,o=r.start()+n.offset,l=s+1,a=o+n.node.nodeSize;for(Mo([...n.node.marks],e,t);s>0&&i.isInSet(r.parent.child(s-1).marks);)s-=1,o-=r.parent.child(s).nodeSize;for(;l<r.parent.childCount&&Rm([...r.parent.child(l).marks],e,t);)a+=r.parent.child(l).nodeSize,l+=1;return{from:o,to:a}}function fn(r,e){if(typeof r=="string"){if(!e.marks[r])throw Error(`There is no mark type named '${r}'. Maybe you forgot to add the extension?`);return e.marks[r]}return r}var Pm=(r,e={})=>({tr:t,state:n,dispatch:i})=>{const s=fn(r,n.schema),{doc:o,selection:l}=t,{$from:a,from:c,to:u}=l;if(i){const f=Qo(a,s,e);if(f&&f.from<=c&&f.to>=u){const d=ue.create(o,f.from,f.to);t.setSelection(d)}}return!0},Lm=r=>e=>{const t=typeof r=="function"?r(e):r;for(let n=0;n<t.length;n+=1)if(t[n](e))return!0;return!1};function jc(r){return r instanceof ue}function vn(r=0,e=0,t=0){return Math.min(Math.max(r,e),t)}function Uc(r,e=null){if(!e)return null;const t=ae.atStart(r),n=ae.atEnd(r);if(e==="start"||e===!0)return t;if(e==="end")return n;const i=t.from,s=n.to;return e==="all"?ue.create(r,vn(0,i,s),vn(r.content.size,i,s)):ue.create(r,vn(e,i,s),vn(e,i,s))}function Zo(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var zm=(r=null,e={})=>({editor:t,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{Zo()&&n.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(n.hasFocus()&&r===null||r===!1)return!0;if(s&&r===null&&!jc(t.state.selection))return o(),!0;const l=Uc(i.doc,r)||t.state.selection,a=t.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Vm=(r,e)=>t=>r.every((n,i)=>e(n,{...t,index:i})),Hm=(r,e)=>({tr:t,commands:n})=>n.insertContentAt({from:t.selection.from,to:t.selection.to},r,e);function $a(r){const e=`<body>${r}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function _i(r,e,t){if(t={slice:!0,parseOptions:{},...t},typeof r=="object"&&r!==null)try{return Array.isArray(r)?A.fromArray(r.map(n=>e.nodeFromJSON(n))):e.nodeFromJSON(r)}catch(n){return console.warn("[tiptap warn]: Invalid content.","Passed value:",r,"Error:",n),_i("",e,t)}if(typeof r=="string"){const n=ir.fromSchema(e);return t.slice?n.parseSlice($a(r),t.parseOptions).content:n.parse($a(r),t.parseOptions)}return _i("",e,t)}function jm(r,e,t){const n=r.steps.length-1;if(n<e)return;const i=r.steps[n];if(!(i instanceof Pe||i instanceof Ae))return;const s=r.mapping.maps[n];let o=0;s.forEach((l,a,c,u)=>{o===0&&(o=u)}),r.setSelection(ae.near(r.doc.resolve(o),t))}var Um=r=>r.toString().startsWith("<"),Wm=(r,e,t)=>({tr:n,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=_i(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:l,to:a}=typeof r=="number"?{from:r,to:r}:r,c=!0,u=!0;if((Um(o)?o:[o]).forEach(d=>{d.check(),c=c?d.isText&&d.marks.length===0:!1,u=u?d.isBlock:!1}),l===a&&u){const{parent:d}=n.doc.resolve(l);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(l-=1,a+=1)}c?n.insertText(e,l,a):n.replaceWith(l,a,o),t.updateSelection&&jm(n,n.steps.length-1,-1)}return!0},Km=()=>({state:r,dispatch:e})=>Kp(r,e),Jm=()=>({state:r,dispatch:e})=>Jp(r,e),qm=()=>({state:r,dispatch:e})=>Vp(r,e),Gm=()=>({state:r,dispatch:e})=>Up(r,e);function Wc(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Ym(r){const e=r.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let n,i,s,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))Zo()||Wc()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return n&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}var Xm=r=>({editor:e,view:t,tr:n,dispatch:i})=>{const s=Ym(r).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,l))});return a==null||a.steps.forEach(c=>{const u=c.map(n.mapping);u&&i&&n.maybeStep(u)}),!0};function Gr(r,e,t={}){const{from:n,to:i,empty:s}=r.selection,o=e?Te(e,r.schema):null,l=[];r.doc.nodesBetween(n,i,(f,d)=>{if(f.isText)return;const h=Math.max(n,d),p=Math.min(i,d+f.nodeSize);l.push({node:f,from:h,to:p})});const a=i-n,c=l.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>Oi(f.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((f,d)=>f+d.to-d.from,0)>=a}var Qm=(r,e={})=>({state:t,dispatch:n})=>{const i=Te(r,t.schema);return Gr(t,i,e)?qp(t,n):!1},Zm=()=>({state:r,dispatch:e})=>Qp(r,e),eg=r=>({state:e,dispatch:t})=>{const n=Te(r,e.schema);return om(n)(e,t)},tg=()=>({state:r,dispatch:e})=>Gp(r,e);function bs(r,e){return e.nodes[r]?"node":e.marks[r]?"mark":null}function Ra(r,e){const t=typeof e=="string"?[e]:e;return Object.keys(r).reduce((n,i)=>(t.includes(i)||(n[i]=r[i]),n),{})}var ng=(r,e)=>({tr:t,state:n,dispatch:i})=>{let s=null,o=null;const l=bs(typeof r=="string"?r:r.name,n.schema);return l?(l==="node"&&(s=Te(r,n.schema)),l==="mark"&&(o=fn(r,n.schema)),i&&t.selection.ranges.forEach(a=>{n.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,Ra(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(f=>{o===f.type&&t.addMark(u,u+c.nodeSize,o.create(Ra(f.attrs,e)))})})}),!0):!1},rg=()=>({tr:r,dispatch:e})=>(e&&r.scrollIntoView(),!0),ig=()=>({tr:r,commands:e})=>e.setTextSelection({from:0,to:r.doc.content.size}),sg=()=>({state:r,dispatch:e})=>Hp(r,e),og=()=>({state:r,dispatch:e})=>Wp(r,e),lg=()=>({state:r,dispatch:e})=>Zp(r,e),ag=()=>({state:r,dispatch:e})=>nm(r,e),ug=()=>({state:r,dispatch:e})=>tm(r,e);function Kc(r,e,t={}){return _i(r,e,{slice:!1,parseOptions:t})}var cg=(r,e=!1,t={})=>({tr:n,editor:i,dispatch:s})=>{const{doc:o}=n,l=Kc(r,i.schema,t);return s&&n.replaceWith(0,o.content.size,l).setMeta("preventUpdate",!e),!0};function fg(r,e){const t=new Xu(r);return e.forEach(n=>{n.steps.forEach(i=>{t.step(i)})}),t}function dg(r){for(let e=0;e<r.edgeCount;e+=1){const{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function hg(r,e,t){const n=[];return r.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&n.push({node:i,pos:s})}),n}function pg(r,e){for(let t=r.depth;t>0;t-=1){const n=r.node(t);if(e(n))return{pos:t>0?r.before(t):0,start:r.start(t),depth:t,node:n}}}function el(r){return e=>pg(e.$from,r)}function mg(r,e){const t=wt.fromSchema(e).serializeFragment(r),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function gg(r,e){const t={from:0,to:r.content.size};return zc(r,t,e)}function Jc(r,e){const t=fn(e,r.schema),{from:n,to:i,empty:s}=r.selection,o=[];s?(r.storedMarks&&o.push(...r.storedMarks),o.push(...r.selection.$head.marks())):r.doc.nodesBetween(n,i,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===t.name);return l?{...l.attrs}:{}}function yg(r,e){const t=Te(e,r.schema),{from:n,to:i}=r.selection,s=[];r.doc.nodesBetween(n,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===t.name);return o?{...o.attrs}:{}}function qc(r,e){const t=bs(typeof e=="string"?e:e.name,r.schema);return t==="node"?yg(r,e):t==="mark"?Jc(r,e):{}}function Dg(r,e=JSON.stringify){const t={};return r.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function bg(r){const e=Dg(r);return e.length===1?e:e.filter((t,n)=>!e.filter((s,o)=>o!==n).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function vg(r){const{mapping:e,steps:t}=r,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,a)=>{o.push({from:l,to:a})});else{const{from:l,to:a}=t[s];if(l===void 0||a===void 0)return;o.push({from:l,to:a})}o.forEach(({from:l,to:a})=>{const c=e.slice(s).map(l,-1),u=e.slice(s).map(a),f=e.invert().map(c,-1),d=e.invert().map(u);n.push({oldRange:{from:f,to:d},newRange:{from:c,to:u}})})}),bg(n)}function Ni(r,e,t){const n=[];return r===e?t.resolve(r).marks().forEach(i=>{const s=t.resolve(r-1),o=Qo(s,i.type);o&&n.push({mark:i,...o})}):t.nodesBetween(r,e,(i,s)=>{n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}function Oo(r,e,t={}){const{empty:n,ranges:i}=r.selection,s=e?fn(e,r.schema):null;if(n)return!!(r.storedMarks||r.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>Oi(f.attrs,t,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;r.doc.nodesBetween(h,p,(m,y)=>{if(!m.isText&&!m.marks.length)return;const g=Math.max(h,y),b=Math.min(p,y+m.nodeSize),v=b-g;o+=v,l.push(...m.marks.map(x=>({mark:x,from:g,to:b})))})}),o===0)return!1;const a=l.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>Oi(f.mark.attrs,t,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),c=l.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,d)=>f+d.to-d.from,0);return(a>0?a+c:a)>=o}function kg(r,e,t={}){if(!e)return Gr(r,null,t)||Oo(r,null,t);const n=bs(e,r.schema);return n==="node"?Gr(r,e,t):n==="mark"?Oo(r,e,t):!1}function Pa(r,e){const{nodeExtensions:t}=ys(e),n=t.find(o=>o.name===r);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=re(z(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Eg(r){var e;const t=(e=r.type.createAndFill())==null?void 0:e.toJSON(),n=r.toJSON();return JSON.stringify(t)===JSON.stringify(n)}function xg(r,e,t){var n;const{selection:i}=e;let s=null;if(jc(i)&&(s=i.$cursor),s){const l=(n=r.storedMarks)!=null?n:s.marks();return!!t.isInSet(l)||!l.some(a=>a.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let c=l.depth===0?r.doc.inlineContent&&r.doc.type.allowsMarkType(t):!1;return r.doc.nodesBetween(l.pos,a.pos,(u,f,d)=>{if(c)return!1;if(u.isInline){const h=!d||d.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}var wg=(r,e={})=>({tr:t,state:n,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:l}=s,a=fn(r,n.schema);if(i)if(o){const c=Jc(n,a);t.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;n.doc.nodesBetween(u,f,(d,h)=>{const p=Math.max(h,u),m=Math.min(h+d.nodeSize,f);d.marks.find(g=>g.type===a)?d.marks.forEach(g=>{a===g.type&&t.addMark(p,m,a.create({...g.attrs,...e}))}):t.addMark(p,m,a.create(e))})});return xg(n,t,a)},Cg=(r,e)=>({tr:t})=>(t.setMeta(r,e),!0),Sg=(r,e={})=>({state:t,dispatch:n,chain:i})=>{const s=Te(r,t.schema);return s.isTextblock?i().command(({commands:o})=>Na(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>Na(s,e)(o,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Ag=r=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,i=vn(r,0,n.content.size),s=X.create(n,i);e.setSelection(s)}return!0},Tg=r=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,{from:i,to:s}=typeof r=="number"?{from:r,to:r}:r,o=ue.atStart(n).from,l=ue.atEnd(n).to,a=vn(i,o,l),c=vn(s,o,l),u=ue.create(n,a,c);e.setSelection(u)}return!0},Mg=r=>({state:e,dispatch:t})=>{const n=Te(r,e.schema);return um(n)(e,t)};function gi(r,e,t){return Object.fromEntries(Object.entries(t).filter(([n])=>{const i=r.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}function La(r,e){const t=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();if(t){const n=t.filter(i=>e==null?void 0:e.includes(i.type.name));r.tr.ensureMarks(n)}}var Og=({keepMarks:r=!0}={})=>({tr:e,state:t,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:a}=s,c=i.extensionManager.attributes,u=gi(c,l.node().type.name,l.node().attrs);if(s instanceof X&&s.node.isBlock)return!l.parentOffset||!Zn(o,l.pos)?!1:(n&&(r&&La(t,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;if(n){const f=a.parentOffset===a.parent.content.size;s instanceof ue&&e.deleteSelection();const d=l.depth===0?void 0:dg(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=f&&d?[{type:d,attrs:u}]:void 0,p=Zn(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&Zn(e.doc,e.mapping.map(l.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:u}]:void 0),p&&(e.split(e.mapping.map(l.pos),1,h),d&&!f&&!l.parentOffset&&l.parent.type!==d)){const m=e.mapping.map(l.before()),y=e.doc.resolve(m);l.node(-1).canReplaceWith(y.index(),y.index()+1,d)&&e.setNodeMarkup(e.mapping.map(l.before()),d)}r&&La(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},_g=r=>({tr:e,state:t,dispatch:n,editor:i})=>{var s;const o=Te(r,t.schema),{$from:l,$to:a}=t.selection,c=t.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(a))return!1;const u=l.node(-1);if(u.type!==o)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(n){let y=A.empty;const g=l.index(-1)?1:l.index(-2)?2:3;for(let Q=l.depth-g;Q>=l.depth-3;Q-=1)y=A.from(l.node(Q).copy(y));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,v=gi(f,l.node().type.name,l.node().attrs),x=((s=o.contentMatch.defaultType)==null?void 0:s.createAndFill(v))||void 0;y=y.append(A.from(o.createAndFill(null,x)||void 0));const T=l.before(l.depth-(g-1));e.replace(T,l.after(-b),new L(y,4-g,0));let P=-1;e.doc.nodesBetween(T,e.doc.content.size,(Q,N)=>{if(P>-1)return!1;Q.isTextblock&&Q.content.size===0&&(P=N+1)}),P>-1&&e.setSelection(ue.near(e.doc.resolve(P))),e.scrollIntoView()}return!0}const d=a.pos===l.end()?u.contentMatchAt(0).defaultType:null,h=gi(f,u.type.name,u.attrs),p=gi(f,l.node().type.name,l.node().attrs);e.delete(l.pos,a.pos);const m=d?[{type:o,attrs:h},{type:d,attrs:p}]:[{type:o,attrs:h}];return Zn(e.doc,l.pos,2)?(n&&e.split(l.pos,2,m).scrollIntoView(),!0):!1},za=(r,e)=>{const t=el(o=>o.type===e)(r.selection);if(!t)return!0;const n=r.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(n===void 0)return!0;const i=r.doc.nodeAt(n);return t.node.type===(i==null?void 0:i.type)&&an(r.doc,t.pos)&&r.join(t.pos),!0},Va=(r,e)=>{const t=el(o=>o.type===e)(r.selection);if(!t)return!0;const n=r.doc.resolve(t.start).after(t.depth);if(n===void 0)return!0;const i=r.doc.nodeAt(n);return t.node.type===(i==null?void 0:i.type)&&an(r.doc,n)&&r.join(n),!0},Ng=(r,e)=>({editor:t,tr:n,state:i,dispatch:s,chain:o,commands:l,can:a})=>{const{extensions:c}=t.extensionManager,u=Te(r,i.schema),f=Te(e,i.schema),{selection:d}=i,{$from:h,$to:p}=d,m=h.blockRange(p);if(!m)return!1;const y=el(g=>Pa(g.type.name,c))(d);if(m.depth>=1&&y&&m.depth-y.depth<=1){if(y.node.type===u)return l.liftListItem(f);if(Pa(y.node.type.name,c)&&u.validContent(y.node.content)&&s)return o().command(()=>(n.setNodeMarkup(y.pos,u),!0)).command(()=>za(n,u)).command(()=>Va(n,u)).run()}return o().command(()=>a().wrapInList(u)?!0:l.clearNodes()).wrapInList(u).command(()=>za(n,u)).command(()=>Va(n,u)).run()},Fg=(r,e={},t={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=fn(r,n.schema);return Oo(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Bg=(r,e,t={})=>({state:n,commands:i})=>{const s=Te(r,n.schema),o=Te(e,n.schema);return Gr(n,s,t)?i.setNode(o):i.setNode(s,t)},Ig=(r,e={})=>({state:t,commands:n})=>{const i=Te(r,t.schema);return Gr(t,i,e)?n.lift(i):n.wrapIn(i,e)},$g=()=>({state:r,dispatch:e})=>{const t=r.plugins;for(let n=0;n<t.length;n+=1){const i=t[n];let s;if(i.spec.isInputRules&&(s=i.getState(r))){if(e){const o=r.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){const a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,r.schema.text(s.text,a))}else o.delete(s.from,s.to)}return!0}}return!1},Rg=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,{empty:n,ranges:i}=t;return n||e&&i.forEach(s=>{r.removeMark(s.$from.pos,s.$to.pos)}),!0},Pg=(r,e={})=>({tr:t,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=t,a=fn(r,n.schema),{$from:c,empty:u,ranges:f}=l;if(!i)return!0;if(u&&o){let{from:d,to:h}=l;const p=(s=c.marks().find(y=>y.type===a))==null?void 0:s.attrs,m=Qo(c,a,p);m&&(d=m.from,h=m.to),t.removeMark(d,h,a)}else f.forEach(d=>{t.removeMark(d.$from.pos,d.$to.pos,a)});return t.removeStoredMark(a),!0},Lg=(r,e={})=>({tr:t,state:n,dispatch:i})=>{let s=null,o=null;const l=bs(typeof r=="string"?r:r.name,n.schema);return l?(l==="node"&&(s=Te(r,n.schema)),l==="mark"&&(o=fn(r,n.schema)),i&&t.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;n.doc.nodesBetween(c,u,(f,d)=>{s&&s===f.type&&t.setNodeMarkup(d,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(h=>{if(o===h.type){const p=Math.max(d,c),m=Math.min(d+f.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},zg=(r,e={})=>({state:t,dispatch:n})=>{const i=Te(r,t.schema);return rm(i,e)(t,n)},Vg=(r,e={})=>({state:t,dispatch:n})=>{const i=Te(r,t.schema);return im(i,e)(t,n)},Hg=$t.create({name:"commands",addCommands(){return{...Hc}}}),jg=$t.create({name:"editable",addProseMirrorPlugins(){return[new Dt({key:new un("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Ug=$t.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:r}=this;return[new Dt({key:new un("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{r.isFocused=!0;const n=r.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,t)=>{r.isFocused=!1;const n=r.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),Wg=$t.create({name:"keymap",addKeyboardShortcuts(){const r=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:f}=a,{pos:d,parent:h}=f,p=ae.atStart(c).from===d;return!u||!p||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:r,"Mod-Backspace":r,"Shift-Backspace":r,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":r,"Alt-Backspace":r,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Zo()||Wc()?s:i},addProseMirrorPlugins(){return[new Dt({key:new un("clearDocument"),appendTransaction:(r,e,t)=>{if(!(r.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,l=ae.atStart(e.doc).from,a=ae.atEnd(e.doc).to,c=s===l&&o===a,u=t.doc.textBetween(0,t.doc.content.size," "," ").length===0;if(i||!c||!u)return;const f=t.tr,d=ms({state:t,transaction:f}),{commands:h}=new gs({editor:this.editor,state:d});if(h.clearNodes(),!!f.steps.length)return f}})]}}),Kg=$t.create({name:"tabindex",addProseMirrorPlugins(){return[new Dt({key:new un("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Jg=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function qg(r,e){const t=document.querySelector("style[data-tiptap-style]");if(t!==null)return t;const n=document.createElement("style");return e&&n.setAttribute("nonce",e),n.setAttribute("data-tiptap-style",""),n.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(n),n}var Gg=class extends fm{constructor(r={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(r),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=qg(Jg,this.options.injectNonce))}setOptions(r={}){this.options={...this.options,...r},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(r,e=!0){this.setOptions({editable:r}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(r,e){const t=Pc(e)?e(r,[...this.state.plugins]):[...this.state.plugins,r],n=this.state.reconfigure({plugins:t});this.view.updateState(n)}unregisterPlugin(r){if(this.isDestroyed)return;const e=typeof r=="string"?`${r}$`:r.key,t=this.state.reconfigure({plugins:this.state.plugins.filter(n=>!n.key.startsWith(e))});this.view.updateState(t)}createExtensionManager(){const e=[...this.options.enableCoreExtensions?Object.values(Lc):[],...this.options.extensions].filter(t=>["extension","node","mark"].includes(t==null?void 0:t.type));this.extensionManager=new Mr(e,this)}createCommandManager(){this.commandManager=new gs({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const r=Kc(this.options.content,this.schema,this.options.parseOptions),e=Uc(r,this.options.autofocus);this.view=new Ap(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Kn.create({doc:r,selection:e||void 0})});const t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.createNodeViews();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(r){this.isCapturingTransaction=!0,r(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(r){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=r;return}r.steps.forEach(s=>{var o;return(o=this.capturedTransaction)==null?void 0:o.step(s)});return}const e=this.state.apply(r),t=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:r}),t&&this.emit("selectionUpdate",{editor:this,transaction:r});const n=r.getMeta("focus"),i=r.getMeta("blur");n&&this.emit("focus",{editor:this,event:n.event,transaction:r}),i&&this.emit("blur",{editor:this,event:i.event,transaction:r}),!(!r.docChanged||r.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:r})}getAttributes(r){return qc(this.state,r)}isActive(r,e){const t=typeof r=="string"?r:null,n=typeof r=="string"?e:r;return kg(this.state,t,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return mg(this.state.doc.content,this.schema)}getText(r){const{blockSeparator:e=`

`,textSerializers:t={}}=r||{};return gg(this.state.doc,{blockSeparator:e,textSerializers:{...t,...Vc(this.schema)}})}get isEmpty(){return Eg(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var r;return!((r=this.view)!=null&&r.docView)}};function Yr(r){return new Xo({find:r.find,handler:({state:e,range:t,match:n})=>{const i=re(r.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],l=n[0];let a=t.to;if(o){const c=l.search(/\S/),u=t.from+l.indexOf(o),f=u+o.length;if(Ni(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===r.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;f<t.to&&s.delete(f,t.to),u>t.from&&s.delete(t.from+c,u),a=t.from+c+o.length,s.addMark(t.from+c,a,r.type.create(i||{})),s.removeStoredMark(r.type)}}})}function Yg(r){return new Xo({find:r.find,handler:({state:e,range:t,match:n})=>{const i=e.doc.resolve(t.from),s=re(r.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),r.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,r.type,s)}})}function Gc(r){return new Xo({find:r.find,handler:({state:e,range:t,match:n})=>{const i=re(r.getAttributes,void 0,n)||{},s=e.tr.delete(t.from,t.to),l=s.doc.resolve(t.from).blockRange(),a=l&&Po(l,r.type,i);if(!a)return null;s.wrap(l,a);const c=s.doc.resolve(t.from-1).nodeBefore;c&&c.type===r.type&&an(s.doc,t.from-1)&&(!r.joinPredicate||r.joinPredicate(n,c))&&s.join(t.from-1)}})}var on=class{constructor(r={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...r},this.name=this.config.name,r.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=re(z(this,"addOptions",{name:this.name}))),this.storage=re(z(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(r={}){return new on(r)}configure(r={}){const e=this.extend();return e.options=Ds(this.options,r),e.storage=re(z(e,"addStorage",{name:e.name,options:e.options})),e}extend(r={}){const e=new on(r);return e.parent=this,this.child=e,e.name=r.name?r.name:e.parent.name,r.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=re(z(e,"addOptions",{name:e.name})),e.storage=re(z(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:r,mark:e}){const{tr:t}=r.state,n=r.state.selection.$from;if(n.pos===n.end()){const s=n.marks();if(!!!s.find(a=>(a==null?void 0:a.type.name)===e.name))return!1;const l=s.find(a=>(a==null?void 0:a.type.name)===e.name);return l&&t.removeStoredMark(l),t.insertText(" ",n.pos),r.view.dispatch(t),!0}return!1}},Rt=class{constructor(r={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...r},this.name=this.config.name,r.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=re(z(this,"addOptions",{name:this.name}))),this.storage=re(z(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(r={}){return new Rt(r)}configure(r={}){const e=this.extend();return e.options=Ds(this.options,r),e.storage=re(z(e,"addStorage",{name:e.name,options:e.options})),e}extend(r={}){const e=new Rt(r);return e.parent=this,this.child=e,e.name=r.name?r.name:e.parent.name,r.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=re(z(e,"addOptions",{name:e.name})),e.storage=re(z(e,"addStorage",{name:e.name,options:e.options})),e}};function cr(r){return new bm({find:r.find,handler:({state:e,range:t,match:n})=>{const i=re(r.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],l=n[0];let a=t.to;if(o){const c=l.search(/\S/),u=t.from+l.indexOf(o),f=u+o.length;if(Ni(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===r.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;f<t.to&&s.delete(f,t.to),u>t.from&&s.delete(t.from+c,u),a=t.from+c+o.length,s.addMark(t.from+c,a,r.type.create(i||{})),s.removeStoredMark(r.type)}}})}var Xg=Rt.create({name:"text",group:"inline"}),Qg=Xg,Zg=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,e0=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,t0=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,n0=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,r0=on.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:r=>r.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:r=>/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}]},renderHTML({HTMLAttributes:r}){return["strong",lt(this.options.HTMLAttributes,r),0]},addCommands(){return{setBold:()=>({commands:r})=>r.setMark(this.name),toggleBold:()=>({commands:r})=>r.toggleMark(this.name),unsetBold:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Yr({find:Zg,type:this.type}),Yr({find:t0,type:this.type})]},addPasteRules(){return[cr({find:e0,type:this.type}),cr({find:n0,type:this.type})]}}),i0=r0,s0=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,o0=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,l0=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,a0=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,u0=on.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:r=>r.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:r}){return["em",lt(this.options.HTMLAttributes,r),0]},addCommands(){return{setItalic:()=>({commands:r})=>r.setMark(this.name),toggleItalic:()=>({commands:r})=>r.toggleMark(this.name),unsetItalic:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Yr({find:s0,type:this.type}),Yr({find:l0,type:this.type})]},addPasteRules(){return[cr({find:o0,type:this.type}),cr({find:a0,type:this.type})]}}),c0=u0,f0=on.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["u",lt(this.options.HTMLAttributes,r),0]},addCommands(){return{setUnderline:()=>({commands:r})=>r.setMark(this.name),toggleUnderline:()=>({commands:r})=>r.toggleMark(this.name),unsetUnderline:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),d0=f0,h0=Rt.create({name:"doc",topNode:!0,content:"block+"}),p0=h0,m0=Rt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:r}){return["p",lt(this.options.HTMLAttributes,r),0]},addCommands(){return{setParagraph:()=>({commands:r})=>r.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),g0=m0;function tl(r){this.j={},this.jr=[],this.jd=null,this.t=r}tl.prototype={accepts:function(){return!!this.t},tt:function(e,t){if(t&&t.j)return this.j[e]=t,t;var n=t,i=this.j[e];if(i)return n&&(i.t=n),i;i=pe();var s=Fi(this,e);return s?(Object.assign(i.j,s.j),i.jr.append(s.jr),i.jr=s.jd,i.t=n||s.t):i.t=n,this.j[e]=i,i}};var pe=function(){return new tl},J=function(e){return new tl(e)},B=function(e,t,n){e.j[t]||(e.j[t]=n)},we=function(e,t,n){e.jr.push([t,n])},Fi=function(e,t){var n=e.j[t];if(n)return n;for(var i=0;i<e.jr.length;i++){var s=e.jr[i][0],o=e.jr[i][1];if(s.test(t))return o}return e.jd},ie=function(e,t,n){for(var i=0;i<t.length;i++)B(e,t[i],n)},y0=function(e,t){for(var n=0;n<t.length;n++){var i=t[n][0],s=t[n][1];B(e,i,s)}},mn=function(e,t,n,i){for(var s=0,o=t.length,l;s<o&&(l=e.j[t[s]]);)e=l,s++;if(s>=o)return[];for(;s<o-1;)l=i(),B(e,t[s],l),e=l,s++;B(e,t[o-1],n)},ct="DOMAIN",_t="LOCALHOST",Et="TLD",it="NUM",fr="PROTOCOL",nl="MAILTO",Yc="WS",rl="NL",qn="OPENBRACE",Ir="OPENBRACKET",$r="OPENANGLEBRACKET",Rr="OPENPAREN",Dn="CLOSEBRACE",Gn="CLOSEBRACKET",Yn="CLOSEANGLEBRACKET",Xn="CLOSEPAREN",Bi="AMPERSAND",Ii="APOSTROPHE",$i="ASTERISK",Qn="AT",Ri="BACKSLASH",Pi="BACKTICK",Li="CARET",Pr="COLON",il="COMMA",zi="DOLLAR",Kt="DOT",Vi="EQUALS",sl="EXCLAMATION",Hi="HYPHEN",ji="PERCENT",Ui="PIPE",Wi="PLUS",Ki="POUND",Ji="QUERY",ol="QUOTE",ll="SEMI",Nt="SLASH",qi="TILDE",Gi="UNDERSCORE",Yi="SYM",D0=Object.freeze({__proto__:null,DOMAIN:ct,LOCALHOST:_t,TLD:Et,NUM:it,PROTOCOL:fr,MAILTO:nl,WS:Yc,NL:rl,OPENBRACE:qn,OPENBRACKET:Ir,OPENANGLEBRACKET:$r,OPENPAREN:Rr,CLOSEBRACE:Dn,CLOSEBRACKET:Gn,CLOSEANGLEBRACKET:Yn,CLOSEPAREN:Xn,AMPERSAND:Bi,APOSTROPHE:Ii,ASTERISK:$i,AT:Qn,BACKSLASH:Ri,BACKTICK:Pi,CARET:Li,COLON:Pr,COMMA:il,DOLLAR:zi,DOT:Kt,EQUALS:Vi,EXCLAMATION:sl,HYPHEN:Hi,PERCENT:ji,PIPE:Ui,PLUS:Wi,POUND:Ki,QUERY:Ji,QUOTE:ol,SEMI:ll,SLASH:Nt,TILDE:qi,UNDERSCORE:Gi,SYM:Yi}),Ha="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw vermögensberater-ctb vermögensberatung-pwb ελ ευ бг бел дети ею католик ком қаз мкд мон москва онлайн орг рус рф сайт срб укр გე հայ ישראל קום ابوظبي اتصالات ارامكو الاردن البحرين الجزائر السعودية العليان المغرب امارات ایران بارت بازار بھارت بيتك پاکستان ڀارت تونس سودان سورية شبكة عراق عرب عمان فلسطين قطر كاثوليك كوم مصر مليسيا موريتانيا موقع همراه कॉम नेट भारत भारतम् भारोत संगठन বাংলা ভারত ভাৰত ਭਾਰਤ ભારત ଭାରତ இந்தியா இலங்கை சிங்கப்பூர் భారత్ ಭಾರತ ഭാരതം ලංකා คอม ไทย ລາວ 닷넷 닷컴 삼성 한국 アマゾン グーグル クラウド コム ストア セール ファッション ポイント みんな 世界 中信 中国 中國 中文网 亚马逊 企业 佛山 信息 健康 八卦 公司 公益 台湾 台灣 商城 商店 商标 嘉里 嘉里大酒店 在线 大众汽车 大拿 天主教 娱乐 家電 广东 微博 慈善 我爱你 手机 招聘 政务 政府 新加坡 新闻 时尚 書籍 机构 淡马锡 游戏 澳門 点看 移动 组织机构 网址 网店 网站 网络 联通 诺基亚 谷歌 购物 通販 集团 電訊盈科 飞利浦 食品 餐厅 香格里拉 香港".split(" "),kr=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,Er=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,xr=/\uFE0F/,wr=/\d/,ja=/\s/;function b0(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=pe(),t=J(it),n=J(ct),i=pe(),s=J(Yc),o=[[wr,n],[kr,n],[Er,n],[xr,n]],l=function(){var x=J(ct);return x.j={"-":i},x.jr=[].concat(o),x},a=function(x){var T=l();return T.t=x,T};y0(e,[["'",J(Ii)],["{",J(qn)],["[",J(Ir)],["<",J($r)],["(",J(Rr)],["}",J(Dn)],["]",J(Gn)],[">",J(Yn)],[")",J(Xn)],["&",J(Bi)],["*",J($i)],["@",J(Qn)],["`",J(Pi)],["^",J(Li)],[":",J(Pr)],[",",J(il)],["$",J(zi)],[".",J(Kt)],["=",J(Vi)],["!",J(sl)],["-",J(Hi)],["%",J(ji)],["|",J(Ui)],["+",J(Wi)],["#",J(Ki)],["?",J(Ji)],['"',J(ol)],["/",J(Nt)],[";",J(ll)],["~",J(qi)],["_",J(Gi)],["\\",J(Ri)]]),B(e,`
`,J(rl)),we(e,ja,s),B(s,`
`,pe()),we(s,ja,s);for(var c=0;c<Ha.length;c++)mn(e,Ha[c],a(Et),l);var u=l(),f=l(),d=l(),h=l();mn(e,"file",u,l),mn(e,"ftp",f,l),mn(e,"http",d,l),mn(e,"mailto",h,l);var p=l(),m=J(fr),y=J(nl);B(f,"s",p),B(f,":",m),B(d,"s",p),B(d,":",m),B(u,":",m),B(p,":",m),B(h,":",y);for(var g=l(),b=0;b<r.length;b++)mn(e,r[b],g,l);return B(g,":",m),mn(e,"localhost",a(_t),l),we(e,wr,t),we(e,kr,n),we(e,Er,n),we(e,xr,n),we(t,wr,t),we(t,kr,n),we(t,Er,n),we(t,xr,n),B(t,"-",i),B(n,"-",i),B(i,"-",i),we(n,wr,n),we(n,kr,n),we(n,Er,n),we(n,xr,n),we(i,wr,n),we(i,kr,n),we(i,Er,n),we(i,xr,n),e.jd=J(Yi),e}function v0(r,e){for(var t=k0(e.replace(/[A-Z]/g,function(h){return h.toLowerCase()})),n=t.length,i=[],s=0,o=0;o<n;){for(var l=r,a=null,c=0,u=null,f=-1,d=-1;o<n&&(a=Fi(l,t[o]));)l=a,l.accepts()?(f=0,d=0,u=l):f>=0&&(f+=t[o].length,d++),c+=t[o].length,s+=t[o].length,o++;s-=f,o-=d,c-=f,i.push({t:u.t,v:e.substr(s-c,c),s:s-c,e:s})}return i}function k0(r){for(var e=[],t=r.length,n=0;n<t;){var i=r.charCodeAt(n),s=void 0,o=i<55296||i>56319||n+1===t||(s=r.charCodeAt(n+1))<56320||s>57343?r[n]:r.slice(n,n+2);e.push(o),n+=o.length}return e}function yi(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yi=function(e){return typeof e}:yi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi(r)}var Be={defaultProtocol:"http",events:null,format:Ua,formatHref:Ua,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function E0(r){r=r||{},this.defaultProtocol="defaultProtocol"in r?r.defaultProtocol:Be.defaultProtocol,this.events="events"in r?r.events:Be.events,this.format="format"in r?r.format:Be.format,this.formatHref="formatHref"in r?r.formatHref:Be.formatHref,this.nl2br="nl2br"in r?r.nl2br:Be.nl2br,this.tagName="tagName"in r?r.tagName:Be.tagName,this.target="target"in r?r.target:Be.target,this.rel="rel"in r?r.rel:Be.rel,this.validate="validate"in r?r.validate:Be.validate,this.truncate="truncate"in r?r.truncate:Be.truncate,this.className="className"in r?r.className:Be.className,this.attributes=r.attributes||Be.attributes,this.ignoreTags=[];for(var e=("ignoreTags"in r)?r.ignoreTags:Be.ignoreTags,t=0;t<e.length;t++)this.ignoreTags.push(e[t].toUpperCase())}E0.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),rel:this.get("rel",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e),truncate:this.get("truncate",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,n){var i=this[e];if(!i)return i;var s;switch(yi(i)){case"function":return i(t,n.t);case"object":return s=n.t in i?i[n.t]:Be[e],typeof s=="function"?s(t,n.t):s}return i},getObject:function(e,t,n){var i=this[e];return typeof i=="function"?i(t,n.t):i}};function Ua(r){return r}function x0(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=Object.create(r.prototype);for(var i in t)n[i]=t[i];return n.constructor=e,e.prototype=n,e}function Xi(){}Xi.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Be.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function Fn(r,e){function t(n,i){this.t=r,this.v=n,this.tk=i}return x0(Xi,t,e),t}var Xc=Fn("email",{isLink:!0}),_o=Fn("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),No=Fn("text"),Qc=Fn("nl"),Wt=Fn("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Be.defaultProtocol,t=this.tk,n=!1,i=!1,s=[],o=0;t[o].t===fr;)n=!0,s.push(t[o].v),o++;for(;t[o].t===Nt;)i=!0,s.push(t[o].v),o++;for(;o<t.length;o++)s.push(t[o].v);return s=s.join(""),n||i||(s="".concat(e,"://").concat(s)),s},hasProtocol:function(){return this.tk[0].t===fr}}),w0=Object.freeze({__proto__:null,MultiToken:Xi,Base:Xi,createTokenClass:Fn,MailtoEmail:Xc,Email:_o,Text:No,Nl:Qc,Url:Wt});function C0(){var r=pe(),e=pe(),t=pe(),n=pe(),i=pe(),s=pe(),o=pe(),l=J(Wt),a=pe(),c=J(Wt),u=J(Wt),f=pe(),d=pe(),h=pe(),p=pe(),m=pe(),y=J(Wt),g=J(Wt),b=J(Wt),v=J(Wt),x=pe(),T=pe(),P=pe(),Q=pe(),N=pe(),S=pe(),ee=J(_o),q=pe(),$=J(_o),F=J(Xc),ke=pe(),se=pe(),oe=pe(),Me=pe(),Oe=J(Qc);B(r,rl,Oe),B(r,fr,e),B(r,nl,t),B(e,Nt,n),B(n,Nt,i),B(r,Et,s),B(r,ct,s),B(r,_t,l),B(r,it,s),B(i,Et,u),B(i,ct,u),B(i,it,u),B(i,_t,u),B(s,Kt,o),B(N,Kt,S),B(o,Et,l),B(o,ct,s),B(o,it,s),B(o,_t,s),B(S,Et,ee),B(S,ct,N),B(S,it,N),B(S,_t,N),B(l,Kt,o),B(ee,Kt,S),B(l,Pr,a),B(l,Nt,u),B(a,it,c),B(c,Nt,u),B(ee,Pr,q),B(q,it,$);var ge=[Bi,$i,Qn,Ri,Pi,Li,zi,ct,Vi,Hi,_t,it,ji,Ui,Wi,Ki,fr,Nt,Yi,qi,Et,Gi],de=[Ii,Yn,Dn,Gn,Xn,Pr,il,Kt,sl,$r,qn,Ir,Rr,Ji,ol,ll];B(u,qn,d),B(u,Ir,h),B(u,$r,p),B(u,Rr,m),B(f,qn,d),B(f,Ir,h),B(f,$r,p),B(f,Rr,m),B(d,Dn,u),B(h,Gn,u),B(p,Yn,u),B(m,Xn,u),B(y,Dn,u),B(g,Gn,u),B(b,Yn,u),B(v,Xn,u),B(x,Dn,u),B(T,Gn,u),B(P,Yn,u),B(Q,Xn,u),ie(d,ge,y),ie(h,ge,g),ie(p,ge,b),ie(m,ge,v),ie(d,de,x),ie(h,de,T),ie(p,de,P),ie(m,de,Q),ie(y,ge,y),ie(g,ge,g),ie(b,ge,b),ie(v,ge,v),ie(y,de,y),ie(g,de,g),ie(b,de,b),ie(v,de,v),ie(x,ge,y),ie(T,ge,g),ie(P,ge,b),ie(Q,ge,v),ie(x,de,x),ie(T,de,T),ie(P,de,P),ie(Q,de,Q),ie(u,ge,u),ie(f,ge,u),ie(u,de,f),ie(f,de,f),B(t,Et,F),B(t,ct,F),B(t,it,F),B(t,_t,F),ie(F,ge,F),ie(F,de,ke),ie(ke,ge,F),ie(ke,de,ke);var he=[Bi,Ii,$i,Ri,Pi,Li,Dn,zi,ct,Vi,Hi,it,qn,ji,Ui,Wi,Ki,Ji,Nt,Yi,qi,Et,Gi];return ie(s,he,se),B(s,Qn,oe),ie(l,he,se),B(l,Qn,oe),ie(o,he,se),ie(se,he,se),B(se,Qn,oe),B(se,Kt,Me),ie(Me,he,se),B(oe,Et,N),B(oe,ct,N),B(oe,it,N),B(oe,_t,ee),r}function S0(r,e,t){for(var n=t.length,i=0,s=[],o=[];i<n;){for(var l=r,a=null,c=null,u=0,f=null,d=-1;i<n&&!(a=Fi(l,t[i].t));)o.push(t[i++]);for(;i<n&&(c=a||Fi(l,t[i].t));)a=null,l=c,l.accepts()?(d=0,f=l):d>=0&&d++,i++,u++;if(d<0)for(var h=i-u;h<i;h++)o.push(t[h]);else{o.length>0&&(s.push(fo(No,e,o)),o=[]),i-=d,u-=d;var p=f.t,m=t.slice(i-u,i);s.push(fo(p,e,m))}}return o.length>0&&s.push(fo(No,e,o)),s}function fo(r,e,t){var n=t[0].s,i=t[t.length-1].e,s=e.substr(n,i-n);return new r(s,t)}var A0=typeof console<"u"&&console&&console.warn||function(){},Ce={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function T0(){Ce.scanner=null,Ce.parser=null,Ce.pluginQueue=[],Ce.customProtocols=[],Ce.initialized=!1}function M0(r){if(Ce.initialized&&A0('linkifyjs: already initialized - will not register custom protocol "'.concat(r,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(r))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");Ce.customProtocols.push(r)}function O0(){Ce.scanner={start:b0(Ce.customProtocols),tokens:D0},Ce.parser={start:C0(),tokens:w0};for(var r={createTokenClass:Fn},e=0;e<Ce.pluginQueue.length;e++)Ce.pluginQueue[e][1]({scanner:Ce.scanner,parser:Ce.parser,utils:r});Ce.initialized=!0}function Zc(r){return Ce.initialized||O0(),S0(Ce.parser.start,r,v0(Ce.scanner.start,r))}function al(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=Zc(r),n=[],i=0;i<t.length;i++){var s=t[i];s.isLink&&(!e||s.t===e)&&n.push(s.toObject())}return n}function Wa(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=Zc(r);return t.length===1&&t[0].isLink&&(!e||t[0].t===e)}function _0(r){return new Dt({key:new un("autolink"),appendTransaction:(e,t,n)=>{const i=e.some(u=>u.docChanged)&&!t.doc.eq(n.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,l=fg(t.doc,[...e]),{mapping:a}=l;if(vg(l).forEach(({oldRange:u,newRange:f})=>{Ni(u.from,u.to,t.doc).filter(m=>m.mark.type===r.type).forEach(m=>{const y=a.map(m.from),g=a.map(m.to),b=Ni(y,g,n.doc).filter(N=>N.mark.type===r.type);if(!b.length)return;const v=b[0],x=t.doc.textBetween(m.from,m.to,void 0," "),T=n.doc.textBetween(v.from,v.to,void 0," "),P=Wa(x),Q=Wa(T);P&&!Q&&o.removeMark(v.from,v.to,r.type)});const d=hg(n.doc,f,m=>m.isTextblock);let h,p;if(d.length>1?(h=d[0],p=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ")):d.length&&n.doc.textBetween(f.from,f.to," "," ").endsWith(" ")&&(h=d[0],p=n.doc.textBetween(h.pos,f.to,void 0," ")),h&&p){const m=p.split(" ").filter(b=>b!=="");if(m.length<=0)return!1;const y=m[m.length-1],g=h.pos+p.lastIndexOf(y);if(!y)return!1;al(y).filter(b=>b.isLink).filter(b=>r.validate?r.validate(b.value):!0).map(b=>({...b,from:g+b.start+1,to:g+b.end+1})).forEach(b=>{o.addMark(b.from,b.to,r.type.create({href:b.href}))})}}),!!o.steps.length)return o}})}function N0(r){return new Dt({key:new un("handleClickLink"),props:{handleClick:(e,t,n)=>{var i;const s=qc(e.state,r.type.name);return((i=n.target)==null?void 0:i.closest("a"))&&s.href?(window.open(s.href,s.target),!0):!1}}})}function F0(r){return new Dt({key:new un("handlePasteLink"),props:{handlePaste:(e,t,n)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";n.content.forEach(c=>{l+=c.textContent});const a=al(l).find(c=>c.isLink&&c.value===l);return!l||!a?!1:(r.editor.commands.setMark(r.type,{href:a.href}),!0)}}})}var B0=on.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(M0)},onDestroy(){T0()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:r}){return["a",lt(this.options.HTMLAttributes,r),0]},addCommands(){return{setLink:r=>({chain:e})=>e().setMark(this.name,r).setMeta("preventAutolink",!0).run(),toggleLink:r=>({chain:e})=>e().toggleMark(this.name,r,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:r})=>r().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[cr({find:r=>al(r).filter(e=>this.options.validate?this.options.validate(e.value):!0).filter(e=>e.isLink).map(e=>({text:e.value,index:e.start,data:e})),type:this.type,getAttributes:r=>{var e;return{href:(e=r.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const r=[];return this.options.autolink&&r.push(_0({type:this.type,validate:this.options.validate})),this.options.openOnClick&&r.push(N0({type:this.type})),this.options.linkOnPaste&&r.push(F0({editor:this.editor,type:this.type})),r}}),I0=B0,$0=Rt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(r=>({tag:`h${r}`,attrs:{level:r}}))},renderHTML({node:r,HTMLAttributes:e}){return[`h${this.options.levels.includes(r.attrs.level)?r.attrs.level:this.options.levels[0]}`,lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.setNode(this.name,r):!1,toggleHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.toggleNode(this.name,"paragraph",r):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((r,e)=>({...r,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(r=>Yg({find:new RegExp(`^(#{1,${r}})\\s$`),type:this.type,getAttributes:{level:r}}))}}),R0=$0,P0=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,L0=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,z0=on.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["s",lt(this.options.HTMLAttributes,r),0]},addCommands(){return{setStrike:()=>({commands:r})=>r.setMark(this.name),toggleStrike:()=>({commands:r})=>r.toggleMark(this.name),unsetStrike:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Yr({find:P0,type:this.type})]},addPasteRules(){return[cr({find:L0,type:this.type})]}}),V0=z0,H0=$t.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:r=>r.style.textAlign||this.options.defaultAlignment,renderHTML:r=>r.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${r.textAlign}`}}}}]},addCommands(){return{setTextAlign:r=>({commands:e})=>this.options.alignments.includes(r)?this.options.types.every(t=>e.updateAttributes(t,{textAlign:r})):!1,unsetTextAlign:()=>({commands:r})=>this.options.types.every(e=>r.resetAttributes(e,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),j0=H0,U0=Rt.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",lt(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),W0=U0,K0=/^\s*([-+*])\s$/,J0=Rt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:r}){return["ul",lt(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleBulletList:()=>({commands:r})=>r.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Gc({find:K0,type:this.type})]}}),q0=J0,G0=/^(\d+)\.\s$/,Y0=Rt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:r=>r.hasAttribute("start")?parseInt(r.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:r}){const{start:e,...t}=r;return e===1?["ol",lt(this.options.HTMLAttributes,t),0]:["ol",lt(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleOrderedList:()=>({commands:r})=>r.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Gc({find:G0,type:this.type,getAttributes:r=>({start:+r[1]}),joinPredicate:(r,e)=>e.childCount+e.attrs.start===+r[1]})]}}),X0=Y0;function vs(r){return r.split("-")[1]}function ef(r){return r==="y"?"height":"width"}function Cn(r){return r.split("-")[0]}function ks(r){return["top","bottom"].includes(Cn(r))?"x":"y"}function Ka(r,e,t){let{reference:n,floating:i}=r;const s=n.x+n.width/2-i.width/2,o=n.y+n.height/2-i.height/2,l=ks(e),a=ef(l),c=n[a]/2-i[a]/2,u=l==="x";let f;switch(Cn(e)){case"top":f={x:s,y:n.y-i.height};break;case"bottom":f={x:s,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:o};break;case"left":f={x:n.x-i.width,y:o};break;default:f={x:n.x,y:n.y}}switch(vs(e)){case"start":f[l]-=c*(t&&u?-1:1);break;case"end":f[l]+=c*(t&&u?-1:1)}return f}const Q0=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,l=s.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:r,floating:e,strategy:i}),{x:u,y:f}=Ka(c,n,a),d=n,h={},p=0;for(let m=0;m<l.length;m++){const{name:y,fn:g}=l[m],{x:b,y:v,data:x,reset:T}=await g({x:u,y:f,initialPlacement:n,placement:d,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:r,floating:e}});u=b??u,f=v??f,h={...h,[y]:{...h[y],...x}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(d=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:i}):T.rects),{x:u,y:f}=Ka(c,d,a)),m=-1)}return{x:u,y:f,placement:d,strategy:i,middlewareData:h}};function Z0(r){return typeof r!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(r):{top:r,right:r,bottom:r,left:r}}function Fo(r){return{...r,top:r.y,left:r.x,right:r.x+r.width,bottom:r.y+r.height}}async function tf(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:l,strategy:a}=r,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=e,p=Z0(h),m=l[d?f==="floating"?"reference":"floating":f],y=Fo(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(m)))==null||t?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:a})),g=f==="floating"?{...o.floating,x:n,y:i}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),v=await(s.isElement==null?void 0:s.isElement(b))&&await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1},x=Fo(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:b,strategy:a}):g);return{top:(y.top-x.top+p.top)/v.y,bottom:(x.bottom-y.bottom+p.bottom)/v.y,left:(y.left-x.left+p.left)/v.x,right:(x.right-y.right+p.right)/v.x}}const e1=Math.min,t1=Math.max;function Ja(r,e,t){return t1(r,e1(e,t))}const n1=["top","right","bottom","left"];n1.reduce((r,e)=>r.concat(e,e+"-start",e+"-end"),[]);const r1={left:"right",right:"left",bottom:"top",top:"bottom"};function Qi(r){return r.replace(/left|right|bottom|top/g,e=>r1[e])}function i1(r,e,t){t===void 0&&(t=!1);const n=vs(r),i=ks(r),s=ef(i);let o=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Qi(o)),{main:o,cross:Qi(o)}}const s1={start:"end",end:"start"};function ho(r){return r.replace(/start|end/g,e=>s1[e])}const o1=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t;const{placement:n,middlewareData:i,rects:s,initialPlacement:o,platform:l,elements:a}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:p=!0,...m}=r,y=Cn(n),g=Cn(o)===o,b=await(l.isRTL==null?void 0:l.isRTL(a.floating)),v=f||(g||!p?[Qi(o)]:function(q){const $=Qi(q);return[ho(q),$,ho($)]}(o));f||h==="none"||v.push(...function(q,$,F,ke){const se=vs(q);let oe=function(Me,Oe,ge){const de=["left","right"],he=["right","left"],tt=["top","bottom"],dn=["bottom","top"];switch(Me){case"top":case"bottom":return ge?Oe?he:de:Oe?de:he;case"left":case"right":return Oe?tt:dn;default:return[]}}(Cn(q),F==="start",ke);return se&&(oe=oe.map(Me=>Me+"-"+se),$&&(oe=oe.concat(oe.map(ho)))),oe}(o,p,h,b));const x=[o,...v],T=await tf(e,m),P=[];let Q=((t=i.flip)==null?void 0:t.overflows)||[];if(c&&P.push(T[y]),u){const{main:q,cross:$}=i1(n,s,b);P.push(T[q],T[$])}if(Q=[...Q,{placement:n,overflows:P}],!P.every(q=>q<=0)){var N,S;const q=(((N=i.flip)==null?void 0:N.index)||0)+1,$=x[q];if($)return{data:{index:q,overflows:Q},reset:{placement:$}};let F=(S=Q.filter(ke=>ke.overflows[0]<=0).sort((ke,se)=>ke.overflows[1]-se.overflows[1])[0])==null?void 0:S.placement;if(!F)switch(d){case"bestFit":{var ee;const ke=(ee=Q.map(se=>[se.placement,se.overflows.filter(oe=>oe>0).reduce((oe,Me)=>oe+Me,0)]).sort((se,oe)=>se[1]-oe[1])[0])==null?void 0:ee[0];ke&&(F=ke);break}case"initialPlacement":F=o}if(n!==F)return{reset:{placement:F}}}return{}}}},l1=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){const{x:t,y:n}=e,i=await async function(s,o){const{placement:l,platform:a,elements:c}=s,u=await(a.isRTL==null?void 0:a.isRTL(c.floating)),f=Cn(l),d=vs(l),h=ks(l)==="x",p=["left","top"].includes(f)?-1:1,m=u&&h?-1:1,y=typeof o=="function"?o(s):o;let{mainAxis:g,crossAxis:b,alignmentAxis:v}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return d&&typeof v=="number"&&(b=d==="end"?-1*v:v),h?{x:b*m,y:g*p}:{x:g*p,y:b*m}}(e,r);return{x:t+i.x,y:n+i.y,data:i}}}};function a1(r){return r==="x"?"y":"x"}const u1=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:g,y:b}=y;return{x:g,y:b}}},...a}=r,c={x:t,y:n},u=await tf(e,a),f=ks(Cn(i)),d=a1(f);let h=c[f],p=c[d];if(s){const y=f==="y"?"bottom":"right";h=Ja(h+u[f==="y"?"top":"left"],h,h-u[y])}if(o){const y=d==="y"?"bottom":"right";p=Ja(p+u[d==="y"?"top":"left"],p,p-u[y])}const m=l.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-t,y:m.y-n}}}}};function et(r){var e;return((e=r.ownerDocument)==null?void 0:e.defaultView)||window}function At(r){return et(r).getComputedStyle(r)}const qa=Math.min,Lr=Math.max,Zi=Math.round;function nf(r){const e=At(r);let t=parseFloat(e.width),n=parseFloat(e.height);const i=r.offsetWidth,s=r.offsetHeight,o=Zi(t)!==i||Zi(n)!==s;return o&&(t=i,n=s),{width:t,height:n,fallback:o}}function ln(r){return sf(r)?(r.nodeName||"").toLowerCase():""}let ci;function rf(){if(ci)return ci;const r=navigator.userAgentData;return r&&Array.isArray(r.brands)?(ci=r.brands.map(e=>e.brand+"/"+e.version).join(" "),ci):navigator.userAgent}function Tt(r){return r instanceof et(r).HTMLElement}function en(r){return r instanceof et(r).Element}function sf(r){return r instanceof et(r).Node}function Ga(r){return typeof ShadowRoot>"u"?!1:r instanceof et(r).ShadowRoot||r instanceof ShadowRoot}function Es(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=At(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function c1(r){return["table","td","th"].includes(ln(r))}function Bo(r){const e=/firefox/i.test(rf()),t=At(r),n=t.backdropFilter||t.WebkitBackdropFilter;return t.transform!=="none"||t.perspective!=="none"||!!n&&n!=="none"||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"||["transform","perspective"].some(i=>t.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const s=t.contain;return s!=null&&s.includes(i)})}function Io(){return/^((?!chrome|android).)*safari/i.test(rf())}function ul(r){return["html","body","#document"].includes(ln(r))}function of(r){return en(r)?r:r.contextElement}const lf={x:1,y:1};function nr(r){const e=of(r);if(!Tt(e))return lf;const t=e.getBoundingClientRect(),{width:n,height:i,fallback:s}=nf(e);let o=(s?Zi(t.width):t.width)/n,l=(s?Zi(t.height):t.height)/i;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}function Xr(r,e,t,n){var i,s;e===void 0&&(e=!1),t===void 0&&(t=!1);const o=r.getBoundingClientRect(),l=of(r);let a=lf;e&&(n?en(n)&&(a=nr(n)):a=nr(r));const c=l?et(l):window,u=Io()&&t;let f=(o.left+(u&&((i=c.visualViewport)==null?void 0:i.offsetLeft)||0))/a.x,d=(o.top+(u&&((s=c.visualViewport)==null?void 0:s.offsetTop)||0))/a.y,h=o.width/a.x,p=o.height/a.y;if(l){const m=et(l),y=n&&en(n)?et(n):n;let g=m.frameElement;for(;g&&n&&y!==m;){const b=nr(g),v=g.getBoundingClientRect(),x=getComputedStyle(g);v.x+=(g.clientLeft+parseFloat(x.paddingLeft))*b.x,v.y+=(g.clientTop+parseFloat(x.paddingTop))*b.y,f*=b.x,d*=b.y,h*=b.x,p*=b.y,f+=v.x,d+=v.y,g=et(g).frameElement}}return{width:h,height:p,top:d,right:f+h,bottom:d+p,left:f,x:f,y:d}}function tn(r){return((sf(r)?r.ownerDocument:r.document)||window.document).documentElement}function xs(r){return en(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function af(r){return Xr(tn(r)).left+xs(r).scrollLeft}function Qr(r){if(ln(r)==="html")return r;const e=r.assignedSlot||r.parentNode||Ga(r)&&r.host||tn(r);return Ga(e)?e.host:e}function uf(r){const e=Qr(r);return ul(e)?e.ownerDocument.body:Tt(e)&&Es(e)?e:uf(e)}function cf(r,e){var t;e===void 0&&(e=[]);const n=uf(r),i=n===((t=r.ownerDocument)==null?void 0:t.body),s=et(n);return i?e.concat(s,s.visualViewport||[],Es(n)?n:[]):e.concat(n,cf(n))}function Ya(r,e,t){let n;if(e==="viewport")n=function(o,l){const a=et(o),c=tn(o),u=a.visualViewport;let f=c.clientWidth,d=c.clientHeight,h=0,p=0;if(u){f=u.width,d=u.height;const m=Io();(!m||m&&l==="fixed")&&(h=u.offsetLeft,p=u.offsetTop)}return{width:f,height:d,x:h,y:p}}(r,t);else if(e==="document")n=function(o){const l=tn(o),a=xs(o),c=o.ownerDocument.body,u=Lr(l.scrollWidth,l.clientWidth,c.scrollWidth,c.clientWidth),f=Lr(l.scrollHeight,l.clientHeight,c.scrollHeight,c.clientHeight);let d=-a.scrollLeft+af(o);const h=-a.scrollTop;return At(c).direction==="rtl"&&(d+=Lr(l.clientWidth,c.clientWidth)-u),{width:u,height:f,x:d,y:h}}(tn(r));else if(en(e))n=function(o,l){const a=Xr(o,!0,l==="fixed"),c=a.top+o.clientTop,u=a.left+o.clientLeft,f=Tt(o)?nr(o):{x:1,y:1};return{width:o.clientWidth*f.x,height:o.clientHeight*f.y,x:u*f.x,y:c*f.y}}(e,t);else{const o={...e};if(Io()){var i,s;const l=et(r);o.x-=((i=l.visualViewport)==null?void 0:i.offsetLeft)||0,o.y-=((s=l.visualViewport)==null?void 0:s.offsetTop)||0}n=o}return Fo(n)}function Xa(r,e){return Tt(r)&&At(r).position!=="fixed"?e?e(r):r.offsetParent:null}function Qa(r,e){const t=et(r);let n=Xa(r,e);for(;n&&c1(n)&&At(n).position==="static";)n=Xa(n,e);return n&&(ln(n)==="html"||ln(n)==="body"&&At(n).position==="static"&&!Bo(n))?t:n||function(i){let s=Qr(i);for(;Tt(s)&&!ul(s);){if(Bo(s))return s;s=Qr(s)}return null}(r)||t}function f1(r,e,t){const n=Tt(e),i=tn(e),s=Xr(r,!0,t==="fixed",e);let o={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(n||!n&&t!=="fixed")if((ln(e)!=="body"||Es(i))&&(o=xs(e)),Tt(e)){const a=Xr(e,!0);l.x=a.x+e.clientLeft,l.y=a.y+e.clientTop}else i&&(l.x=af(i));return{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}const d1={getClippingRect:function(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const s=t==="clippingAncestors"?function(c,u){const f=u.get(c);if(f)return f;let d=cf(c).filter(y=>en(y)&&ln(y)!=="body"),h=null;const p=At(c).position==="fixed";let m=p?Qr(c):c;for(;en(m)&&!ul(m);){const y=At(m),g=Bo(m);(p?g||h:g||y.position!=="static"||!h||!["absolute","fixed"].includes(h.position))?h=y:d=d.filter(b=>b!==m),m=Qr(m)}return u.set(c,d),d}(e,this._c):[].concat(t),o=[...s,n],l=o[0],a=o.reduce((c,u)=>{const f=Ya(e,u,i);return c.top=Lr(f.top,c.top),c.right=qa(f.right,c.right),c.bottom=qa(f.bottom,c.bottom),c.left=Lr(f.left,c.left),c},Ya(e,l,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(r){let{rect:e,offsetParent:t,strategy:n}=r;const i=Tt(t),s=tn(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},l={x:1,y:1};const a={x:0,y:0};if((i||!i&&n!=="fixed")&&((ln(t)!=="body"||Es(s))&&(o=xs(t)),Tt(t))){const c=Xr(t);l=nr(t),a.x=c.x+t.clientLeft,a.y=c.y+t.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-o.scrollLeft*l.x+a.x,y:e.y*l.y-o.scrollTop*l.y+a.y}},isElement:en,getDimensions:function(r){return Tt(r)?nf(r):r.getBoundingClientRect()},getOffsetParent:Qa,getDocumentElement:tn,getScale:nr,async getElementRects(r){let{reference:e,floating:t,strategy:n}=r;const i=this.getOffsetParent||Qa,s=this.getDimensions;return{reference:f1(e,await i(t),n),floating:{x:0,y:0,...await s(t)}}},getClientRects:r=>Array.from(r.getClientRects()),isRTL:r=>At(r).direction==="rtl"},h1=(r,e,t)=>{const n=new Map,i={platform:d1,...t},s={...i.platform,_c:n};return Q0(r,e,{...i,platform:s})};function p1(r){let e,t='<path fill="currentColor" fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function m1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class g1 extends ye{constructor(e){super(),De(this,e,m1,p1,be,{})}}function y1(r){let e,t='<path fill="currentColor" d="M8.21 13c2.106 0 3.412-1.087 3.412-2.823c0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13H8.21zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244c0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415c0 .943-.643 1.449-1.832 1.449H5.907z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function D1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class b1 extends ye{constructor(e){super(),De(this,e,D1,y1,be,{})}}function v1(r){let e,t='<path fill="currentColor" d="M7.991 11.674L9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function k1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class E1 extends ye{constructor(e){super(),De(this,e,k1,v1,be,{})}}function x1(r){let e,t='<path fill="currentColor" fill-rule="evenodd" d="M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function w1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class ff extends ye{constructor(e){super(),De(this,e,w1,x1,be,{})}}function C1(r){let e,t='<path fill="currentColor" d="M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57c-1.709 0-2.687-1.08-2.687-2.57V3.136zM12.5 15h-9v-1h9v1z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function S1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class A1 extends ye{constructor(e){super(),De(this,e,S1,C1,be,{})}}function T1(r){let e,t='<path fill="currentColor" d="M6.333 5.686c0 .31.083.581.27.814H5.166a2.776 2.776 0 0 1-.099-.76c0-1.627 1.436-2.768 3.48-2.768c1.969 0 3.39 1.175 3.445 2.85h-1.23c-.11-1.08-.964-1.743-2.25-1.743c-1.23 0-2.18.602-2.18 1.607zm2.194 7.478c-2.153 0-3.589-1.107-3.705-2.81h1.23c.144 1.06 1.129 1.703 2.544 1.703c1.34 0 2.31-.705 2.31-1.675c0-.827-.547-1.374-1.914-1.675L8.046 8.5H1v-1h14v1h-3.504c.468.437.675.994.675 1.697c0 1.826-1.436 2.967-3.644 2.967z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function M1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class O1 extends ye{constructor(e){super(),De(this,e,M1,T1,be,{})}}function _1(r){let e,t='<g fill="currentColor"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"/><path d="M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317c0-.185-.158-.31-.361-.31c-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787c.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8c-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309c.254 0 .424-.145.422-.35c-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844c.583 0 .96.326.96.756c0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508c0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z"/></g>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function N1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class F1 extends ye{constructor(e){super(),De(this,e,N1,_1,be,{})}}function B1(r){let e,t='<g fill="currentColor"><path d="M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199a2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></g>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function I1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class $1 extends ye{constructor(e){super(),De(this,e,I1,B1,be,{})}}function R1(r){let e,t='<path fill="currentColor" fill-rule="evenodd" d="M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function P1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class df extends ye{constructor(e){super(),De(this,e,P1,R1,be,{})}}function L1(r){let e,t='<path fill="currentColor" fill-rule="evenodd" d="M6 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm4-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function z1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class hf extends ye{constructor(e){super(),De(this,e,z1,L1,be,{})}}function V1(r){let e,t='<path fill="currentColor" fill-rule="evenodd" d="M2 12.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function H1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class pf extends ye{constructor(e){super(),De(this,e,H1,V1,be,{})}}function j1(r){let e,t='<path fill="currentColor" fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2a1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2a1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2a1 1 0 0 0 0 2z"/>',n=[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let s=0;s<n.length;s+=1)i=Z(i,n[s]);return{c(){e=Ue("svg"),this.h()},l(s){e=We(s,"svg",{viewBox:!0,width:!0,height:!0});var o=w(e);o.forEach(D),this.h()},h(){ce(e,i)},m(s,o){I(s,e,o),e.innerHTML=t},p(s,[o]){ce(e,i=Ke(n,[{viewBox:"0 0 16 16"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:R,o:R,d(s){s&&D(e)}}}function U1(r,e,t){return r.$$set=n=>{t(0,e=Z(Z({},e),fe(n)))},e=fe(e),[e]}class mf extends ye{constructor(e){super(),De(this,e,U1,j1,be,{})}}const W1=r=>({}),Za=r=>({}),K1=r=>({}),eu=r=>({});function J1(r){let e,t,n,i;const s=r[1].tooltip,o=fi(s,r,r[0],eu),l=r[1].default,a=fi(l,r,r[0],null),c=r[1].dropdown,u=fi(c,r,r[0],Za);return{c(){e=M("div"),o&&o.c(),t=V(),a&&a.c(),n=V(),u&&u.c(),this.h()},l(f){e=O(f,"DIV",{class:!0});var d=w(e);o&&o.l(d),t=H(d),a&&a.l(d),n=H(d),u&&u.l(d),d.forEach(D),this.h()},h(){E(e,"class","relative group/btn hover:bg-gray-100")},m(f,d){I(f,e,d),o&&o.m(e,null),k(e,t),a&&a.m(e,null),k(e,n),u&&u.m(e,null),i=!0},p(f,[d]){o&&o.p&&(!i||d&1)&&di(o,s,f,f[0],i?pi(s,f[0],d,K1):hi(f[0]),eu),a&&a.p&&(!i||d&1)&&di(a,l,f,f[0],i?pi(l,f[0],d,null):hi(f[0]),null),u&&u.p&&(!i||d&1)&&di(u,c,f,f[0],i?pi(c,f[0],d,W1):hi(f[0]),Za)},i(f){i||(C(o,f),C(a,f),C(u,f),i=!0)},o(f){_(o,f),_(a,f),_(u,f),i=!1},d(f){f&&D(e),o&&o.d(f),a&&a.d(f),u&&u.d(f)}}}function q1(r,e,t){let{$$slots:n={},$$scope:i}=e;return r.$$set=s=>{"$$scope"in s&&t(0,i=s.$$scope)},[i,n]}class ft extends ye{constructor(e){super(),De(this,e,q1,J1,be,{})}}function G1(r){let e,t,n;const i=r[1].default,s=fi(i,r,r[0],null);return{c(){e=M("div"),t=M("div"),s&&s.c(),this.h()},l(o){e=O(o,"DIV",{class:!0});var l=w(e);t=O(l,"DIV",{class:!0});var a=w(t);s&&s.l(a),a.forEach(D),l.forEach(D),this.h()},h(){E(t,"class","bg-gray-900 text-xs bg-opacity-70 text-white px-2 py-1 rounded h-6"),E(e,"class","absolute -translate-x-1/2 left-1/2 bottom-full opacity-0 pointer-events-none pb-1 group-hover/btn:opacity-100 group-hover/btn:pointer-events-auto")},m(o,l){I(o,e,l),k(e,t),s&&s.m(t,null),n=!0},p(o,[l]){s&&s.p&&(!n||l&1)&&di(s,i,o,o[0],n?pi(i,o[0],l,null):hi(o[0]),null)},i(o){n||(C(s,o),n=!0)},o(o){_(s,o),n=!1},d(o){o&&D(e),s&&s.d(o)}}}function Y1(r,e,t){let{$$slots:n={},$$scope:i}=e;return r.$$set=s=>{"$$scope"in s&&t(0,i=s.$$scope)},[i,n]}class bt extends ye{constructor(e){super(),De(this,e,Y1,G1,be,{})}}function X1(r){let e,t;return{c(){e=M("kbd"),t=G(r[0]),this.h()},l(n){e=O(n,"KBD",{class:!0});var i=w(e);t=Y(i,r[0]),i.forEach(D),this.h()},h(){E(e,"class","px-1 rounded border-white bg-white bg-opacity-20 border-[1px] border-opacity-70 leading-none")},m(n,i){I(n,e,i),k(e,t)},p(n,[i]){i&1&&pu(t,n[0])},i:R,o:R,d(n){n&&D(e)}}}function Q1(r,e,t){let{key:n}=e;return r.$$set=i=>{"key"in i&&t(0,n=i.key)},[n]}class dr extends ye{constructor(e){super(),De(this,e,Q1,X1,be,{key:0})}}function Z1(r){let e,t,n,i,s;return t=new g1({}),{c(){e=M("button"),j(t.$$.fragment),this.h()},l(o){e=O(o,"BUTTON",{class:!0,type:!0});var l=w(e);U(t.$$.fragment,l),l.forEach(D),this.h()},h(){E(e,"class","px-1 flex items-center h-7 rounded-tl-full rounded-bl-full"),E(e,"type","button"),te(e,"bg-gray-50",r[2])},m(o,l){I(o,e,l),W(t,e,null),n=!0,i||(s=le(e,"click",r[16]),i=!0)},p(o,l){(!n||l[0]&4)&&te(e,"bg-gray-50",o[2])},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){o&&D(e),K(t),i=!1,s()}}}function ey(r){let e=r[2]?"Less":"More",t,n;return{c(){t=G(e),n=G(" Tools")},l(i){t=Y(i,e),n=Y(i," Tools")},m(i,s){I(i,t,s),I(i,n,s)},p(i,s){s[0]&4&&e!==(e=i[2]?"Less":"More")&&pu(t,e)},d(i){i&&D(t),i&&D(n)}}}function ty(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[ey]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[0]&4|i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function ny(r){let e,t;return{c(){e=M("div"),t=G("Text"),this.h()},l(n){e=O(n,"DIV",{class:!0});var i=w(e);t=Y(i,"Text"),i.forEach(D),this.h()},h(){E(e,"class","px-2 py-1 w-12 overflow-hidden text-ellipsis")},m(n,i){I(n,e,i),k(e,t)},p:R,d(n){n&&D(e)}}}function ry(r){let e;return{c(){e=G("Text style")},l(t){e=Y(t,"Text style")},m(t,n){I(t,e,n)},d(t){t&&D(e)}}}function iy(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[ry]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function sy(r){let e,t,n,i,s,o,l,a,c,u,f,d,h,p,m;return{c(){e=M("div"),t=M("div"),n=M("button"),i=G("Title (h1)"),s=V(),o=M("button"),l=G("Subtitle (h2)"),a=V(),c=M("button"),u=G("Small Subtitle (h3)"),f=V(),d=M("button"),h=G("Text (p)"),this.h()},l(y){e=O(y,"DIV",{slot:!0,class:!0});var g=w(e);t=O(g,"DIV",{class:!0});var b=w(t);n=O(b,"BUTTON",{type:!0,class:!0});var v=w(n);i=Y(v,"Title (h1)"),v.forEach(D),s=H(b),o=O(b,"BUTTON",{type:!0,class:!0});var x=w(o);l=Y(x,"Subtitle (h2)"),x.forEach(D),a=H(b),c=O(b,"BUTTON",{type:!0,class:!0});var T=w(c);u=Y(T,"Small Subtitle (h3)"),T.forEach(D),f=H(b),d=O(b,"BUTTON",{type:!0,class:!0});var P=w(d);h=Y(P,"Text (p)"),P.forEach(D),b.forEach(D),g.forEach(D),this.h()},h(){E(n,"type","button"),E(n,"class","whitespace-nowrap text-left p-1 text-ellipsis overflow-hidden w-full"),E(o,"type","button"),E(o,"class","whitespace-nowrap p-1 text-left text-ellipsis overflow-hidden w-full"),E(c,"type","button"),E(c,"class","whitespace-nowrap p-1 text-left text-ellipsis overflow-hidden w-full"),E(d,"type","button"),E(d,"class","whitespace-nowrap p-1 text-left text-ellipsis overflow-hidden w-full"),E(t,"class","text-sm bg-white text-left rounded"),E(e,"slot","dropdown"),E(e,"class","absolute left-0 top-full whitespace-normal opacity-0 pointer-events-none pt-2 group-hover/btn:opacity-100 group-hover/btn:pointer-events-auto")},m(y,g){I(y,e,g),k(e,t),k(t,n),k(n,i),k(t,s),k(t,o),k(o,l),k(t,a),k(t,c),k(c,u),k(t,f),k(t,d),k(d,h),p||(m=[le(n,"click",r[20]),le(o,"click",r[21]),le(c,"click",r[22]),le(d,"click",r[23])],p=!0)},p:R,d(y){y&&D(e),p=!1,Pt(m)}}}function tu(r){let e,t;return e=new ft({props:{$$slots:{dropdown:[uy],tooltip:[ay],default:[oy]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function oy(r){let e,t;return{c(){e=M("div"),t=G("Font"),this.h()},l(n){e=O(n,"DIV",{class:!0});var i=w(e);t=Y(i,"Font"),i.forEach(D),this.h()},h(){E(e,"class","px-2 py-1")},m(n,i){I(n,e,i),k(e,t)},p:R,d(n){n&&D(e)}}}function ly(r){let e;return{c(){e=G("Font Family")},l(t){e=Y(t,"Font Family")},m(t,n){I(t,e,n)},d(t){t&&D(e)}}}function ay(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[ly]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function uy(r){let e,t,n,i,s,o,l;return{c(){e=M("div"),t=M("div"),n=M("button"),i=G("Helvetica"),s=V(),o=M("button"),l=G("Open Sans"),this.h()},l(a){e=O(a,"DIV",{slot:!0,class:!0});var c=w(e);t=O(c,"DIV",{class:!0});var u=w(t);n=O(u,"BUTTON",{type:!0,class:!0});var f=w(n);i=Y(f,"Helvetica"),f.forEach(D),s=H(u),o=O(u,"BUTTON",{type:!0,class:!0});var d=w(o);l=Y(d,"Open Sans"),d.forEach(D),u.forEach(D),c.forEach(D),this.h()},h(){E(n,"type","button"),E(n,"class","whitespace-nowrap text-left p-1 text-ellipsis overflow-hidden w-full"),E(o,"type","button"),E(o,"class","whitespace-nowrap p-1 text-left text-ellipsis overflow-hidden w-full"),E(t,"class","text-sm bg-white text-left rounded"),E(e,"slot","dropdown"),E(e,"class","absolute left-0 right-0 top-full whitespace-normal opacity-0 pointer-events-none pt-2 group-hover/btn:opacity-100 group-hover/btn:pointer-events-auto")},m(a,c){I(a,e,c),k(e,t),k(t,n),k(n,i),k(t,s),k(t,o),k(o,l)},p:R,d(a){a&&D(e)}}}function cy(r){let e,t,n,i,s;return t=new b1({}),{c(){e=M("button"),j(t.$$.fragment),this.h()},l(o){e=O(o,"BUTTON",{class:!0,type:!0});var l=w(e);U(t.$$.fragment,l),l.forEach(D),this.h()},h(){E(e,"class","w-7 h-7 flex justify-center items-center cursor-pointer"),E(e,"type","button"),te(e,"text-green-700",r[13]),te(e,"bg-green-50",r[13])},m(o,l){I(o,e,l),W(t,e,null),n=!0,i||(s=le(e,"click",r[24]),i=!0)},p(o,l){(!n||l[0]&8192)&&te(e,"text-green-700",o[13]),(!n||l[0]&8192)&&te(e,"bg-green-50",o[13])},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){o&&D(e),K(t),i=!1,s()}}}function fy(r){let e,t,n,i,s;return t=new dr({props:{key:"⌘"}}),i=new dr({props:{key:"B"}}),{c(){e=G("Bold "),j(t.$$.fragment),n=G(" + "),j(i.$$.fragment)},l(o){e=Y(o,"Bold "),U(t.$$.fragment,o),n=Y(o," + "),U(i.$$.fragment,o)},m(o,l){I(o,e,l),W(t,o,l),I(o,n,l),W(i,o,l),s=!0},p:R,i(o){s||(C(t.$$.fragment,o),C(i.$$.fragment,o),s=!0)},o(o){_(t.$$.fragment,o),_(i.$$.fragment,o),s=!1},d(o){o&&D(e),K(t,o),o&&D(n),K(i,o)}}}function dy(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[fy]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function hy(r){let e,t,n,i,s;return t=new E1({}),{c(){e=M("button"),j(t.$$.fragment),this.h()},l(o){e=O(o,"BUTTON",{class:!0,type:!0});var l=w(e);U(t.$$.fragment,l),l.forEach(D),this.h()},h(){E(e,"class","w-7 h-7 flex justify-center items-center cursor-pointer"),E(e,"type","button"),te(e,"text-green-700",r[12]),te(e,"bg-green-50",r[12])},m(o,l){I(o,e,l),W(t,e,null),n=!0,i||(s=le(e,"click",r[25]),i=!0)},p(o,l){(!n||l[0]&4096)&&te(e,"text-green-700",o[12]),(!n||l[0]&4096)&&te(e,"bg-green-50",o[12])},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){o&&D(e),K(t),i=!1,s()}}}function py(r){let e,t,n,i,s;return t=new dr({props:{key:"⌘"}}),i=new dr({props:{key:"I"}}),{c(){e=G("Italic "),j(t.$$.fragment),n=G(" + "),j(i.$$.fragment)},l(o){e=Y(o,"Italic "),U(t.$$.fragment,o),n=Y(o," + "),U(i.$$.fragment,o)},m(o,l){I(o,e,l),W(t,o,l),I(o,n,l),W(i,o,l),s=!0},p:R,i(o){s||(C(t.$$.fragment,o),C(i.$$.fragment,o),s=!0)},o(o){_(t.$$.fragment,o),_(i.$$.fragment,o),s=!1},d(o){o&&D(e),K(t,o),o&&D(n),K(i,o)}}}function my(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[py]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function nu(r){let e,t;return e=new ft({props:{$$slots:{tooltip:[Dy],default:[gy]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[0]&2048|i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function gy(r){let e,t,n,i,s;return t=new A1({}),{c(){e=M("button"),j(t.$$.fragment),this.h()},l(o){e=O(o,"BUTTON",{class:!0,type:!0});var l=w(e);U(t.$$.fragment,l),l.forEach(D),this.h()},h(){E(e,"class","w-7 h-7 flex justify-center items-center cursor-pointer"),E(e,"type","button"),te(e,"text-green-700",r[11]),te(e,"bg-green-50",r[11])},m(o,l){I(o,e,l),W(t,e,null),n=!0,i||(s=le(e,"click",r[26]),i=!0)},p(o,l){(!n||l[0]&2048)&&te(e,"text-green-700",o[11]),(!n||l[0]&2048)&&te(e,"bg-green-50",o[11])},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){o&&D(e),K(t),i=!1,s()}}}function yy(r){let e,t,n,i,s;return t=new dr({props:{key:"⌘"}}),i=new dr({props:{key:"U"}}),{c(){e=G("Underline "),j(t.$$.fragment),n=G(" + "),j(i.$$.fragment)},l(o){e=Y(o,"Underline "),U(t.$$.fragment,o),n=Y(o," + "),U(i.$$.fragment,o)},m(o,l){I(o,e,l),W(t,o,l),I(o,n,l),W(i,o,l),s=!0},p:R,i(o){s||(C(t.$$.fragment,o),C(i.$$.fragment,o),s=!0)},o(o){_(t.$$.fragment,o),_(i.$$.fragment,o),s=!1},d(o){o&&D(e),K(t,o),o&&D(n),K(i,o)}}}function Dy(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[yy]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function ru(r){let e,t;return e=new ft({props:{$$slots:{tooltip:[ky],default:[by]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[0]&1024|i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function by(r){let e,t,n,i,s;return t=new O1({}),{c(){e=M("button"),j(t.$$.fragment),this.h()},l(o){e=O(o,"BUTTON",{class:!0,type:!0});var l=w(e);U(t.$$.fragment,l),l.forEach(D),this.h()},h(){E(e,"class","w-7 h-7 flex justify-center items-center cursor-pointer"),E(e,"type","button"),te(e,"text-green-700",r[10]),te(e,"bg-green-50",r[10])},m(o,l){I(o,e,l),W(t,e,null),n=!0,i||(s=le(e,"click",r[27]),i=!0)},p(o,l){(!n||l[0]&1024)&&te(e,"text-green-700",o[10]),(!n||l[0]&1024)&&te(e,"bg-green-50",o[10])},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){o&&D(e),K(t),i=!1,s()}}}function vy(r){let e;return{c(){e=G("Strikethrough")},l(t){e=Y(t,"Strikethrough")},m(t,n){I(t,e,n)},d(t){t&&D(e)}}}function ky(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[vy]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function iu(r){let e,t;return e=new ff({}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function su(r){let e,t;return e=new df({}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function ou(r){let e,t;return e=new hf({}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function lu(r){let e,t;return e=new pf({}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Ey(r){let e,t,n,i,s,o=r[9]&&iu(),l=r[8]&&su(),a=r[7]&&ou(),c=r[6]&&lu();return{c(){e=M("button"),o&&o.c(),t=V(),l&&l.c(),n=V(),a&&a.c(),i=V(),c&&c.c(),this.h()},l(u){e=O(u,"BUTTON",{class:!0,type:!0});var f=w(e);o&&o.l(f),t=H(f),l&&l.l(f),n=H(f),a&&a.l(f),i=H(f),c&&c.l(f),f.forEach(D),this.h()},h(){E(e,"class","w-7 h-7 flex items-center justify-center cursor-pointer group-btn"),E(e,"type","button")},m(u,f){I(u,e,f),o&&o.m(e,null),k(e,t),l&&l.m(e,null),k(e,n),a&&a.m(e,null),k(e,i),c&&c.m(e,null),s=!0},p(u,f){u[9]?o?f[0]&512&&C(o,1):(o=iu(),o.c(),C(o,1),o.m(e,t)):o&&(Qe(),_(o,1,1,()=>{o=null}),Ze()),u[8]?l?f[0]&256&&C(l,1):(l=su(),l.c(),C(l,1),l.m(e,n)):l&&(Qe(),_(l,1,1,()=>{l=null}),Ze()),u[7]?a?f[0]&128&&C(a,1):(a=ou(),a.c(),C(a,1),a.m(e,i)):a&&(Qe(),_(a,1,1,()=>{a=null}),Ze()),u[6]?c?f[0]&64&&C(c,1):(c=lu(),c.c(),C(c,1),c.m(e,null)):c&&(Qe(),_(c,1,1,()=>{c=null}),Ze())},i(u){s||(C(o),C(l),C(a),C(c),s=!0)},o(u){_(o),_(l),_(a),_(c),s=!1},d(u){u&&D(e),o&&o.d(),l&&l.d(),a&&a.d(),c&&c.d()}}}function xy(r){let e;return{c(){e=G("Align Text")},l(t){e=Y(t,"Align Text")},m(t,n){I(t,e,n)},d(t){t&&D(e)}}}function wy(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[xy]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Cy(r){let e,t,n,i,s,o,l,a,c,u,f,d,h,p,m,y;return i=new ff({}),l=new df({}),u=new hf({}),h=new pf({}),{c(){e=M("div"),t=M("div"),n=M("button"),j(i.$$.fragment),s=V(),o=M("button"),j(l.$$.fragment),a=V(),c=M("button"),j(u.$$.fragment),f=V(),d=M("button"),j(h.$$.fragment),this.h()},l(g){e=O(g,"DIV",{slot:!0,class:!0});var b=w(e);t=O(b,"DIV",{class:!0});var v=w(t);n=O(v,"BUTTON",{type:!0,class:!0});var x=w(n);U(i.$$.fragment,x),x.forEach(D),s=H(v),o=O(v,"BUTTON",{type:!0,class:!0});var T=w(o);U(l.$$.fragment,T),T.forEach(D),a=H(v),c=O(v,"BUTTON",{type:!0,class:!0});var P=w(c);U(u.$$.fragment,P),P.forEach(D),f=H(v),d=O(v,"BUTTON",{type:!0,class:!0});var Q=w(d);U(h.$$.fragment,Q),Q.forEach(D),v.forEach(D),b.forEach(D),this.h()},h(){E(n,"type","button"),E(n,"class","p-1 flex justify-center"),te(n,"bg-green-50",r[9]),E(o,"type","button"),E(o,"class","p-1 flex justify-center"),te(o,"bg-green-50",r[8]),E(c,"type","button"),E(c,"class","p-1 flex justify-center"),te(c,"bg-green-50",r[7]),E(d,"type","button"),E(d,"class","p-1 flex justify-center"),te(d,"bg-green-50",r[6]),E(t,"class","bg-white flex"),E(e,"slot","dropdown"),E(e,"class","absolute left-1/2 -translate-x-1/2 top-full opacity-0 pointer-events-none pt-2 group-hover/btn:opacity-100 group-hover/btn:pointer-events-auto")},m(g,b){I(g,e,b),k(e,t),k(t,n),W(i,n,null),k(t,s),k(t,o),W(l,o,null),k(t,a),k(t,c),W(u,c,null),k(t,f),k(t,d),W(h,d,null),p=!0,m||(y=[le(n,"click",r[28]),le(o,"click",r[29]),le(c,"click",r[30]),le(d,"click",r[31])],m=!0)},p(g,b){(!p||b[0]&512)&&te(n,"bg-green-50",g[9]),(!p||b[0]&256)&&te(o,"bg-green-50",g[8]),(!p||b[0]&128)&&te(c,"bg-green-50",g[7]),(!p||b[0]&64)&&te(d,"bg-green-50",g[6])},i(g){p||(C(i.$$.fragment,g),C(l.$$.fragment,g),C(u.$$.fragment,g),C(h.$$.fragment,g),p=!0)},o(g){_(i.$$.fragment,g),_(l.$$.fragment,g),_(u.$$.fragment,g),_(h.$$.fragment,g),p=!1},d(g){g&&D(e),K(i),K(l),K(u),K(h),m=!1,Pt(y)}}}function au(r){let e,t;return e=new ft({props:{$$slots:{dropdown:[My],tooltip:[Ty],default:[Sy]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Sy(r){let e,t,n,i,s;return t=new mf({}),{c(){e=M("button"),j(t.$$.fragment),this.h()},l(o){e=O(o,"BUTTON",{class:!0,type:!0});var l=w(e);U(t.$$.fragment,l),l.forEach(D),this.h()},h(){E(e,"class","w-7 h-7 flex items-center justify-center cursor-pointer group-btn"),E(e,"type","button")},m(o,l){I(o,e,l),W(t,e,null),n=!0,i||(s=le(e,"click",r[34]),i=!0)},p:R,i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){o&&D(e),K(t),i=!1,s()}}}function Ay(r){let e;return{c(){e=G("Add List")},l(t){e=Y(t,"Add List")},m(t,n){I(t,e,n)},d(t){t&&D(e)}}}function Ty(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[Ay]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function My(r){let e,t,n,i,s,o,l,a,c,u;return i=new mf({}),l=new F1({}),{c(){e=M("div"),t=M("div"),n=M("button"),j(i.$$.fragment),s=V(),o=M("button"),j(l.$$.fragment),this.h()},l(f){e=O(f,"DIV",{slot:!0,class:!0});var d=w(e);t=O(d,"DIV",{class:!0});var h=w(t);n=O(h,"BUTTON",{type:!0,class:!0});var p=w(n);U(i.$$.fragment,p),p.forEach(D),s=H(h),o=O(h,"BUTTON",{type:!0,class:!0});var m=w(o);U(l.$$.fragment,m),m.forEach(D),h.forEach(D),d.forEach(D),this.h()},h(){E(n,"type","button"),E(n,"class","whitespace-nowrap text-left p-1 text-ellipsis overflow-hidden w-full"),E(o,"type","button"),E(o,"class","whitespace-nowrap p-1 text-left text-ellipsis overflow-hidden w-full"),E(t,"class","text-sm bg-white text-left rounded"),E(e,"slot","dropdown"),E(e,"class","absolute left-0 right-0 top-full whitespace-normal opacity-0 pointer-events-none pt-2 group-hover/btn:opacity-100 group-hover/btn:pointer-events-auto")},m(f,d){I(f,e,d),k(e,t),k(t,n),W(i,n,null),k(t,s),k(t,o),W(l,o,null),a=!0,c||(u=[le(n,"click",r[32]),le(o,"click",r[33])],c=!0)},p:R,i(f){a||(C(i.$$.fragment,f),C(l.$$.fragment,f),a=!0)},o(f){_(i.$$.fragment,f),_(l.$$.fragment,f),a=!1},d(f){f&&D(e),K(i),K(l),c=!1,Pt(u)}}}function Oy(r){let e,t,n,i,s;return t=new $1({}),{c(){e=M("button"),j(t.$$.fragment),this.h()},l(o){e=O(o,"BUTTON",{class:!0,type:!0});var l=w(e);U(t.$$.fragment,l),l.forEach(D),this.h()},h(){E(e,"class","w-7 h-7 flex justify-center items-center cursor-pointer"),E(e,"type","button")},m(o,l){I(o,e,l),W(t,e,null),n=!0,i||(s=le(e,"click",r[35]),i=!0)},p:R,i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){o&&D(e),K(t),i=!1,s()}}}function _y(r){let e;return{c(){e=G("Insert Link")},l(t){e=Y(t,"Insert Link")},m(t,n){I(t,e,n)},d(t){t&&D(e)}}}function Ny(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[_y]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Fy(r){let e,t;return{c(){e=M("button"),t=M("div"),this.h()},l(n){e=O(n,"BUTTON",{class:!0,type:!0});var i=w(e);t=O(i,"DIV",{class:!0}),w(t).forEach(D),i.forEach(D),this.h()},h(){E(t,"class","w-4 h-4 rounded-full bg-purple-400 border-[1px]"),E(e,"class","w-7 h-7 flex justify-center items-center cursor-pointer"),E(e,"type","button")},m(n,i){I(n,e,i),k(e,t)},p:R,d(n){n&&D(e)}}}function By(r){let e;return{c(){e=G("Pick a Color")},l(t){e=Y(t,"Pick a Color")},m(t,n){I(t,e,n)},d(t){t&&D(e)}}}function Iy(r){let e,t;return e=new bt({props:{slot:"tooltip",$$slots:{default:[By]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function $y(r){let e,t,n,i,s,o,l,a,c,u,f,d,h,p,m,y,g,b,v,x,T,P,Q;e=new Lf({props:{elementData:r[0]}}),e.$on("destroy",r[15]),e.$on("mount",r[14]),i=new ft({props:{$$slots:{tooltip:[ty],default:[Z1]},$$scope:{ctx:r}}}),o=new ft({props:{$$slots:{dropdown:[sy],tooltip:[iy],default:[ny]},$$scope:{ctx:r}}});let N=r[2]&&tu(r);c=new ft({props:{$$slots:{tooltip:[dy],default:[cy]},$$scope:{ctx:r}}}),f=new ft({props:{$$slots:{tooltip:[my],default:[hy]},$$scope:{ctx:r}}});let S=r[2]&&nu(r),ee=r[2]&&ru(r);m=new ft({props:{$$slots:{dropdown:[Cy],tooltip:[wy],default:[Ey]},$$scope:{ctx:r}}});let q=r[2]&&au(r);return b=new ft({props:{$$slots:{tooltip:[Ny],default:[Oy]},$$scope:{ctx:r}}}),x=new ft({props:{$$slots:{tooltip:[Iy],default:[Fy]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment),t=V(),n=M("div"),j(i.$$.fragment),s=V(),j(o.$$.fragment),l=V(),N&&N.c(),a=V(),j(c.$$.fragment),u=V(),j(f.$$.fragment),d=V(),S&&S.c(),h=V(),ee&&ee.c(),p=V(),j(m.$$.fragment),y=V(),q&&q.c(),g=V(),j(b.$$.fragment),v=V(),j(x.$$.fragment),this.h()},l($){U(e.$$.fragment,$),t=H($),n=O($,"DIV",{class:!0});var F=w(n);U(i.$$.fragment,F),s=H(F),U(o.$$.fragment,F),l=H(F),N&&N.l(F),a=H(F),U(c.$$.fragment,F),u=H(F),U(f.$$.fragment,F),d=H(F),S&&S.l(F),h=H(F),ee&&ee.l(F),p=H(F),U(m.$$.fragment,F),y=H(F),q&&q.l(F),g=H(F),U(b.$$.fragment,F),v=H(F),U(x.$$.fragment,F),F.forEach(D),this.h()},h(){E(n,"class","opacity-0 z-10 absolute controls whitespace-nowrap bg-white text-sm text-left flex items-center rounded-full"),te(n,"opacity-100",r[3]),te(n,"pointer-events-auto",r[3]),Je(n,"top",r[4]),Je(n,"left",r[5])},m($,F){W(e,$,F),I($,t,F),I($,n,F),W(i,n,null),k(n,s),W(o,n,null),k(n,l),N&&N.m(n,null),k(n,a),W(c,n,null),k(n,u),W(f,n,null),k(n,d),S&&S.m(n,null),k(n,h),ee&&ee.m(n,null),k(n,p),W(m,n,null),k(n,y),q&&q.m(n,null),k(n,g),W(b,n,null),k(n,v),W(x,n,null),r[36](n),T=!0,P||(Q=le(n,"click",r[17]),P=!0)},p($,F){const ke={};F[0]&1&&(ke.elementData=$[0]),e.$set(ke);const se={};F[0]&4|F[1]&16384&&(se.$$scope={dirty:F,ctx:$}),i.$set(se);const oe={};F[1]&16384&&(oe.$$scope={dirty:F,ctx:$}),o.$set(oe),$[2]?N?F[0]&4&&C(N,1):(N=tu($),N.c(),C(N,1),N.m(n,a)):N&&(Qe(),_(N,1,1,()=>{N=null}),Ze());const Me={};F[0]&8192|F[1]&16384&&(Me.$$scope={dirty:F,ctx:$}),c.$set(Me);const Oe={};F[0]&4096|F[1]&16384&&(Oe.$$scope={dirty:F,ctx:$}),f.$set(Oe),$[2]?S?(S.p($,F),F[0]&4&&C(S,1)):(S=nu($),S.c(),C(S,1),S.m(n,h)):S&&(Qe(),_(S,1,1,()=>{S=null}),Ze()),$[2]?ee?(ee.p($,F),F[0]&4&&C(ee,1)):(ee=ru($),ee.c(),C(ee,1),ee.m(n,p)):ee&&(Qe(),_(ee,1,1,()=>{ee=null}),Ze());const ge={};F[0]&960|F[1]&16384&&(ge.$$scope={dirty:F,ctx:$}),m.$set(ge),$[2]?q?(q.p($,F),F[0]&4&&C(q,1)):(q=au($),q.c(),C(q,1),q.m(n,g)):q&&(Qe(),_(q,1,1,()=>{q=null}),Ze());const de={};F[1]&16384&&(de.$$scope={dirty:F,ctx:$}),b.$set(de);const he={};F[1]&16384&&(he.$$scope={dirty:F,ctx:$}),x.$set(he),(!T||F[0]&8)&&te(n,"opacity-100",$[3]),(!T||F[0]&8)&&te(n,"pointer-events-auto",$[3]),F[0]&16&&Je(n,"top",$[4]),F[0]&32&&Je(n,"left",$[5])},i($){T||(C(e.$$.fragment,$),C(i.$$.fragment,$),C(o.$$.fragment,$),C(N),C(c.$$.fragment,$),C(f.$$.fragment,$),C(S),C(ee),C(m.$$.fragment,$),C(q),C(b.$$.fragment,$),C(x.$$.fragment,$),T=!0)},o($){_(e.$$.fragment,$),_(i.$$.fragment,$),_(o.$$.fragment,$),_(N),_(c.$$.fragment,$),_(f.$$.fragment,$),_(S),_(ee),_(m.$$.fragment,$),_(q),_(b.$$.fragment,$),_(x.$$.fragment,$),T=!1},d($){K(e,$),$&&D(t),$&&D(n),K(i),K(o),N&&N.d(),K(c),K(f),S&&S.d(),ee&&ee.d(),K(m),q&&q.d(),K(b),K(x),r[36](null),P=!1,Q()}}}function Ry(r,e,t){let n,i,s,o,l,a,c,u,{elementData:f}=e,d,h,p=!1,m=!1,y="0px",g="0px";function b(Ee){Ee.detail,Ee.detail.innerHTML="",t(19,d=new Gg({element:Ee.detail,extensions:[i0,c0,d0,p0,g0,Qg,I0,R0,V0,j0.configure({types:["heading","paragraph"]}),W0,q0,X0],content:f.html,onTransaction:v,onFocus:x,onBlur:T,autofocus:!0}))}function v(Ee){if(t(19,d=Ee.editor),!m)return;const Dr=window.getSelection().getRangeAt(0);h1(Dr,h,{placement:"top",middleware:[l1(10),u1(),o1()]}).then(({x:br,y:zt})=>{t(4,y=`${zt}px`),t(5,g=`${br}px`)})}function x({editor:Ee,event:ut}){t(3,m=!0)}function T({editor:Ee,event:ut}){console.log("Save Your Content Here"),t(3,m=!1)}function P(){d&&(d.destroy(),t(19,d=null))}function Q(){t(2,p=!p)}function N(Ee){Ee.stopPropagation(),t(3,m=!0),d.commands.focus()}function S(Ee,ut){d.commands.focus(),d.commands[Ee](ut)}const ee=()=>S("toggleHeading",{level:1}),q=()=>S("toggleHeading",{level:2}),$=()=>S("toggleHeading",{level:3}),F=()=>S("setParagraph"),ke=()=>S("toggleBold"),se=()=>S("toggleItalic"),oe=()=>S("toggleUnderline"),Me=()=>S("toggleStrike"),Oe=()=>S("setTextAlign","left"),ge=()=>S("setTextAlign","center"),de=()=>S("setTextAlign","right"),he=()=>S("setTextAlign","justify"),tt=()=>S("toggleUnorderedList"),dn=()=>S("toggleOrderedList"),hn=()=>S("toggleUnorderedList"),gr=()=>S("toggleLink",{href:"/"});function yr(Ee){zr[Ee?"unshift":"push"](()=>{h=Ee,t(1,h)})}return r.$$set=Ee=>{"elementData"in Ee&&t(0,f=Ee.elementData)},r.$$.update=()=>{r.$$.dirty[0]&524288&&t(13,n=d==null?void 0:d.isActive("bold")),r.$$.dirty[0]&524288&&t(12,i=d==null?void 0:d.isActive("italic")),r.$$.dirty[0]&524288&&t(11,s=d==null?void 0:d.isActive("underline")),r.$$.dirty[0]&524288&&t(10,o=d==null?void 0:d.isActive("strike")),r.$$.dirty[0]&524288&&t(9,l=d==null?void 0:d.isActive({textAlign:"left"})),r.$$.dirty[0]&524288&&t(8,a=d==null?void 0:d.isActive({textAlign:"center"})),r.$$.dirty[0]&524288&&t(7,c=d==null?void 0:d.isActive({textAlign:"right"})),r.$$.dirty[0]&524288&&t(6,u=d==null?void 0:d.isActive({textAlign:"justify"})),r.$$.dirty[0]&524288&&(d==null||d.isActive("orderedList")),r.$$.dirty[0]&524288&&(d==null||d.isActive("bulletList")),r.$$.dirty[0]&524288&&(d==null||d.isActive("link"))},[f,h,p,m,y,g,u,c,a,l,o,s,i,n,b,P,Q,N,S,d,ee,q,$,F,ke,se,oe,Me,Oe,ge,de,he,tt,dn,hn,gr,yr]}class Py extends ye{constructor(e){super(),De(this,e,Ry,$y,be,{elementData:0},null,[-1,-1])}}function Ly({elementData:r,isDragging:e,selectedElementIds:t,diffX:n,diffY:i,device:s,resizeDirection:o}){return r.type!==Jt.GRID||!e?r:{...r,children:r.children.map(l=>t.includes(l.id)?$o({elementData:l,gridElementData:r,device:s,diffX:n,diffY:i,resizeDirection:o}):l)}}function uu(r,e,t){const n=r.slice();return n[22]=e[t],n[24]=t,n}function zy(r){return{c:R,l:R,m:R,p:R,i:R,o:R,d:R}}function Vy(r){return{c:R,l:R,m:R,p:R,i:R,o:R,d:R}}function Hy(r){let e,t;return e=new Py({props:{elementData:r[0]}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i&1&&(s.elementData=n[0]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function jy(r){let e,t,n,i,s,o,l,a,c,u,f,d,h,p=r[4].children,m=[];for(let g=0;g<p.length;g+=1)m[g]=cu(uu(r,p,g));const y=g=>_(m[g],1,1,()=>{m[g]=null});return i=new xu({props:{elementData:r[0]}}),o=new ld({props:{elementData:r[4]}}),c=new cd({props:{elementData:r[4],isHovered:r[1]}}),{c(){e=M("div");for(let g=0;g<m.length;g+=1)m[g].c();t=V(),n=M("div"),j(i.$$.fragment),s=V(),j(o.$$.fragment),a=V(),j(c.$$.fragment),this.h()},l(g){e=O(g,"DIV",{class:!0,style:!0});var b=w(e);for(let x=0;x<m.length;x+=1)m[x].l(b);t=H(b),n=O(b,"DIV",{class:!0});var v=w(n);U(i.$$.fragment,v),s=H(v),U(o.$$.fragment,v),v.forEach(D),a=H(b),U(c.$$.fragment,b),b.forEach(D),this.h()},h(){E(n,"class","opacity-0 pointer-events-none grid [grid-area:2/2/-2/-2] overflow-hidden"),te(n,"opacity-100",r[1]),E(e,"class","plane group/plane"),E(e,"style",r[7])},m(g,b){I(g,e,b);for(let v=0;v<m.length;v+=1)m[v].m(e,null);k(e,t),k(e,n),W(i,n,null),k(n,s),W(o,n,null),r[20](n),k(e,a),W(c,e,null),r[21](e),f=!0,d||(h=[Vr(l=jr.call(null,n,{id:r[0].id,type:"planeRef"})),Vr(u=jr.call(null,e,{id:r[4].id,type:"elementRef"}))],d=!0)},p(g,b){if(b&80){p=g[4].children;let P;for(P=0;P<p.length;P+=1){const Q=uu(g,p,P);m[P]?(m[P].p(Q,b),C(m[P],1)):(m[P]=cu(Q),m[P].c(),C(m[P],1),m[P].m(e,t))}for(Qe(),P=p.length;P<m.length;P+=1)y(P);Ze()}const v={};b&1&&(v.elementData=g[0]),i.$set(v);const x={};b&16&&(x.elementData=g[4]),o.$set(x),l&&Hr(l.update)&&b&1&&l.update.call(null,{id:g[0].id,type:"planeRef"}),(!f||b&2)&&te(n,"opacity-100",g[1]);const T={};b&16&&(T.elementData=g[4]),b&2&&(T.isHovered=g[1]),c.$set(T),(!f||b&128)&&E(e,"style",g[7]),u&&Hr(u.update)&&b&16&&u.update.call(null,{id:g[4].id,type:"elementRef"})},i(g){if(!f){for(let b=0;b<p.length;b+=1)C(m[b]);C(i.$$.fragment,g),C(o.$$.fragment,g),C(c.$$.fragment,g),f=!0}},o(g){m=m.filter(Boolean);for(let b=0;b<m.length;b+=1)_(m[b]);_(i.$$.fragment,g),_(o.$$.fragment,g),_(c.$$.fragment,g),f=!1},d(g){g&&D(e),ts(m,g),K(i),K(o),r[20](null),K(c),r[21](null),d=!1,Pt(h)}}}function cu(r){let e,t,n,i,s,o,l;return t=new gf({props:{elementData:r[22]}}),{c(){e=M("div"),j(t.$$.fragment),this.h()},l(a){e=O(a,"DIV",{class:!0,style:!0});var c=w(e);U(t.$$.fragment,c),c.forEach(D),this.h()},h(){E(e,"class","element group/element"),E(e,"style",n=r[6][r[24]])},m(a,c){I(a,e,c),W(t,e,null),s=!0,o||(l=Vr(i=jr.call(null,e,{id:r[22].id,type:"elementRef"})),o=!0)},p(a,c){r=a;const u={};c&16&&(u.elementData=r[22]),t.$set(u),(!s||c&64&&n!==(n=r[6][r[24]]))&&E(e,"style",n),i&&Hr(i.update)&&c&16&&i.update.call(null,{id:r[22].id,type:"elementRef"})},i(a){s||(C(t.$$.fragment,a),s=!0)},o(a){_(t.$$.fragment,a),s=!1},d(a){a&&D(e),K(t),o=!1,l()}}}function fu(r){let e,t;return e=new xu({props:{elementData:r[0]}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i&1&&(s.elementData=n[0]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Uy(r){let e,t,n,i,s;const o=[jy,Hy,Vy,zy],l=[];function a(u,f){return u[5]===Jt.GRID?0:u[5]===Jt.TEXT?1:u[5]===Jt.IMAGE?2:3}e=a(r),t=l[e]=o[e](r);let c=r[8]&&r[5]!==Jt.GRID&&fu(r);return{c(){t.c(),n=V(),c&&c.c(),i=Di()},l(u){t.l(u),n=H(u),c&&c.l(u),i=Di()},m(u,f){l[e].m(u,f),I(u,n,f),c&&c.m(u,f),I(u,i,f),s=!0},p(u,[f]){let d=e;e=a(u),e===d?l[e].p(u,f):(Qe(),_(l[d],1,1,()=>{l[d]=null}),Ze(),t=l[e],t?t.p(u,f):(t=l[e]=o[e](u),t.c()),C(t,1),t.m(n.parentNode,n)),u[8]&&u[5]!==Jt.GRID?c?(c.p(u,f),f&288&&C(c,1)):(c=fu(u),c.c(),C(c,1),c.m(i.parentNode,i)):c&&(Qe(),_(c,1,1,()=>{c=null}),Ze())},i(u){s||(C(t),C(c),s=!0)},o(u){_(t),_(c),s=!1},d(u){l[e].d(u),u&&D(n),c&&c.d(u),u&&D(i)}}}function Wy(r,e,t){let n,i,s,o,l,a,c,u,f,d,h,p,m,y,g,b;ve(r,nn,S=>t(10,c=S)),ve(r,gt,S=>t(11,u=S)),ve(r,rs,S=>t(12,f=S)),ve(r,ls,S=>t(13,d=S)),ve(r,_f,S=>t(14,h=S)),ve(r,Le,S=>t(15,p=S)),ve(r,ss,S=>t(16,m=S)),ve(r,is,S=>t(17,y=S)),ve(r,Re,S=>t(18,g=S)),ve(r,It,S=>t(19,b=S));let{elementData:v}=e,x=!1,T,P;function Q(S){zr[S?"unshift":"push"](()=>{P=S,t(3,P)})}function N(S){zr[S?"unshift":"push"](()=>{T=S,t(2,T)})}return r.$$set=S=>{"elementData"in S&&t(0,v=S.elementData)},r.$$.update=()=>{if(r.$$.dirty&1&&t(5,{type:n,id:i}=v,n,(t(9,i),t(0,v))),r.$$.dirty&262656&&t(8,s=g.includes(i)),r.$$.dirty&1017857&&t(4,o=Ly({elementData:v,isDragging:b,selectedElementIds:g,diffX:y,diffY:m,device:u,resizeDirection:p})),r.$$.dirty&48&&t(7,{gridCssVars:l,elementCssVars:a}=n===Jt.GRID&&Hf(o),l,(t(6,a),t(5,n),t(4,o),t(0,v),t(19,b),t(18,g),t(17,y),t(16,m),t(11,u),t(15,p))),r.$$.dirty&31758){const S=h.includes(T);if(!S&&x)t(1,x=!1);else if(S&&!x&&(t(1,x=!0),d)){const{clientX:ee,clientY:q}=f,{left:$,top:F}=P==null?void 0:P.getBoundingClientRect();hr.set({x:ee,y:q});const ke=ee-$-150,se=q-F-24;nn.update(oe=>({...oe,[u]:{...oe[u],x:ke,y:se}})),Re.set([c==null?void 0:c.id]),It.set(!0)}}},[v,x,T,P,o,n,a,l,s,i,c,u,f,d,h,p,m,y,g,b,Q,N]}class gf extends ye{constructor(e){super(),De(this,e,Wy,Uy,be,{elementData:0})}}const es=at(!1);function Ky(r){var d,h,p;const e=ne(Sn),t=ne(Re),n=ne(es),i=ne(ns),s=ne(nn),o=r.composedPath().slice(0,-4);if(i){o.reverse();const m=o.reduce((y,g)=>y||Object.keys(e).find(b=>e[b].elementRef===g&&b!==(s==null?void 0:s.id)),null);ku(m);return}const l=o.reduce((m,y)=>m||Object.keys(e).find(g=>e[g].elementRef===y),null);if(!l)return;const a=e[l].elementRef,c=[...((p=(h=(d=e[t[0]])==null?void 0:d.elementRef)==null?void 0:h.parentElement)==null?void 0:p.children)??[]],u=t.includes(l),f=c.includes(a);It.set(!0),hr.set({x:r.clientX,y:r.clientY}),t.length>0?f?n?u?Re.set(t.filter(m=>m!==l)):Re.set([...t,l]):t.length===1&&t[0]!==l&&Re.set([l]):Re.set([l]):Re.set([l])}function Jy(r){const e=r.composedPath().slice(0,-4),t=ne(Sn),n=ne(nn),i=ne(Re),s=ne(is),o=ne(ss),l=ne(Le),a=ne(rr),c=ne(Of);if(a){if(!c){ns.set(!0),rr.set(!1);return}e.reverse();const u=e.reduce((f,d)=>f||Object.keys(t).find(h=>t[h].elementRef===d&&h!==(n==null?void 0:n.id)),null);ku(u)}else i.length>0&&Cr(s,o);if(l){const u=e.reduce((f,d)=>f||Object.entries(t).reduce((h,[p,m])=>{if(h)return h;if(m.overshootLeftRef===d)return"LEFT";if(m.overshootRightRef===d)return"RIGHT"},null),null);u&&Yf(u)}pr.set({x:null,y:null}),hr.set({x:null,y:null}),It.set(!1),Le.set(null)}let yf=!0;It.subscribe(r=>yf=!r);function qy(r){rs.set(r),!yf&&pr.set({x:r.clientX,y:r.clientY})}function Gy(r){const e=ne(es);r.key==="Shift"&&es.set(!0),r.key==="Escape"&&(rr.set(!1),nn.set(null),Re.set([])),r.key==="Backspace"&&(document.activeElement||Gf());const t=e?10:1;r.key==="ArrowLeft"&&Cr(-t,0),r.key==="ArrowRight"&&Cr(t,0),r.key==="ArrowUp"&&Cr(0,-t),r.key==="ArrowDown"&&Cr(0,t)}function Yy(r){r.key==="Shift"&&es.set(!1)}function Xy(r){Eu()}function Qy(r){}function du(r,e,t){const n=r.slice();return n[4]=e[t],n}function hu(r){let e,t;return e=new gf({props:{elementData:r[4]}}),{c(){j(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,i){const s={};i&1&&(s.elementData=n[4]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Zy(r){let e,t,n,i,s,o;t=new td({});let l=r[0].children,a=[];for(let u=0;u<l.length;u+=1)a[u]=hu(du(r,l,u));const c=u=>_(a[u],1,1,()=>{a[u]=null});return{c(){e=M("main"),j(t.$$.fragment),n=V();for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=O(u,"MAIN",{class:!0});var f=w(e);U(t.$$.fragment,f),n=H(f);for(let d=0;d<a.length;d+=1)a[d].l(f);f.forEach(D),this.h()},h(){E(e,"class","min-h-screen bg-gray-100")},m(u,f){I(u,e,f),W(t,e,null),k(e,n);for(let d=0;d<a.length;d+=1)a[d].m(e,null);i=!0,s||(o=[le(window,"keydown",Gy),le(window,"keyup",Yy),le(window,"mousedown",Ky),le(window,"mouseup",Jy),le(window,"mousemove",qy),le(window,"focusin",Qy),le(window,"focusout",Xy)],s=!0)},p(u,[f]){if(f&1){l=u[0].children;let d;for(d=0;d<l.length;d+=1){const h=du(u,l,d);a[d]?(a[d].p(h,f),C(a[d],1)):(a[d]=hu(h),a[d].c(),C(a[d],1),a[d].m(e,null))}for(Qe(),d=l.length;d<a.length;d+=1)c(d);Ze()}},i(u){if(!i){C(t.$$.fragment,u);for(let f=0;f<l.length;f+=1)C(a[f]);i=!0}},o(u){_(t.$$.fragment,u),a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)_(a[f]);i=!1},d(u){u&&D(e),K(t),ts(a,u),s=!1,Pt(o)}}}function eD(r,e,t){let n,i,s,o;return ve(r,It,l=>t(1,n=l)),ve(r,ls,l=>t(2,i=l)),ve(r,Re,l=>t(3,s=l)),ve(r,gu,l=>t(0,o=l)),r.$$.update=()=>{r.$$.dirty&14&&s&&!i&&!n&&Eu()},[o,n,i,s]}class lD extends ye{constructor(e){super(),De(this,e,eD,Zy,be,{})}}export{lD as default};
